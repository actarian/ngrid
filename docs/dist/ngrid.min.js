!function(t,e){"use strict";var n=e.module("ngrid",["ng","ngSanitize"]);t.console||(t.console={log:function(){}}),n.constant("ngridModes",{SUM:1,MIN:2,MAX:3,AVG:4}),n.directive("ngrid",["$window","$templateCache","$templateRequest","$interpolate","$compile","$timeout","Utils",function(t,n,r,o,i,l,c){function u(t){return t.replace(/^\s+|\s+$/gm,"")}return{priority:1,restrict:"A",replace:!0,templateUrl:"ngrid/partials/ngrid",transclude:!0,controller:["$transclude","$attrs",function(t,n){t(function(t,r){var o=Array.prototype.slice.call(t).filter(function(t){return 3!==t.nodeType||/\S/.test(t.nodeValue)}).map(function(t){return t.outerHTML});o=o.join("");var i=e.element("<div>"+o+"</div>"),l=i[0],c=l.querySelector(".ngrid-row");c&&c.parentNode&&(c.parentNode.removeChild(c),n.templateRow=u(c.outerHTML));var a=l.querySelector(".ngrid-col");a&&a.parentNode&&(a.parentNode.removeChild(a),n.templateCol=u(a.outerHTML));var s=l.querySelector(".ngrid-cell");s&&s.parentNode&&(s.parentNode.removeChild(s),n.templateCell=u(s.outerHTML))})}],link:function(n,r,o,l,u){function a(){var t,e,n,r=H.rows.total,o=!1;r>0?(n=Math.ceil(H.grid.height/H.cell.height)+1,t=Math.floor(H.scroll.y/H.cell.height),t=Math.max(0,Math.min(r-n+1,t)),e=Math.min(E.length,t+n)):(n=e=1,t=0),o=t!==H.rows.from||e!==H.rows.to,H.rows.dirty=o,H.rows.from=t,H.rows.to=e,H.rows.count=n}function s(){var t,e,n,r=H.cols.total,o=!1;r>0?(n=Math.ceil(H.grid.width/H.cell.width)+1,t=Math.floor(H.scroll.x/H.cell.width),t=Math.max(0,Math.min(r-n+1,t)),e=Math.min(z.length,t+n)):(n=e=1,t=0),o=t!==H.cols.from||e!==H.cols.to,H.cols.dirty=o,H.cols.from=t,H.cols.to=e,H.cols.count=n}function f(){var t=H.rows.count*H.cols.count,n=H.visibles,r=q,o=j;for((H.rows.dirty||H.cols.dirty)&&e.forEach(n,function(e,n){if(n<t){var r=h(n);r.$$phase||r.$digest()}});n.length<t;){var l=h(n.length),c=i(r)(l,function(t){c=t}),u=e.element(c);o.append(u),n.push({element:u,scope:l})}}function h(t){var e=Math.floor(t/H.cols.count),r=t%H.cols.count,o=H.rows.from+e,i=H.cols.from+r,l=o*H.cols.total+i,c=H.visibles.length>t?H.visibles[t].scope:n.$new();return c.$i=t,c.$r=e,c.$c=r,c.$index=l,c.$row=o,c.$col=i,c.row=E?E[o]:null,c.col=z?z[i]:null,c}function d(){a(),s(),f(),m(),g()}function m(){var t=H.rows.count*H.cols.count,n=H.visibles;e.forEach(n,function(e,n){var r=e.element[0];if(n<t){r.style.width=(z?H.cell.width:H.table.width)+"px",r.style.height=(E?H.cell.height:H.table.height)+"px";var o=e.scope.$r,i=e.scope.$c;p(r,"translateX("+i*H.cell.width+"px) translateY("+o*H.cell.height+"px)")}else p(r,"translateX(-1000px) translateY(-1000px)")})}function g(){H.table.x=Math.floor(H.scroll.x/H.cell.width)*H.cell.width,H.table.y=Math.floor(H.scroll.y/H.cell.height)*H.cell.height,p(F,"translateX("+H.table.x+"px) translateY("+H.table.y+"px)"),b({scroll:H.scroll,grid:H.grid,rows:H.rows.has?H.rows:null,cols:H.cols.has?H.cols:null})}function p(t,e){t.style.WebkitTransform=t.style.MozTransform=t.style.OTransform=t.style.MsTransform=t.style.transform=e}function y(){H.rows.total=0,H.table.height=0,E?(H.rows.total=E.length,H.table.height=H.rows.total*H.cell.height,H.rows.has=!0):(H.table.height=H.grid.height,H.rows.has=!1),E&&E.length?r.addClass("vertical"):r.removeClass("vertical"),R.style.height=H.table.height+"px"}function v(){H.cols.total=0,H.table.width=0,z?(H.cols.total=z.length,H.table.width=H.cols.total*H.cell.width,H.cols.has=!1):(H.table.width=H.grid.width,H.cols.has=!1),z&&z.length?r.addClass("horizontal"):r.removeClass("horizontal"),R.style.width=H.table.width+"px"}function w(){E&&(H.rows.total=E.length,H.table.height=H.rows.total*H.cell.height),z&&(H.cols.total=z.length,H.table.width=H.cols.total*H.cell.width),H.scroll.x=Math.max(0,Math.min(H.table.width-H.grid.width,N.scrollLeft)),H.scroll.y=Math.max(0,Math.min(H.table.height-H.grid.height,N.scrollTop)),d()}function x(){H.grid.width=H.table.width=N.offsetWidth,H.grid.height=H.table.height=N.offsetHeight,d()}function b(t){H.info=JSON.stringify(t),L.innerHTML=H.info}function M(t){return U=c.getTouch(t),Y=N.scrollLeft,V=N.scrollTop,T(),!1}function C(t){return k=c.getTouch(t),X=U.difference(k),!D&&X.power()>25&&(D=!0,r.addClass("dragging")),D&&(N.scrollLeft=Y-X.x,N.scrollTop=V-X.y,w()),!1}function $(t){return D&&(D=!1,r.removeClass("dragging")),A(),!1}function T(){e.element(t).on("touchmove mousemove",C),e.element(t).on("touchend mouseup",$)}function A(){e.element(t).off("touchmove mousemove",C),e.element(t).off("touchend mouseup",$)}function S(){e.element(N).off("touchstart mousedown",M),e.element(N).off("scroll",w),e.element(t).off("resize",x)}var q;void 0!==o.templateRow&&(o.templateRow,o.templateRow=null),void 0!==o.templateCol&&(o.templateCol,o.templateCol=null),void 0!==o.templateCell&&(q=o.templateCell,o.templateCell=null);var E,z,O=r[0],N=O.querySelector(".ngrid-inner"),R=O.querySelector(".ngrid-spacer"),F=O.querySelector(".ngrid-table"),L=O.querySelector(".ngrid-info"),j=e.element(F),H=n.layout={grid:{width:0,height:0},table:{width:0,height:0,x:0,y:0},cell:{width:void 0!==o.width?parseInt(o.width):100,height:void 0!==o.height?parseInt(o.height):30},scroll:{x:0,y:0},rows:{},cols:{},visibles:[]};n.$watchCollection(o.ngridRows,function(t){E=t,y(),x()}),n.$watch(o.ngridCols,function(t){z=t,v(),x()}),n.$watch(o.ngrid,function(t){e.isObject(t)&&(e.extend(H,t),x())});var U,k,X,D,Y,V;n.$on("$destroy",function(){S(),A()}),function(){e.element(N).on("touchstart mousedown",M),e.element(N).on("scroll",w),e.element(t).on("resize",x)}()}}}]),n.filter("shortName",["$filter",function(t){function e(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}return function(t){if(!t)return"";t.indexOf(" .")===t.length-2&&(t=t.split(" .").join(""));var n=t.split(" "),r=n.shift();if(n.length){var o=n.join(" ");return r.substr(0,1).toUpperCase()+"."+e(o)}return r}}]),n.filter("customCurrency",["$filter",function(t){var e=t("currency");return function(t,n){return e(t*n.ratio,n.formatting)}}]),n.filter("customNumber",["$filter",function(t){var e=t("number");return function(t,n,r){return r=r||"",t?e(t,n)+r:"-"}}]),n.filter("customHours",[function(){return function(t){if(t){var e=Math.floor(t),n=Math.floor(60*(t-e)),r=e?e+" H":"";return r+=n?" "+n+" m":""}return"-"}}]),n.filter("customDate",["$filter",function(t){var e=t("date");return function(t,n,r){return t?e(t,n,r):"-"}}]),n.filter("customTime",["$filter",function(t){return function(t,e){return t?Utils.parseTime(t):e?e:"-"}}]),n.filter("customDigital",["$filter",function(t){return function(t,e){return t?Utils.parseHour(t):e?e:"-"}}]),n.filter("customString",["$filter",function(t){return function(t,e){return t?t:e?e:"-"}}]),n.filter("customEnum",function(){return function(t){return t+=1,t<10?"0"+t:t}}),n.factory("Md5",[function(){function t(t,e){var l=t[0],c=t[1],u=t[2],a=t[3];l=n(l,c,u,a,e[0],7,-680876936),a=n(a,l,c,u,e[1],12,-389564586),u=n(u,a,l,c,e[2],17,606105819),c=n(c,u,a,l,e[3],22,-1044525330),l=n(l,c,u,a,e[4],7,-176418897),a=n(a,l,c,u,e[5],12,1200080426),u=n(u,a,l,c,e[6],17,-1473231341),c=n(c,u,a,l,e[7],22,-45705983),l=n(l,c,u,a,e[8],7,1770035416),a=n(a,l,c,u,e[9],12,-1958414417),u=n(u,a,l,c,e[10],17,-42063),c=n(c,u,a,l,e[11],22,-1990404162),l=n(l,c,u,a,e[12],7,1804603682),a=n(a,l,c,u,e[13],12,-40341101),u=n(u,a,l,c,e[14],17,-1502002290),c=n(c,u,a,l,e[15],22,1236535329),l=r(l,c,u,a,e[1],5,-165796510),a=r(a,l,c,u,e[6],9,-1069501632),u=r(u,a,l,c,e[11],14,643717713),c=r(c,u,a,l,e[0],20,-373897302),l=r(l,c,u,a,e[5],5,-701558691),a=r(a,l,c,u,e[10],9,38016083),u=r(u,a,l,c,e[15],14,-660478335),c=r(c,u,a,l,e[4],20,-405537848),l=r(l,c,u,a,e[9],5,568446438),a=r(a,l,c,u,e[14],9,-1019803690),u=r(u,a,l,c,e[3],14,-187363961),c=r(c,u,a,l,e[8],20,1163531501),l=r(l,c,u,a,e[13],5,-1444681467),a=r(a,l,c,u,e[2],9,-51403784),u=r(u,a,l,c,e[7],14,1735328473),c=r(c,u,a,l,e[12],20,-1926607734),l=o(l,c,u,a,e[5],4,-378558),a=o(a,l,c,u,e[8],11,-2022574463),u=o(u,a,l,c,e[11],16,1839030562),c=o(c,u,a,l,e[14],23,-35309556),l=o(l,c,u,a,e[1],4,-1530992060),a=o(a,l,c,u,e[4],11,1272893353),u=o(u,a,l,c,e[7],16,-155497632),c=o(c,u,a,l,e[10],23,-1094730640),l=o(l,c,u,a,e[13],4,681279174),a=o(a,l,c,u,e[0],11,-358537222),u=o(u,a,l,c,e[3],16,-722521979),c=o(c,u,a,l,e[6],23,76029189),l=o(l,c,u,a,e[9],4,-640364487),a=o(a,l,c,u,e[12],11,-421815835),u=o(u,a,l,c,e[15],16,530742520),c=o(c,u,a,l,e[2],23,-995338651),l=i(l,c,u,a,e[0],6,-198630844),a=i(a,l,c,u,e[7],10,1126891415),u=i(u,a,l,c,e[14],15,-1416354905),c=i(c,u,a,l,e[5],21,-57434055),l=i(l,c,u,a,e[12],6,1700485571),a=i(a,l,c,u,e[3],10,-1894986606),u=i(u,a,l,c,e[10],15,-1051523),c=i(c,u,a,l,e[1],21,-2054922799),l=i(l,c,u,a,e[8],6,1873313359),a=i(a,l,c,u,e[15],10,-30611744),u=i(u,a,l,c,e[6],15,-1560198380),c=i(c,u,a,l,e[13],21,1309151649),l=i(l,c,u,a,e[4],6,-145523070),a=i(a,l,c,u,e[11],10,-1120210379),u=i(u,a,l,c,e[2],15,718787259),c=i(c,u,a,l,e[9],21,-343485551),t[0]=s(l,t[0]),t[1]=s(c,t[1]),t[2]=s(u,t[2]),t[3]=s(a,t[3])}function e(t,e,n,r,o,i){return e=s(s(e,t),s(r,i)),s(e<<o|e>>>32-o,n)}function n(t,n,r,o,i,l,c){return e(n&r|~n&o,t,n,i,l,c)}function r(t,n,r,o,i,l,c){return e(n&o|r&~o,t,n,i,l,c)}function o(t,n,r,o,i,l,c){return e(n^r^o,t,n,i,l,c)}function i(t,n,r,o,i,l,c){return e(r^(n|~o),t,n,i,l,c)}function l(e){var n,r=e.length,o=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=e.length;n+=64)t(o,c(e.substring(n-64,n)));e=e.substring(n-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)i[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(i[n>>2]|=128<<(n%4<<3),n>55)for(t(o,i),n=0;n<16;n++)i[n]=0;return i[14]=8*r,t(o,i),o}function c(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function u(t){for(var e="",n=0;n<4;n++)e+=h[t>>8*n+4&15]+h[t>>8*n&15];return e}function a(t){for(var e=0;e<t.length;e++)t[e]=u(t[e]);return t.join("")}function s(t,e){return t+e&4294967295}function f(){}var h="0123456789abcdef".split("");return f.encode=function(t){return a(l(t))},"5d41402abc4b2a76b9719d911017c592"!==f.encode("hello")&&(s=function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}),f}]),n.factory("Utils",["$compile","$controller","Vector","Md5",function(n,r,o,i){function l(t,e){var n=new o;if("touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"touchcancel"==t.type){var r=null,i=t.originalEvent?t.originalEvent:t,l=i.touches.length?i.touches:i.changedTouches;l&&l.length&&(r=l[0]),r&&(n.x=r.pageX,n.y=r.pageY)}else"click"!=t.type&&"mousedown"!=t.type&&"mouseup"!=t.type&&"mousemove"!=t.type&&"mouseover"!=t.type&&"mouseout"!=t.type&&"mouseenter"!=t.type&&"mouseleave"!=t.type||(n.x=t.pageX,n.y=t.pageY);return e&&(n.s=o.difference(e,n)),n.type=t.type,n}function c(t,e){var n=t[0].getBoundingClientRect(),r=new o(n.left,n.top);return o.difference(r,e)}function u(t,e){var n,r;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(t){return"function"==typeof document.body[t]&&(n=t,!0)}),t[n](e))return t;for(;null!==t;){if(null!==(r=t.parentElement)&&r[n](e))return r;t=r}return null}function a(t,e){var n;if(t===e)return t;for(;null!==t;){if(null!==(n=t.parentElement)&&n===e)return n;t=n}return null}function s(t,e,n){var r,o,i,l=null,c=0;n||(n={});var u=function(){c=n.leading===!1?0:w(),l=null,i=t.apply(r,o),l||(r=o=null)};return function(){var a=w();c||n.leading!==!1||(c=a);var s=e-(a-c);return r=this,o=arguments,s<=0||s>e?(l&&(clearTimeout(l),l=null),c=a,i=t.apply(r,o),l||(r=o=null)):l||n.trailing===!1||(l=setTimeout(u,s)),i}}function f(t,n){var r=null;return t&&e.forEach(t,function(t){var o=!0;e.forEach(n,function(e,n){o=o&&t[n]===e}),o&&(r=t)}),r}function h(t,o,i,l){o.html(i);var c=n(o.contents());if(l.controller){var u=t.$new();e.extend(u,l);var a=r(l.controller,{$scope:u});l.controllerAs&&(t[l.controllerAs]=a),o.data("$ngControllerController",a),o.children().data("$ngControllerController",a),t=u}c(t)}function d(){}function m(t){return function(e,n){return e[t]<n[t]?1:e[t]>n[t]?-1:0}}function g(t,n,r){t=t||"",n=n||"";var o=t.split(",");if(o.length>1){var i=o.shift();return e.forEach(o,function(t,e){i=r?i.split("{"+e+"}").join("' + "+n+t+" + '"):i.split("{"+e+"}").join(n+t)}),r?"'"+i+"'":i}return n+t}function p(t,e){return t[e]}function y(t,e,n){return"string"==typeof e?y(t,e.split("."),n):1==e.length&&void 0!==n?t[e[0]]=n:0==e.length?t:y(t[e[0]],e.slice(1),n)}function v(t,e,n){return"string"==typeof e?v(t,e.split("."),n):1==e.length&&void 0!==n?t[e[0]]+=n:0==e.length?t:v(t[e[0]],e.slice(1),n)}!function(){for(var e=0,n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r)t.requestAnimationFrame=t[n[r]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[r]+"CancelAnimationFrame"]||t[n[r]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(n,r){var o=(new Date).getTime(),i=Math.max(0,16-(o-e)),l=t.setTimeout(function(){n(o+i)},i);return e=o+i,l}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(){Array.prototype.reduce||Object.defineProperty(Array.prototype,"reduce",{value:function(t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var e,n=Object(this),r=n.length>>>0,o=0;if(2==arguments.length)e=arguments[1];else{for(;o<r&&!(o in n);)o++;if(o>=r)throw new TypeError("Reduce of empty array with no initial value");e=n[o++]}for(;o<r;)o in n&&(e=t(e,n[o],o,n)),o++;return e}})}();var w=Date.now||function(){return(new Date).getTime()},x=t.navigator.userAgent.toLowerCase(),b=x.indexOf("safari")!==-1&&x.indexOf("chrome")===-1,M=x.indexOf("trident")!==-1||x.indexOf("edge")!==-1||x.indexOf("msie")!==-1,C=!b&&!M&&x.indexOf("chrome")!==-1,$=x.indexOf("mobile")!==-1;return d.reverseSortOn=m,d.getTouch=l,d.getRelativeTouch=c,d.getClosest=u,d.getClosestElement=a,d.throttle=s,d.where=f,d.format=g,d.compileController=h,d.reducer=p,d.reducerSetter=y,d.reducerAdder=v,d.toMd5=function(t){return i.encode(t)},d.ua={safari:b,msie:M,chrome:C,mobile:$},e.forEach(d.ua,function(t,n){t&&e.element(document.getElementsByTagName("body")).addClass(n)}),d}]),n.factory("Vector",function(){function t(t,e){this.x=t||0,this.y=e||0}return t.make=function(e,n){return new t(n.x-e.x,n.y-e.y)},t.size=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.normalize=function(e){var n=t.size(e);return e.x/=n,e.y/=n,e},t.incidence=function(t,e){return Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)},t.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t.cross=function(t,e){return t.x*e.y-t.y*e.x},t.difference=function(e,n){return new t(n.x-e.x,n.y-e.y)},t.power=function(t,e){return(Math.abs(e.x-t.x)+Math.abs(e.y-t.y))/2},t.prototype={size:function(){return t.size(this)},normalize:function(){return t.normalize(this)},incidence:function(e){return t.incidence(this,e)},cross:function(e){return t.cross(this,e)},distance:function(e){return t.distance(this,e)},difference:function(e){return t.difference(this,e)},power:function(){return(Math.abs(this.x)+Math.abs(this.y))/2},towards:function(t,e){return e=e||.125,this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},add:function(t){return this.x+=t.x,this.y+=t.y,this},friction:function(t){return this.x*=t,this.y*=t,this},copy:function(e){return new t(this.x,this.y)},toString:function(){return"{"+this.x+","+this.y+"}"}},t}),function(t){try{t=e.module("ngrid")}catch(n){t=e.module("ngrid",[])}t.run(["$templateCache",function(t){t.put("ngrid/partials/ngrid",'<div class="ngrid">\n    <div class="ngrid-inner">\n        <div class="ngrid-spacer"></div>\n        <div class="ngrid-table" ng-transclude></div>\n    </div>\n    <div class="ngrid-info"></div>\n</div>')}])}()}(window,window.angular);
//# sourceMappingURL=ngrid.min.js.map
