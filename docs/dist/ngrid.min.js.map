{"version":3,"sources":["docs/dist/ngrid.js"],"names":["window","angular","module","console","log","constant","SUM","MIN","MAX","AVG","directive","$window","$templateCache","$templateRequest","$interpolate","$compile","$timeout","Utils","trimWhiteSpace","string","replace","priority","restrict","templateUrl","transclude","controller","$transclude","$attrs","clone","scope","htmls","Array","prototype","slice","call","filter","native","nodeType","test","nodeValue","map","outerHTML","join","element","nativeRow","querySelector","parentNode","removeChild","templateRow","nativeCol","templateCol","nativeCell","templateCell","link","attributes","model","updateRows","from","to","count","total","layout","rows","dirty","Math","ceil","grid","height","cell","floor","scroll","y","max","min","length","updateCols","cols","width","x","drawCells","visibles","template","targetElement","tableElement","forEach","i","$scope","getCell","$$phase","$digest","compiled","cloned","$element","append","push","r","c","$row","$col","$index","$new","$i","$r","$c","row","col","update","render","redraw","nativeElement","style","table","transform","nativeTable","has","node","value","WebkitTransform","MozTransform","OTransform","MsTransform","onRows","addClass","removeClass","nativeSpacer","onCols","onScroll","nativeInner","scrollLeft","scrollTop","onResize","offsetWidth","offsetHeight","obj","info","JSON","stringify","nativeInfo","innerHTML","onStart","e","down","getTouch","sx","sy","addDragListeners","onMove","move","diff","difference","dragging","power","onEnd","removeDragListeners","on","off","removeListeners","undefined","parseInt","$watchCollection","ngridRows","$watch","ngridCols","ngrid","isObject","extend","$on","$filter","toTitleCase","str","txt","charAt","toUpperCase","substr","toLowerCase","indexOf","split","splitted","firstName","shift","lastName","legacyFilter","cost","currency","ratio","formatting","precision","unit","hours","minutes","label","format","timezone","placeholder","parseTime","parseHour","val","factory","cycle","k","a","b","d","ff","gg","hh","ii","add32","cmn","q","s","t","md51","n","state","md5blk","substring","tail","charCodeAt","md5blks","rhex","j","hex_chr","hex","Md5","encode","lsw","$controller","Vector","previous","type","touch","event","originalEvent","touches","changedTouches","pageX","pageY","getRelativeTouch","point","rect","getBoundingClientRect","left","top","getClosest","el","selector","matchesFn","parent","some","fn","document","body","parentElement","getClosestElement","target","throttle","func","wait","options","context","args","result","timeout","later","leading","getNow","apply","now","remaining","this","arguments","clearTimeout","trailing","setTimeout","where","array","query","found","item","key","compileController","html","data","contents","controllerAs","children","reverseSortOn","prepend","expression","formatted","index","reducer","o","reducerSetter","reducerAdder","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","id","reduce","Object","defineProperty","TypeError","len","ua","navigator","userAgent","safari","msie","chrome","mobile","toMd5","getElementsByTagName","make","size","sqrt","normalize","l","incidence","atan2","distance","cross","abs","towards","friction","add","copy","toString","app","err","run","put"],"mappings":"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","file":"ngrid.min.js","sourcesContent":["\n(function(window, angular) {'use strict';\n\n/* global angular */\r\n\r\nvar module = angular.module('ngrid', ['ng', 'ngSanitize']);\r\n\n/* global angular, module */\r\n\r\nwindow.console ? null : window.console = { log: function () { } };\r\n\r\nmodule.constant('ngridModes', {\r\n    SUM: 1,\r\n    MIN: 2,\r\n    MAX: 3,\r\n    AVG: 4,\r\n});\r\n\n/* global angular, module */\r\n\n/* global angular, module */\r\n\r\nmodule.directive('ngrid', ['$window', '$templateCache', '$templateRequest', '$interpolate', '$compile', '$timeout', 'Utils', function($window, $templateCache, $templateRequest, $interpolate, $compile, $timeout, Utils) {\r\n    // polyfill for trim >= IE9\r\n    function trimWhiteSpace(string) {\r\n        return string.replace(/^\\s+|\\s+$/gm, '');\r\n    }\r\n    return {\r\n        priority: 1, \r\n        restrict: 'A',\r\n        replace: true,\r\n        /*\r\n        // with scope attributes watch won't work anymore\r\n        scope: {\r\n            options: '=?ngrid',\r\n        },\r\n        */\r\n        templateUrl: 'ngrid/partials/ngrid',\r\n        transclude: true,\r\n        controller: ['$transclude', '$attrs', function($transclude, $attrs) {\r\n            $transclude(function(clone, scope) {\r\n                var htmls = Array.prototype.slice.call(clone).filter(function(native) {\r\n                    // trim whitespaces\r\n                    return (native.nodeType !== 3 || /\\S/.test(native.nodeValue));\r\n                }).map(function(native) {\r\n                    var html = native.outerHTML;\r\n                    /*\r\n                    if (native && native.parentNode) {\r\n                        native.parentNode.removeChild(native);\r\n                    }\r\n                    */\r\n                    return html;\r\n                });\r\n                htmls = htmls.join('');\r\n                var element = angular.element('<div>' + htmls + '</div>');\r\n                var native = element[0];\r\n                var nativeRow = native.querySelector('.ngrid-row');\r\n                if (nativeRow && nativeRow.parentNode) {\r\n                    nativeRow.parentNode.removeChild(nativeRow);\r\n                    $attrs.templateRow = trimWhiteSpace(nativeRow.outerHTML);\r\n                    // console.log($attrs.templateRow);\r\n                }\r\n                var nativeCol = native.querySelector('.ngrid-col');\r\n                if (nativeCol && nativeCol.parentNode) {\r\n                    nativeCol.parentNode.removeChild(nativeCol);\r\n                    $attrs.templateCol = trimWhiteSpace(nativeCol.outerHTML);\r\n                    // console.log($attrs.templateCol);\r\n                }\r\n                var nativeCell = native.querySelector('.ngrid-cell');\r\n                if (nativeCell && nativeCell.parentNode) {\r\n                    nativeCell.parentNode.removeChild(nativeCell);\r\n                    $attrs.templateCell = trimWhiteSpace(nativeCell.outerHTML);\r\n                    // console.log($attrs.templateCell);\r\n                }\r\n            });\r\n        }],\r\n        link: function(scope, element, attributes, model, transclude) {\r\n            // console.log(attributes);\r\n            var templateRow, templateCol, templateCell;\r\n            if (attributes.templateRow !== undefined) {\r\n                templateRow = attributes.templateRow;\r\n                attributes.templateRow = null;\r\n            }\r\n            if (attributes.templateCol !== undefined) {\r\n                templateCol = attributes.templateCol;\r\n                attributes.templateCol = null;\r\n            }\r\n            if (attributes.templateCell !== undefined) {\r\n                templateCell = attributes.templateCell;\r\n                attributes.templateCell = null;\r\n            }\r\n            var native = element[0],\r\n                nativeInner = native.querySelector('.ngrid-inner'),\r\n                nativeSpacer = native.querySelector('.ngrid-spacer'),\r\n                nativeTable = native.querySelector('.ngrid-table'),\r\n                nativeInfo = native.querySelector('.ngrid-info'),\r\n                tableElement = angular.element(nativeTable),\r\n                layout = scope.layout = {\r\n                    grid: {\r\n                        width: 0,\r\n                        height: 0,\r\n                    },\r\n                    table: {\r\n                        width: 0,\r\n                        height: 0,\r\n                        x: 0,\r\n                        y: 0,\r\n                    },\r\n                    cell: {\r\n                        width: attributes.width !== undefined ? parseInt(attributes.width) : 100,\r\n                        height: attributes.height !== undefined ? parseInt(attributes.height) : 30,\r\n                    },\r\n                    scroll: {\r\n                        x: 0,\r\n                        y: 0,\r\n                    },\r\n                    rows: {},\r\n                    cols: {},\r\n                    visibles: [],\r\n                },\r\n                rows, cols;\r\n          \r\n            \r\n            function updateRows() {\r\n                var total = layout.rows.total,\r\n                    dirty = false, from, to, count;\r\n                if (total > 0) {\r\n                    count = Math.ceil(layout.grid.height / layout.cell.height) + 1;\r\n                    from = Math.floor(layout.scroll.y / layout.cell.height);\r\n                    from = Math.max(0, Math.min(total - count + 1, from));\r\n                    to = Math.min(rows.length, from + count);\r\n                } else {\r\n                    count = to = 1;\r\n                    from = 0;\r\n                }\r\n                dirty = (from !== layout.rows.from) || (to !== layout.rows.to);\r\n                layout.rows.dirty = dirty;\r\n                layout.rows.from = from;\r\n                layout.rows.to = to;\r\n                layout.rows.count = count;\r\n            }\r\n\r\n            function updateCols() {\r\n                var total = layout.cols.total,\r\n                    dirty = false, from, to, count;\r\n                if (total > 0) {\r\n                    count = Math.ceil(layout.grid.width / layout.cell.width) + 1;\r\n                    from = Math.floor(layout.scroll.x / layout.cell.width);\r\n                    from = Math.max(0, Math.min(total - count + 1, from));\r\n                    to = Math.min(cols.length, from + count);\r\n                } else {\r\n                    count = to = 1;\r\n                    from = 0;\r\n                }\r\n                dirty = (from !== layout.cols.from) || (to !== layout.cols.to);\r\n                layout.cols.dirty = dirty;\r\n                layout.cols.from = from;\r\n                layout.cols.to = to;\r\n                layout.cols.count = count;\r\n            }\r\n\r\n            /*\r\n            function drawRows() {\r\n                // console.log('drawRows');\r\n                var dirty = layout.rows.dirty,\r\n                    from = layout.rows.from,\r\n                    count = layout.rows.count,\r\n                    visibles = layout.visibles,\r\n                    template = templateCell,\r\n                    targetElement = tableElement;\r\n                if (dirty) {\r\n                    angular.forEach(visibles, function(item, i) {\r\n                        if (i < count) {\r\n                            var $scope = getCell(i);\r\n                            if (!$scope.$$phase) {\r\n                                $scope.$digest();\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                while (visibles.length < count) {\r\n                    var $scope = getCell(visibles.length);\r\n                    var compiled = $compile(template)($scope, function(cloned) {\r\n                        compiled = cloned;\r\n                    });\r\n                    var $element = angular.element(compiled);\r\n                    var nativeElement = $element[0];\r\n                    nativeElement.style.width = '100%';\r\n                    nativeElement.style.height = layout.cell.height + 'px';\r\n                    targetElement.append($element);\r\n                    visibles.push({\r\n                        element: $element,\r\n                        scope: $scope,\r\n                    });\r\n                }\r\n            }\r\n\r\n            function drawCols() {\r\n                // console.log('drawCols');\r\n                var dirty = layout.cols.dirty,\r\n                    from = layout.cols.from,\r\n                    count = layout.cols.count,\r\n                    visibles = layout.visibles,\r\n                    template = templateCell,\r\n                    targetElement = tableElement;\r\n                if (dirty) {\r\n                    angular.forEach(visibles, function(item, i) {\r\n                        if (i < count) {\r\n                            var $scope = getCell(i);\r\n                            if (!$scope.$$phase) {\r\n                                $scope.$digest();\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                while (visibles.length < count) {\r\n                    var $scope = getCell(visibles.length);\r\n                    var compiled = $compile(template)($scope, function(cloned) {\r\n                        compiled = cloned;\r\n                    });\r\n                    var $element = angular.element(compiled);\r\n                    var nativeElement = $element[0];\r\n                    nativeElement.style.width = '100%';\r\n                    nativeElement.style.height = layout.cell.height + 'px';\r\n                    targetElement.append($element);\r\n                    visibles.push({\r\n                        element: $element,\r\n                        scope: $scope,\r\n                    });\r\n                }\r\n            }\r\n            */\r\n\r\n            function drawCells() {\r\n                // console.log('drawCells');\r\n                var count = layout.rows.count * layout.cols.count,\r\n                    visibles = layout.visibles,\r\n                    template = templateCell,\r\n                    targetElement = tableElement;\r\n                if (layout.rows.dirty || layout.cols.dirty) {\r\n                    angular.forEach(visibles, function(cell, i) {\r\n                        if (i < count) {\r\n                            var $scope = getCell(i);\r\n                            if (!$scope.$$phase) {\r\n                                $scope.$digest();\r\n                            }\r\n                            /*\r\n                            var r = Math.floor(i / layout.cols.count);\r\n                            var c = (i % layout.cols.count);\r\n                            var $row = layout.rows.from + r;\r\n                            var $col = layout.cols.from + c;\r\n                            var $index = $row * layout.cols.total + $col;\r\n                            cell.scope.$index = $index;\r\n                            cell.scope.$row = $row;\r\n                            cell.scope.$col = $col;\r\n                            cell.scope.row = rows[$row];\r\n                            cell.scope.col = cols[$col];\r\n                            if (!cell.scope.$$phase) {\r\n                                cell.scope.$digest();\r\n                            }\r\n                            */\r\n                        }\r\n                    });\r\n                    // console.log('dirty', Math.min(visibles.length, count));\r\n                }\r\n                /*\r\n                if (visibles.length < count) {\r\n                    console.log('compile');\r\n                }\r\n                */\r\n                while (visibles.length < count) {\r\n                    var $scope = getCell(visibles.length);\r\n                    /*\r\n                    var i = visibles.length;\r\n                    var r = Math.floor(i / layout.cols.count);\r\n                    var c = (i % layout.cols.count);\r\n                    var $row = layout.rows.from + r;\r\n                    var $col = layout.cols.from + c;\r\n                    var $index = $row * layout.cols.total + $col;\r\n                    var $scope = scope.$new();\r\n                    $scope.$index = $index;\r\n                    $scope.$row = $row;\r\n                    $scope.$col = $col;\r\n                    $scope.row = rows[$row];\r\n                    $scope.col = cols[$col];\r\n                    */\r\n                    /*\r\n                    var $element = angular.element(template);\r\n                    $compile($element)($scope);\r\n                    */\r\n                    /*\r\n                    var compiled = $interpolate(template, false, null, true)($scope);\r\n                    */\r\n                    /**** COMPILE ****/\r\n                    var compiled = $compile(template)($scope, function(cloned) {\r\n                        compiled = cloned;\r\n                        // console.log(cloned[0].outerHTML);\r\n                    });\r\n                    /**** COMPILE ****/\r\n                    var $element = angular.element(compiled);\r\n                    targetElement.append($element);\r\n                    visibles.push({\r\n                        element: $element,\r\n                        scope: $scope,\r\n                    });\r\n                }\r\n            }\r\n\r\n            function getCell(i) {\r\n                var r = Math.floor(i / layout.cols.count);\r\n                var c = (i % layout.cols.count);\r\n                var $row = layout.rows.from + r;\r\n                var $col = layout.cols.from + c;\r\n                var $index = $row * layout.cols.total + $col;\r\n                var $scope = layout.visibles.length > i ? layout.visibles[i].scope : scope.$new();\r\n                $scope.$i = i;\r\n                $scope.$r = r;\r\n                $scope.$c = c;\r\n                $scope.$index = $index;\r\n                $scope.$row = $row;\r\n                $scope.$col = $col;\r\n                $scope.row = rows ? rows[$row] : null;\r\n                $scope.col = cols ? cols[$col] : null;\r\n                return $scope;\r\n            }\r\n\r\n            // var updating;\r\n            function update() {\r\n                // console.log('update');\r\n                // if (!updating) {\r\n                    // updating = true;\r\n                    updateRows();\r\n                    updateCols();\r\n                    drawCells();\r\n                    /*\r\n                    if (layout.rows.has && layout.cols.has) {\r\n                        drawCells();\r\n                    } else if (layout.rows.has) {\r\n                        drawRows();\r\n                    } else if (layout.cols.has) {\r\n                        drawCols();\r\n                    }\r\n                    */\r\n                    /*\r\n                    if (layout.rows.count > 1 && layout.cols.has > 1) {\r\n                        if (rows && cols) {\r\n                            drawCells();\r\n                        }\r\n                    } else if (layout.rows.has > 1) {\r\n                        if (rows) {\r\n                            drawRows();\r\n                        }\r\n                    } else if (layout.cols.has > 1) {\r\n                        if (cols) {\r\n                            drawCols();\r\n                        }\r\n                    }\r\n                    */\r\n                    render();\r\n                    redraw();\r\n                    // updating = false;\r\n                    /*\r\n                    setTimeout(function() {            \r\n                        updating = false;\r\n                    });\r\n                    */\r\n                // }\r\n            }\r\n\r\n            function render() {\r\n                var count = layout.rows.count * layout.cols.count,\r\n                    visibles = layout.visibles;\r\n                var USE_TRANSFORM = true;\r\n                angular.forEach(visibles, function(cell, i) {\r\n                    var nativeElement = cell.element[0];\r\n                    if (i < count) {\r\n                        nativeElement.style.width = (cols ? layout.cell.width : layout.table.width) + 'px';\r\n                        nativeElement.style.height = (rows ? layout.cell.height : layout.table.height) + 'px';\r\n                        var r = cell.scope.$r;\r\n                        var c = cell.scope.$c;\r\n                        if (USE_TRANSFORM) {\r\n                            transform(nativeElement, 'translateX(' + (c * layout.cell.width) + 'px) translateY(' + (r * layout.cell.height) + 'px)');\r\n                        } else {\r\n                            nativeElement.style.left = (c * layout.cell.width) + 'px';\r\n                            nativeElement.style.top = (r * layout.cell.height) + 'px';\r\n                            nativeElement.style.visibility = 'visible';\r\n                        }\r\n                    } else {\r\n                        if (USE_TRANSFORM) {\r\n                            transform(nativeElement, 'translateX(-1000px) translateY(-1000px)');\r\n                        } else {\r\n                            nativeElement.style.left = '0px';\r\n                            nativeElement.style.top = '0px';\r\n                            nativeElement.style.visibility = 'hidden';\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            function redraw() {\r\n                // var fragment = document.createDocumentFragment();          \r\n                // var row = document.createElement('div');\r\n                // fragment.appendChild(row);\r\n                // nativeTable.appendChild(fragment);\r\n                layout.table.x = Math.floor(layout.scroll.x / layout.cell.width) * layout.cell.width;\r\n                layout.table.y = Math.floor(layout.scroll.y / layout.cell.height) * layout.cell.height;\r\n                transform(nativeTable, 'translateX(' + layout.table.x + 'px) translateY(' + layout.table.y + 'px)');\r\n                log({\r\n                    scroll: layout.scroll,\r\n                    grid: layout.grid,\r\n                    rows: layout.rows.has ? layout.rows : null,\r\n                    cols: layout.cols.has ? layout.cols : null,\r\n                });\r\n            }\r\n\r\n            function transform(node, value) {\r\n                node.style.WebkitTransform =\r\n                    node.style.MozTransform =\r\n                    node.style.OTransform =\r\n                    node.style.MsTransform =\r\n                    node.style.transform =\r\n                    value;\r\n            }\r\n\r\n            function onRows() {\r\n                layout.rows.total = 0;\r\n                layout.table.height = 0;\r\n                if (rows) {\r\n                    layout.rows.total = rows.length;\r\n                    layout.table.height = layout.rows.total * layout.cell.height;\r\n                    layout.rows.has = true;\r\n                } else {\r\n                    layout.table.height = layout.grid.height;\r\n                    layout.rows.has = false;\r\n                }\r\n                if (rows && rows.length) {\r\n                    element.addClass('vertical');\r\n                } else {\r\n                    element.removeClass('vertical');\r\n                }\r\n                nativeSpacer.style.height = layout.table.height + 'px';\r\n            }\r\n\r\n            function onCols() {\r\n                layout.cols.total = 0;\r\n                layout.table.width = 0;\r\n                if (cols) {\r\n                    layout.cols.total = cols.length;\r\n                    layout.table.width = layout.cols.total * layout.cell.width;\r\n                    layout.cols.has = false;\r\n                } else {\r\n                    layout.table.width = layout.grid.width;\r\n                    layout.cols.has = false;\r\n                }\r\n                if (cols && cols.length) {\r\n                    element.addClass('horizontal');\r\n                } else {\r\n                    element.removeClass('horizontal');\r\n                }\r\n                nativeSpacer.style.width = layout.table.width + 'px';\r\n            }\r\n\r\n            function onScroll() {\r\n                if (rows) {\r\n                    layout.rows.total = rows.length;\r\n                    layout.table.height = layout.rows.total * layout.cell.height;\r\n                }\r\n                if (cols) {\r\n                    layout.cols.total = cols.length;\r\n                    layout.table.width = layout.cols.total * layout.cell.width;\r\n                }\r\n                layout.scroll.x = Math.max(0, Math.min((layout.table.width - layout.grid.width), nativeInner.scrollLeft));\r\n                layout.scroll.y = Math.max(0, Math.min((layout.table.height - layout.grid.height), nativeInner.scrollTop));\r\n                // console.log(layout.scroll.x, layout.scroll.y, layout.table.width, layout.grid.width);\r\n                update();\r\n            }\r\n\r\n            // resize fires on window resize and on scope update      \r\n            function onResize() {\r\n                layout.grid.width = layout.table.width = nativeInner.offsetWidth;\r\n                layout.grid.height = layout.table.height = nativeInner.offsetHeight;\r\n                update();\r\n            }\r\n\r\n            /*\r\n            scope.$watch(function() {\r\n                return nativeInner.offsetWidth;\r\n            }, function(nval, oval) {\r\n                if (nval !== oval) {\r\n                    onResize();\r\n                }\r\n            });\r\n            scope.$watch(function() {\r\n                return nativeInner.offsetHeight;\r\n            }, function(nval, oval) {\r\n                if (nval !== oval) {\r\n                    onResize();\r\n                }\r\n            });\r\n            */\r\n\r\n            /*\r\n            if (layout.rows.has) {\r\n                element.addClass('vertical');\r\n            }\r\n            if (layout.cols.has) {\r\n                element.addClass('horizontal');\r\n            }\r\n            */\r\n            /*\r\n            console.log('attributes', attributes);\r\n            attributes.$observe('ngridRows', function(value) {\r\n                console.log('ngridRows', value);\r\n            });\r\n            */\r\n            scope.$watchCollection(attributes.ngridRows, function(value) {\r\n                // console.log('ngrid.$watchCollection.ngridRows');\r\n                rows = value;\r\n                onRows();\r\n                onResize();\r\n            });\r\n            scope.$watch(attributes.ngridCols, function(value) {\r\n                // console.log('ngrid.$watchCollection.ngridCols');\r\n                cols = value;\r\n                onCols();\r\n                onResize();\r\n            });\r\n            scope.$watch(attributes.ngrid, function(value) {\r\n                // console.log('ngrid.$watchCollection.ngrid');\r\n                if (angular.isObject(value)) {\r\n                    // ok but add a schema (keys)\r\n                    angular.extend(layout, value);\r\n                    onResize();\r\n                }\r\n            });\r\n            /*\r\n            if (angular.isObject(scope.options)) {\r\n                layout = angular.extend(scope.options, layout);\r\n            }\r\n            */\r\n            /*\r\n            scope.$watch(function(scope) {\r\n                // watch the 'compile' expression for changes\r\n                return scope.$eval(attrs.compile);\r\n            }, function(value) {\r\n                // when the 'compile' expression changes\r\n                // assign it into the current DOM\r\n                element.html(value);\r\n                // compile the new DOM and link it to the current\r\n                // scope.\r\n                // NOTE: we only compile .childNodes so that\r\n                // we don't get into infinite loop compiling ourselves\r\n                $compile(element.contents())(scope);\r\n            });\r\n            */\r\n\r\n            function log(obj) {\r\n                layout.info = JSON.stringify(obj);\r\n                nativeInfo.innerHTML = layout.info;\r\n            }\r\n\r\n            var down, move, diff, dragging, sx, sy;\r\n\r\n            function onStart(e) {\r\n                down = Utils.getTouch(e);\r\n                sx = nativeInner.scrollLeft;\r\n                sy = nativeInner.scrollTop;\r\n                addDragListeners();\r\n                return false;\r\n            }\r\n\r\n            function onMove(e) {\r\n                move = Utils.getTouch(e);\r\n                diff = down.difference(move);\r\n                if (!dragging && diff.power() > 25) {\r\n                    dragging = true;\r\n                    element.addClass('dragging');\r\n                }\r\n                if (dragging) {\r\n                    /*\r\n                    style.transform = 'translateX(' + diff.x + 'px) translateY(' + diff.y + 'px)';\r\n                    style.set(target);\r\n                    elementRect.set(nativeElement).offset(diff);\r\n                    */\r\n                    nativeInner.scrollLeft = sx - diff.x;\r\n                    nativeInner.scrollTop = sy - diff.y;\r\n                    onScroll();\r\n                }\r\n                return false;\r\n            }\r\n\r\n            function onEnd(e) {\r\n                if (dragging) {\r\n                    dragging = false;\r\n                    element.removeClass('dragging');\r\n                    /*\r\n                    style.transform = 'none';\r\n                    style.set(target);\r\n                    */\r\n                }\r\n                removeDragListeners();\r\n                return false;\r\n            }\r\n\r\n            function addDragListeners() {\r\n                angular.element($window).on('touchmove mousemove', onMove);\r\n                angular.element($window).on('touchend mouseup', onEnd);\r\n            };\r\n\r\n            function removeDragListeners() {\r\n                angular.element($window).off('touchmove mousemove', onMove);\r\n                angular.element($window).off('touchend mouseup', onEnd);\r\n            };\r\n\r\n            function addListeners() {\r\n                angular.element(nativeInner).on('touchstart mousedown', onStart);\r\n                angular.element(nativeInner).on('scroll', onScroll);\r\n                angular.element($window).on('resize', onResize);\r\n            };\r\n\r\n            function removeListeners() {\r\n                angular.element(nativeInner).off('touchstart mousedown', onStart);\r\n                angular.element(nativeInner).off('scroll', onScroll);\r\n                angular.element($window).off('resize', onResize);\r\n            };\r\n            scope.$on('$destroy', function() {\r\n                removeListeners();\r\n                removeDragListeners();\r\n            });\r\n            addListeners();\r\n        }\r\n    }\r\n}]);\n/* global angular, module */\r\n\r\nmodule.filter('shortName', ['$filter', function ($filter) {\r\n    function toTitleCase(str) {\r\n        return str.replace(/\\w\\S*/g, function (txt) { return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase(); });\r\n    }\r\n    return function (value) {\r\n        if (!value) {\r\n            return '';\r\n        }\r\n        if (value.indexOf(' .') === value.length - 2) {\r\n            value = value.split(' .').join('');\r\n        }\r\n        /*\r\n        var splitted;\r\n        if (value.indexOf('.') !== -1) {\r\n            splitted = value.split('.');\r\n        } else {\r\n            splitted = value.split(' ');\r\n        }\r\n        */\r\n        var splitted = value.split(' ');\r\n        var firstName = splitted.shift();\r\n        if (splitted.length) {\r\n            var lastName = splitted.join(' ');\r\n            return firstName.substr(0, 1).toUpperCase() + '.' + toTitleCase(lastName);\r\n        } else {\r\n            return firstName;\r\n        }\r\n    }\r\n}]);\r\n\r\nmodule.filter('customCurrency', ['$filter', function ($filter) {\r\n    var legacyFilter = $filter('currency');\r\n    return function (cost, currency) {\r\n        return legacyFilter(cost * currency.ratio, currency.formatting);\r\n    }\r\n}]);\r\n\r\nmodule.filter('customNumber', ['$filter', function ($filter) {\r\n    var filter = $filter('number');\r\n    return function (value, precision, unit) {\r\n        unit = unit || '';\r\n        return (value ? filter(value, precision) + unit : '-');\r\n    }\r\n}]);\r\n\r\nmodule.filter('customHours', [function () {\r\n    return function (value) {\r\n        if (value) {\r\n            var hours = Math.floor(value);\r\n            var minutes = Math.floor((value - hours) * 60);\r\n            var label = hours ? hours + ' H' : '';\r\n            label += minutes ? ' ' + minutes + ' m' : '';\r\n            return label;\r\n        } else {\r\n            return '-';\r\n        }\r\n    }\r\n}]);\r\n\r\nmodule.filter('customDate', ['$filter', function ($filter) {\r\n    var filter = $filter('date');\r\n    return function (value, format, timezone) {\r\n        return value ? filter(value, format, timezone) : '-';\r\n    }\r\n}]);\r\n\r\nmodule.filter('customTime', ['$filter', function ($filter) {\r\n    return function (value, placeholder) {\r\n        if (value) {\r\n            return Utils.parseTime(value);\r\n        } else {\r\n            return (placeholder ? placeholder : '-');\r\n        }\r\n    }\r\n}]);\r\n\r\nmodule.filter('customDigital', ['$filter', function ($filter) {\r\n    return function (value, placeholder) {\r\n        if (value) {\r\n            return Utils.parseHour(value);\r\n        } else {\r\n            return (placeholder ? placeholder : '-');\r\n        }\r\n    }\r\n}]);\r\n\r\nmodule.filter('customString', ['$filter', function ($filter) {\r\n    return function (value, placeholder) {\r\n        return value ? value : (placeholder ? placeholder : '-');\r\n    }\r\n}]);\r\n\r\nmodule.filter('customEnum', function () {\r\n    return function (val) {\r\n        val = val + 1;\r\n        return val < 10 ? '0' + val : val;\r\n    };\r\n});\r\n\n/* global angular, module */\r\n\r\nmodule.factory('Md5', [function () {\r\n\r\n    var hex_chr = '0123456789abcdef'.split('');\r\n\r\n    function cycle(x, k) {\r\n        var a = x[0], b = x[1], c = x[2], d = x[3];\r\n\r\n        a = ff(a, b, c, d, k[0], 7, -680876936);\r\n        d = ff(d, a, b, c, k[1], 12, -389564586);\r\n        c = ff(c, d, a, b, k[2], 17, 606105819);\r\n        b = ff(b, c, d, a, k[3], 22, -1044525330);\r\n        a = ff(a, b, c, d, k[4], 7, -176418897);\r\n        d = ff(d, a, b, c, k[5], 12, 1200080426);\r\n        c = ff(c, d, a, b, k[6], 17, -1473231341);\r\n        b = ff(b, c, d, a, k[7], 22, -45705983);\r\n        a = ff(a, b, c, d, k[8], 7, 1770035416);\r\n        d = ff(d, a, b, c, k[9], 12, -1958414417);\r\n        c = ff(c, d, a, b, k[10], 17, -42063);\r\n        b = ff(b, c, d, a, k[11], 22, -1990404162);\r\n        a = ff(a, b, c, d, k[12], 7, 1804603682);\r\n        d = ff(d, a, b, c, k[13], 12, -40341101);\r\n        c = ff(c, d, a, b, k[14], 17, -1502002290);\r\n        b = ff(b, c, d, a, k[15], 22, 1236535329);\r\n\r\n        a = gg(a, b, c, d, k[1], 5, -165796510);\r\n        d = gg(d, a, b, c, k[6], 9, -1069501632);\r\n        c = gg(c, d, a, b, k[11], 14, 643717713);\r\n        b = gg(b, c, d, a, k[0], 20, -373897302);\r\n        a = gg(a, b, c, d, k[5], 5, -701558691);\r\n        d = gg(d, a, b, c, k[10], 9, 38016083);\r\n        c = gg(c, d, a, b, k[15], 14, -660478335);\r\n        b = gg(b, c, d, a, k[4], 20, -405537848);\r\n        a = gg(a, b, c, d, k[9], 5, 568446438);\r\n        d = gg(d, a, b, c, k[14], 9, -1019803690);\r\n        c = gg(c, d, a, b, k[3], 14, -187363961);\r\n        b = gg(b, c, d, a, k[8], 20, 1163531501);\r\n        a = gg(a, b, c, d, k[13], 5, -1444681467);\r\n        d = gg(d, a, b, c, k[2], 9, -51403784);\r\n        c = gg(c, d, a, b, k[7], 14, 1735328473);\r\n        b = gg(b, c, d, a, k[12], 20, -1926607734);\r\n\r\n        a = hh(a, b, c, d, k[5], 4, -378558);\r\n        d = hh(d, a, b, c, k[8], 11, -2022574463);\r\n        c = hh(c, d, a, b, k[11], 16, 1839030562);\r\n        b = hh(b, c, d, a, k[14], 23, -35309556);\r\n        a = hh(a, b, c, d, k[1], 4, -1530992060);\r\n        d = hh(d, a, b, c, k[4], 11, 1272893353);\r\n        c = hh(c, d, a, b, k[7], 16, -155497632);\r\n        b = hh(b, c, d, a, k[10], 23, -1094730640);\r\n        a = hh(a, b, c, d, k[13], 4, 681279174);\r\n        d = hh(d, a, b, c, k[0], 11, -358537222);\r\n        c = hh(c, d, a, b, k[3], 16, -722521979);\r\n        b = hh(b, c, d, a, k[6], 23, 76029189);\r\n        a = hh(a, b, c, d, k[9], 4, -640364487);\r\n        d = hh(d, a, b, c, k[12], 11, -421815835);\r\n        c = hh(c, d, a, b, k[15], 16, 530742520);\r\n        b = hh(b, c, d, a, k[2], 23, -995338651);\r\n\r\n        a = ii(a, b, c, d, k[0], 6, -198630844);\r\n        d = ii(d, a, b, c, k[7], 10, 1126891415);\r\n        c = ii(c, d, a, b, k[14], 15, -1416354905);\r\n        b = ii(b, c, d, a, k[5], 21, -57434055);\r\n        a = ii(a, b, c, d, k[12], 6, 1700485571);\r\n        d = ii(d, a, b, c, k[3], 10, -1894986606);\r\n        c = ii(c, d, a, b, k[10], 15, -1051523);\r\n        b = ii(b, c, d, a, k[1], 21, -2054922799);\r\n        a = ii(a, b, c, d, k[8], 6, 1873313359);\r\n        d = ii(d, a, b, c, k[15], 10, -30611744);\r\n        c = ii(c, d, a, b, k[6], 15, -1560198380);\r\n        b = ii(b, c, d, a, k[13], 21, 1309151649);\r\n        a = ii(a, b, c, d, k[4], 6, -145523070);\r\n        d = ii(d, a, b, c, k[11], 10, -1120210379);\r\n        c = ii(c, d, a, b, k[2], 15, 718787259);\r\n        b = ii(b, c, d, a, k[9], 21, -343485551);\r\n\r\n        x[0] = add32(a, x[0]);\r\n        x[1] = add32(b, x[1]);\r\n        x[2] = add32(c, x[2]);\r\n        x[3] = add32(d, x[3]);\r\n\r\n    }\r\n\r\n    function cmn(q, a, b, x, s, t) {\r\n        a = add32(add32(a, q), add32(x, t));\r\n        return add32((a << s) | (a >>> (32 - s)), b);\r\n    }\r\n\r\n    function ff(a, b, c, d, x, s, t) {\r\n        return cmn((b & c) | ((~b) & d), a, b, x, s, t);\r\n    }\r\n\r\n    function gg(a, b, c, d, x, s, t) {\r\n        return cmn((b & d) | (c & (~d)), a, b, x, s, t);\r\n    }\r\n\r\n    function hh(a, b, c, d, x, s, t) {\r\n        return cmn(b ^ c ^ d, a, b, x, s, t);\r\n    }\r\n\r\n    function ii(a, b, c, d, x, s, t) {\r\n        return cmn(c ^ (b | (~d)), a, b, x, s, t);\r\n    }\r\n\r\n    function md51(s) {\r\n        var txt = '';\r\n        var n = s.length,\r\n        state = [1732584193, -271733879, -1732584194, 271733878], i;\r\n        for (i = 64; i <= s.length; i += 64) {\r\n            cycle(state, md5blk(s.substring(i - 64, i)));\r\n        }\r\n        s = s.substring(i - 64);\r\n        var tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n        for (i = 0; i < s.length; i++)\r\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\r\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\r\n        if (i > 55) {\r\n            cycle(state, tail);\r\n            for (i = 0; i < 16; i++) tail[i] = 0;\r\n        }\r\n        tail[14] = n * 8;\r\n        cycle(state, tail);\r\n        return state;\r\n    }\r\n\r\n    /* there needs to be support for Unicode here,\r\n        * unless we pretend that we can redefine the MD-5\r\n        * algorithm for multi-byte characters (perhaps\r\n        * by adding every four 16-bit characters and\r\n        * shortening the sum to 32 bits). Otherwise\r\n        * I suggest performing MD-5 as if every character\r\n        * was two bytes--e.g., 0040 0025 = @%--but then\r\n        * how will an ordinary MD-5 sum be matched?\r\n        * There is no way to standardize text to something\r\n        * like UTF-8 before transformation; speed cost is\r\n        * utterly prohibitive. The JavaScript standard\r\n        * itself needs to look at this: it should start\r\n        * providing access to strings as preformed UTF-8\r\n        * 8-bit unsigned value arrays.\r\n        */\r\n    function md5blk(s) { /* I figured global was faster.   */\r\n        var md5blks = [], i; /* Andy King said do it this way. */\r\n        for (i = 0; i < 64; i += 4) {\r\n            md5blks[i >> 2] = s.charCodeAt(i)\r\n            + (s.charCodeAt(i + 1) << 8)\r\n            + (s.charCodeAt(i + 2) << 16)\r\n            + (s.charCodeAt(i + 3) << 24);\r\n        }\r\n        return md5blks;\r\n    }\r\n\r\n    function rhex(n) {\r\n        var s = '', j = 0;\r\n        for (; j < 4; j++)\r\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F]\r\n            + hex_chr[(n >> (j * 8)) & 0x0F];\r\n        return s;\r\n    }\r\n\r\n    function hex(x) {\r\n        for (var i = 0; i < x.length; i++)\r\n            x[i] = rhex(x[i]);\r\n        return x.join('');\r\n    }\r\n\r\n    /* this function is much faster,\r\n    so if possible we use it. Some IEs\r\n    are the only ones I know of that\r\n    need the idiotic second function,\r\n    generated by an if clause.  */\r\n    function add32(a, b) {\r\n        return (a + b) & 0xFFFFFFFF;\r\n    }\r\n\r\n    function Md5() { }\r\n    Md5.encode = function (string) {\r\n        return hex(md51(string));\r\n    }\r\n    if (Md5.encode('hello') !== '5d41402abc4b2a76b9719d911017c592') {\r\n        add32 = function (x, y) {\r\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\r\n            msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n            return (msw << 16) | (lsw & 0xFFFF);\r\n        }\r\n    }\r\n    return Md5;\r\n}]);\r\n\r\nmodule.factory('Utils', ['$compile', '$controller', 'Vector', 'Md5', function ($compile, $controller, Vector, Md5) {\r\n    (function () {\r\n        // POLYFILL window.requestAnimationFrame\r\n        var lastTime = 0;\r\n        var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n        for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n            window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n            window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame']\r\n                                       || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n        }\r\n        if (!window.requestAnimationFrame) {\r\n            window.requestAnimationFrame = function (callback, element) {\r\n                var currTime = new Date().getTime();\r\n                var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n                var id = window.setTimeout(function () { callback(currTime + timeToCall); }, timeToCall);\r\n                lastTime = currTime + timeToCall;\r\n                return id;\r\n            };\r\n        }\r\n        if (!window.cancelAnimationFrame) {\r\n            window.cancelAnimationFrame = function (id) {\r\n                clearTimeout(id);\r\n            };\r\n        }\r\n    }());\r\n    (function () {\r\n        // POLYFILL Array.prototype.reduce\r\n        // Production steps of ECMA-262, Edition 5, 15.4.4.21\r\n        // Reference: http://es5.github.io/#x15.4.4.21\r\n        // https://tc39.github.io/ecma262/#sec-array.prototype.reduce\r\n        if (!Array.prototype.reduce) {\r\n            Object.defineProperty(Array.prototype, 'reduce', {\r\n                value: function (callback) {// , initialvalue\r\n                    if (this === null) {\r\n                        throw new TypeError('Array.prototype.reduce called on null or undefined');\r\n                    }\r\n                    if (typeof callback !== 'function') {\r\n                        throw new TypeError(callback + ' is not a function');\r\n                    }\r\n                    var o = Object(this);\r\n                    var len = o.length >>> 0;\r\n                    var k = 0;\r\n                    var value;\r\n                    if (arguments.length == 2) {\r\n                        value = arguments[1];\r\n                    } else {\r\n                        while (k < len && !(k in o)) {\r\n                            k++;\r\n                        }\r\n                        if (k >= len) {\r\n                            throw new TypeError('Reduce of empty array with no initial value');\r\n                        }\r\n                        value = o[k++];\r\n                    }\r\n                    while (k < len) {\r\n                        if (k in o) {\r\n                            value = callback(value, o[k], k, o);\r\n                        }\r\n                        k++;\r\n                    }\r\n                    return value;\r\n                }\r\n            });\r\n        }\r\n    }());\r\n    var _isTouch;\r\n    function isTouch() {\r\n        if (!_isTouch) {\r\n            _isTouch = {\r\n                value: ('ontouchstart' in window || 'onmsgesturechange' in window)\r\n            }\r\n        }\r\n        // console.log(_isTouch);\r\n        return _isTouch.value;\r\n    }\r\n    function getTouch(e, previous) {\r\n        var t = new Vector();\r\n        if (e.type == 'touchstart' || e.type == 'touchmove' || e.type == 'touchend' || e.type == 'touchcancel') {\r\n            var touch = null;\r\n            var event = e.originalEvent ? e.originalEvent : e;\r\n            var touches = event.touches.length ? event.touches : event.changedTouches;\r\n            if (touches && touches.length) {\r\n                touch = touches[0];\r\n            }\r\n            if (touch) {\r\n                t.x = touch.pageX;\r\n                t.y = touch.pageY;\r\n            }\r\n        } else if (e.type == 'click' || e.type == 'mousedown' || e.type == 'mouseup' || e.type == 'mousemove' || e.type == 'mouseover' || e.type == 'mouseout' || e.type == 'mouseenter' || e.type == 'mouseleave') {\r\n            t.x = e.pageX;\r\n            t.y = e.pageY;\r\n        }\r\n        if (previous) {\r\n            t.s = Vector.difference(previous, t);\r\n        }\r\n        t.type = e.type;\r\n        return t;\r\n    }\r\n    function getRelativeTouch(element, point) {\r\n        var rect = element[0].getBoundingClientRect();\r\n        var e = new Vector(rect.left, rect.top);\r\n        return Vector.difference(e, point);\r\n    }\r\n    function getClosest(el, selector) {\r\n        var matchesFn, parent;\r\n        ['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'].some(function (fn) {\r\n            if (typeof document.body[fn] == 'function') {\r\n                matchesFn = fn;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        if (el[matchesFn](selector)) {\r\n            return el;\r\n        }\r\n        while (el !== null) {\r\n            parent = el.parentElement;\r\n            if (parent !== null && parent[matchesFn](selector)) {\r\n                return parent;\r\n            }\r\n            el = parent;\r\n        }\r\n        return null;\r\n    }\r\n    function getClosestElement(el, target) {\r\n        var matchesFn, parent;\r\n        if (el === target) {\r\n            return el;\r\n        }\r\n        while (el !== null) {\r\n            parent = el.parentElement;\r\n            if (parent !== null && parent === target) {\r\n                return parent;\r\n            }\r\n            el = parent;\r\n        }\r\n        return null;\r\n    }\r\n    var getNow = Date.now || function () {\r\n        return new Date().getTime();\r\n    };\r\n    function throttle(func, wait, options) {\r\n        // Returns a function, that, when invoked, will only be triggered at most once\r\n        // during a given window of time. Normally, the throttled function will run\r\n        // as much as it can, without ever going more than once per `wait` duration;\r\n        // but if you'd like to disable the execution on the leading edge, pass\r\n        // `{leading: false}`. To disable execution on the trailing edge, ditto.\r\n        var context, args, result;\r\n        var timeout = null;\r\n        var previous = 0;\r\n        if (!options) options = {};\r\n        var later = function () {\r\n            previous = options.leading === false ? 0 : getNow();\r\n            timeout = null;\r\n            result = func.apply(context, args);\r\n            if (!timeout) context = args = null;\r\n        };\r\n        return function () {\r\n            var now = getNow();\r\n            if (!previous && options.leading === false) previous = now;\r\n            var remaining = wait - (now - previous);\r\n            context = this;\r\n            args = arguments;\r\n            if (remaining <= 0 || remaining > wait) {\r\n                if (timeout) {\r\n                    clearTimeout(timeout);\r\n                    timeout = null;\r\n                }\r\n                previous = now;\r\n                result = func.apply(context, args);\r\n                if (!timeout) context = args = null;\r\n            } else if (!timeout && options.trailing !== false) {\r\n                timeout = setTimeout(later, remaining);\r\n            }\r\n            return result;\r\n        };\r\n    }\r\n    function where(array, query) {\r\n        var found = null;\r\n        if (array) {\r\n            angular.forEach(array, function (item) {\r\n                var has = true;\r\n                angular.forEach(query, function (value, key) {\r\n                    has = has && item[key] === value;\r\n                });\r\n                if (has) {\r\n                    found = item;\r\n                }\r\n            });\r\n        }\r\n        return found;\r\n    }\r\n    function compileController(scope, element, html, data) {\r\n        // console.log('Utils.compileController', element);\r\n        element.html(html);\r\n        var link = $compile(element.contents());\r\n        if (data.controller) {\r\n            var $scope = scope.$new();\r\n            angular.extend($scope, data);\r\n            var controller = $controller(data.controller, { $scope: $scope });\r\n            if (data.controllerAs) {\r\n                scope[data.controllerAs] = controller;\r\n            }\r\n            element.data('$ngControllerController', controller);\r\n            element.children().data('$ngControllerController', controller);\r\n            scope = $scope;\r\n        }\r\n        link(scope);\r\n    }\r\n    var ua = window.navigator.userAgent.toLowerCase();\r\n    var safari = ua.indexOf('safari') !== -1 && ua.indexOf('chrome') === -1;\r\n    var msie = ua.indexOf('trident') !== -1 || ua.indexOf('edge') !== -1 || ua.indexOf('msie') !== -1;\r\n    var chrome = !safari && !msie && ua.indexOf('chrome') !== -1;\r\n    var mobile = ua.indexOf('mobile') !== -1;\r\n    function Utils() {\r\n    }\r\n    function reverseSortOn(key) {\r\n        return function (a, b) {\r\n            if (a[key] < b[key]) {\r\n                return 1;\r\n            }\r\n            if (a[key] > b[key]) {\r\n                return -1;\r\n            }\r\n            // a must be equal to b\r\n            return 0;\r\n        }\r\n    }\r\n    function format(string, prepend, expression) {\r\n        string = string || '';\r\n        prepend = prepend || '';\r\n        var splitted = string.split(',');\r\n        if (splitted.length > 1) {\r\n            var formatted = splitted.shift();\r\n            angular.forEach(splitted, function (value, index) {\r\n                if (expression) {\r\n                    formatted = formatted.split('{' + index + '}').join('\\' + ' + prepend + value + ' + \\'');\r\n                } else {\r\n                    formatted = formatted.split('{' + index + '}').join(prepend + value);\r\n                }\r\n            });\r\n            if (expression) {\r\n                return '\\'' + formatted + '\\'';\r\n            } else {\r\n                return formatted;\r\n            }\r\n        } else {\r\n            return prepend + string;\r\n        }\r\n    }\r\n    function reducer(o, key) {\r\n        return o[key];\r\n    }\r\n    function reducerSetter(o, key, value) {\r\n        if (typeof key == 'string') {\r\n            return reducerSetter(o, key.split('.'), value);\r\n        } else if (key.length == 1 && value !== undefined) {\r\n            return o[key[0]] = value;\r\n        } else if (key.length == 0) {\r\n            return o;\r\n        } else {\r\n            return reducerSetter(o[key[0]], key.slice(1), value);\r\n        }\r\n    }\r\n    function reducerAdder(o, key, value) {\r\n        if (typeof key == 'string') {\r\n            return reducerAdder(o, key.split('.'), value);\r\n        } else if (key.length == 1 && value !== undefined) {\r\n            return (o[key[0]] += value);\r\n        } else if (key.length == 0) {\r\n            return o;\r\n        } else {\r\n            return reducerAdder(o[key[0]], key.slice(1), value);\r\n        }\r\n    }\r\n    Utils.reverseSortOn = reverseSortOn;\r\n    Utils.getTouch = getTouch;\r\n    Utils.getRelativeTouch = getRelativeTouch;\r\n    Utils.getClosest = getClosest;\r\n    Utils.getClosestElement = getClosestElement;\r\n    Utils.throttle = throttle;\r\n    Utils.where = where;\r\n    Utils.format = format;\r\n    Utils.compileController = compileController;\r\n    Utils.reducer = reducer;\r\n    Utils.reducerSetter = reducerSetter;\r\n    Utils.reducerAdder = reducerAdder;\r\n    Utils.toMd5 = function (string) {\r\n        return Md5.encode(string);\r\n    };\r\n    Utils.ua = {\r\n        safari: safari,\r\n        msie: msie,\r\n        chrome: chrome,\r\n        mobile: mobile,\r\n    };\r\n    angular.forEach(Utils.ua, function (value, key) {\r\n        if (value) {\r\n            angular.element(document.getElementsByTagName('body')).addClass(key);\r\n        }\r\n    });\r\n    return Utils;\r\n}]);\r\n\r\nmodule.factory('Vector', function () {\r\n    function Vector(x, y) {\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n    }\r\n    Vector.make = function (a, b) {\r\n        return new Vector(b.x - a.x, b.y - a.y);\r\n    };\r\n    Vector.size = function (a) {\r\n        return Math.sqrt(a.x * a.x + a.y * a.y);\r\n    };\r\n    Vector.normalize = function (a) {\r\n        var l = Vector.size(a);\r\n        a.x /= l;\r\n        a.y /= l;\r\n        return a;\r\n    };\r\n    Vector.incidence = function (a, b) {\r\n        var angle = Math.atan2(b.y, b.x) - Math.atan2(a.y, a.x);\r\n        // if (angle < 0) angle += 2 * Math.PI;\r\n        // angle = Math.min(angle, (Math.PI * 2 - angle));\r\n        return angle;\r\n    };\r\n    Vector.distance = function (a, b) {\r\n        return Math.sqrt((a.x - b.x) * (a.x - b.x) + (a.y - b.y) * (a.y - b.y));\r\n    };\r\n    Vector.cross = function (a, b) {\r\n        return (a.x * b.y) - (a.y * b.x);\r\n    };\r\n    Vector.difference = function (a, b) {\r\n        return new Vector(b.x - a.x, b.y - a.y);\r\n    };\r\n    Vector.power = function (a, b) {\r\n        var x = Math.abs(b.x - a.x);\r\n        var y = Math.abs(b.y - a.y);\r\n        return (x + y) / 2;\r\n    };\r\n    Vector.prototype = {\r\n        size: function () {\r\n            return Vector.size(this);\r\n        },\r\n        normalize: function () {\r\n            return Vector.normalize(this);\r\n        },\r\n        incidence: function (b) {\r\n            return Vector.incidence(this, b);\r\n        },\r\n        cross: function (b) {\r\n            return Vector.cross(this, b);\r\n        },\r\n        distance: function (b) {\r\n            return Vector.distance(this, b);\r\n        },\r\n        difference: function (b) {\r\n            return Vector.difference(this, b);\r\n        },\r\n        power: function () {\r\n            return (Math.abs(this.x) + Math.abs(this.y)) / 2;\r\n        },\r\n        towards: function (b, friction) {\r\n            friction = friction || 0.125;\r\n            this.x += (b.x - this.x) * friction;\r\n            this.y += (b.y - this.y) * friction;\r\n            return this;\r\n        },\r\n        add: function (b) {\r\n            this.x += b.x;\r\n            this.y += b.y;\r\n            return this;\r\n        },\r\n        friction: function (b) {\r\n            this.x *= b;\r\n            this.y *= b;\r\n            return this;\r\n        },\r\n        copy: function (b) {\r\n            return new Vector(this.x, this.y);\r\n        },\r\n        toString: function () {\r\n            return '{' + this.x + ',' + this.y + '}';\r\n        },\r\n    };\r\n    return Vector;\r\n});\r\n\n/* global angular, module */\r\n\n//HEAD \n(function(app) {\ntry { app = angular.module(\"ngrid\"); }\ncatch(err) { app = angular.module(\"ngrid\", []); }\napp.run([\"$templateCache\", function($templateCache) {\n\"use strict\";\n\n$templateCache.put(\"ngrid/partials/ngrid\",\"<div class=\\\"ngrid\\\">\\n\" +\n    \"    <div class=\\\"ngrid-inner\\\">\\n\" +\n    \"        <div class=\\\"ngrid-spacer\\\"></div>\\n\" +\n    \"        <div class=\\\"ngrid-table\\\" ng-transclude></div>\\n\" +\n    \"    </div>\\n\" +\n    \"    <div class=\\\"ngrid-info\\\"></div>\\n\" +\n    \"</div>\")\n}]);\n})();\n\n})(window, window.angular);\n"]}