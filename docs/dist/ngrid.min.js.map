{"version":3,"sources":["docs/dist/ngrid.js"],"names":["window","angular","module","console","log","constant","SUM","MIN","MAX","AVG","directive","$window","$templateCache","$templateRequest","$interpolate","$compile","$timeout","Utils","trimWhiteSpace","string","replace","restrict","scope","options","rows","cols","templateUrl","transclude","controller","$transclude","$attrs","clone","htmls","Array","prototype","slice","call","filter","native","nodeType","test","nodeValue","map","outerHTML","join","element","nativeRow","querySelector","nativeCol","nativeCell","parentNode","removeChild","templateRow","templateCol","templateCell","link","attributes","model","updateRows","dirty","layout","from","to","count","total","Math","ceil","grid","height","cell","floor","scroll","y","max","min","length","updateCols","width","x","drawRows","visibles","template","targetElement","tableElement","forEach","item","index","$index","row","$digest","$scope","$parent","$new","$element","append","push","drawCols","col","drawCells","r","c","$row","$col","compiled","style","transform","redraw","table","nativeTable","has","update","updating","value","WebkitTransform","MozTransform","OTransform","MsTransform","onRows","nativeSpacer","onCols","onScroll","nativeInner","scrollLeft","scrollTop","onResize","offsetWidth","offsetHeight","obj","info","JSON","stringify","nativeInfo","innerHTML","onStart","e","down","getTouch","sx","sy","addDragListeners","onMove","move","diff","difference","dragging","power","addClass","onEnd","removeClass","removeDragListeners","on","off","removeListeners","undefined","parseInt","ngridRows","ngridCols","isObject","extend","$watch","nval","oval","newValue","$on","$filter","toTitleCase","str","txt","charAt","toUpperCase","substr","toLowerCase","indexOf","split","splitted","firstName","shift","lastName","legacyFilter","cost","currency","ratio","formatting","precision","unit","hours","minutes","label","format","timezone","placeholder","parseTime","parseHour","val","factory","cycle","k","a","b","d","ff","gg","hh","ii","add32","cmn","q","s","t","md51","i","n","state","md5blk","substring","tail","charCodeAt","md5blks","rhex","j","hex_chr","hex","Md5","encode","lsw","$controller","Vector","previous","type","touch","event","originalEvent","touches","changedTouches","pageX","pageY","getRelativeTouch","point","rect","getBoundingClientRect","left","top","getClosest","el","selector","matchesFn","parent","some","fn","document","body","parentElement","getClosestElement","target","throttle","func","wait","context","args","result","timeout","later","leading","getNow","apply","now","remaining","this","arguments","clearTimeout","trailing","setTimeout","where","array","query","found","key","compileController","html","data","contents","controllerAs","children","reverseSortOn","prepend","expression","formatted","reducer","o","reducerSetter","reducerAdder","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","id","reduce","Object","defineProperty","TypeError","len","ua","navigator","userAgent","safari","msie","chrome","mobile","toMd5","getElementsByTagName","make","size","sqrt","normalize","l","incidence","atan2","distance","cross","abs","towards","friction","add","copy","toString","app","err","run","put"],"mappings":"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","file":"ngrid.min.js","sourcesContent":["\n(function(window, angular) {'use strict';\n\n/* global angular */\r\n\r\nvar module = angular.module('ngrid', ['ng', 'ngSanitize']);\r\n\n/* global angular, module */\r\n\r\nwindow.console ? null : window.console = { log: function () { } };\r\n\r\nmodule.constant('ngridModes', {\r\n    SUM: 1,\r\n    MIN: 2,\r\n    MAX: 3,\r\n    AVG: 4,\r\n});\r\n\n/* global angular, module */\r\n\n/* global angular, module */\r\n\r\nmodule.directive('ngrid', ['$window', '$templateCache', '$templateRequest', '$interpolate', '$compile', '$timeout', 'Utils', function($window, $templateCache, $templateRequest, $interpolate, $compile, $timeout, Utils) {\r\n    // polyfill for trim >= IE9\r\n    function trimWhiteSpace(string) {\r\n        return string.replace(/^\\s+|\\s+$/gm, '');\r\n    }\r\n    return {\r\n        restrict: 'A',\r\n        replace: true,\r\n        scope: {\r\n            options: '=?ngrid',\r\n            rows: '=?ngridRows',\r\n            cols: '=?ngridCols',\r\n        },\r\n        templateUrl: 'ngrid/partials/ngrid',\r\n        transclude: true,\r\n        controller: ['$transclude', '$attrs', function($transclude, $attrs) {\r\n            $transclude(function(clone, scope) {\r\n                var htmls = Array.prototype.slice.call(clone).filter(function(native) {\r\n                    // trim whitespaces\r\n                    return (native.nodeType !== 3 || /\\S/.test(native.nodeValue));\r\n                }).map(function(native) {\r\n                    return native.outerHTML;\r\n                });\r\n                htmls = htmls.join('');\r\n                var element = angular.element('<div>' + htmls + '</div>');\r\n                var native = element[0];\r\n                var nativeRow = native.querySelector('.ngrid-row');\r\n                var nativeCol = native.querySelector('.ngrid-col');\r\n                var nativeCell = native.querySelector('.ngrid-cell');\r\n                if (nativeRow && nativeRow.parentNode) {\r\n                    nativeRow.parentNode.removeChild(nativeRow);\r\n                    $attrs.templateRow = trimWhiteSpace(nativeRow.outerHTML);\r\n                    // console.log($attrs.templateRow);\r\n                }\r\n                if (nativeCol && nativeCol.parentNode) {\r\n                    nativeCol.parentNode.removeChild(nativeCol);\r\n                    $attrs.templateCol = trimWhiteSpace(nativeCol.outerHTML);\r\n                    // console.log($attrs.templateCol);\r\n                }\r\n                if (nativeCell && nativeCell.parentNode) {\r\n                    nativeCell.parentNode.removeChild(nativeCell);\r\n                    $attrs.templateCell = trimWhiteSpace(nativeCell.outerHTML);\r\n                    // console.log($attrs.templateCell);\r\n                }\r\n            });\r\n        }],\r\n        link: function(scope, element, attributes, model, transclude) {\r\n            // console.log(attributes);\r\n            var templateRow, templateCol, templateCell;\r\n            if (attributes.templateRow !== undefined) {\r\n                templateRow = attributes.templateRow;\r\n                attributes.templateRow = null;\r\n            }\r\n            if (attributes.templateCol !== undefined) {\r\n                templateCol = attributes.templateCol;\r\n                attributes.templateCol = null;\r\n            }\r\n            if (attributes.templateCell !== undefined) {\r\n                templateCell = attributes.templateCell;\r\n                attributes.templateCell = null;\r\n            }\r\n            var native = element[0],\r\n                nativeInner = native.querySelector('.ngrid-inner'),\r\n                nativeSpacer = native.querySelector('.ngrid-spacer'),\r\n                nativeTable = native.querySelector('.ngrid-table'),\r\n                nativeInfo = native.querySelector('.ngrid-info'),\r\n                tableElement = angular.element(nativeTable),\r\n                layout = scope.layout = {\r\n                    grid: {\r\n                        width: 0,\r\n                        height: 0,\r\n                    },\r\n                    table: {\r\n                        width: 0,\r\n                        height: 0,\r\n                        x: 0,\r\n                        y: 0,\r\n                    },\r\n                    cell: {\r\n                        width: attributes.width !== undefined ? parseInt(attributes.width) : 100,\r\n                        height: attributes.height !== undefined ? parseInt(attributes.height) : 30,\r\n                    },\r\n                    scroll: {\r\n                        x: 0,\r\n                        y: 0,\r\n                    },\r\n                    rows: {\r\n                        dirty: false,\r\n                        from: -1,\r\n                        to: 0,\r\n                        count: 0,\r\n                        total: 0,\r\n                        has: attributes.ngridRows !== undefined,\r\n                    },\r\n                    cols: {\r\n                        dirty: false,\r\n                        from: -1,\r\n                        to: 0,\r\n                        count: 0,\r\n                        total: 0,\r\n                        has: attributes.ngridCols !== undefined,\r\n                    },\r\n                    visibles: [],\r\n                },\r\n                rows, cols;\r\n\r\n            if (angular.isObject(scope.options)) {\r\n                layout = angular.extend(scope.options, layout);\r\n            }\r\n            if (layout.rows.has) {\r\n                element.addClass('vertical');\r\n            }\r\n            if (layout.cols.has) {\r\n                element.addClass('horizontal');\r\n            }\r\n\r\n            function updateRows() {\r\n                var dirty = layout.rows.dirty = false,\r\n                    from = layout.rows.from,\r\n                    to = layout.rows.to,\r\n                    count = layout.rows.count,\r\n                    total = layout.rows.total;\r\n                if (total) {\r\n                    count = Math.ceil(layout.grid.height / layout.cell.height) + 1;\r\n                    from = Math.floor(layout.scroll.y / layout.cell.height);\r\n                    from = Math.max(0, Math.min(total - count + 1, from));\r\n                    to = Math.min(rows.length, from + count);\r\n                    dirty = (from !== layout.rows.from);\r\n                    layout.rows.dirty = dirty;\r\n                    layout.rows.from = from;\r\n                    layout.rows.to = to;\r\n                    layout.rows.count = count;\r\n                }\r\n            }\r\n\r\n            function updateCols() {\r\n                var dirty = layout.cols.dirty = false,\r\n                    from = layout.cols.from,\r\n                    to = layout.cols.to,\r\n                    count = layout.cols.count,\r\n                    total = layout.cols.total;\r\n                if (total) {\r\n                    count = Math.ceil(layout.grid.width / layout.cell.width) + 1;\r\n                    from = Math.floor(layout.scroll.x / layout.cell.width);\r\n                    from = Math.max(0, Math.min(total - count + 1, from));\r\n                    to = Math.min(cols.length, from + count);\r\n                    dirty = (from !== layout.cols.from);\r\n                    layout.cols.dirty = dirty;\r\n                    layout.cols.from = from;\r\n                    layout.cols.to = to;\r\n                    layout.cols.count = count;\r\n                }\r\n            }\r\n\r\n            function drawRows() {\r\n                console.log('drawRows');\r\n                var dirty = layout.rows.dirty,\r\n                    from = layout.rows.from,\r\n                    count = layout.rows.count,\r\n                    visibles = layout.visibles,\r\n                    template = templateRow,\r\n                    targetElement = tableElement;\r\n                if (dirty) {\r\n                    angular.forEach(visibles, function(item, index) {\r\n                        if (index < count) {\r\n                            var $index = from + index;\r\n                            item.scope.$index = $index;\r\n                            item.scope.row = rows[index + from];\r\n                            item.scope.$digest();\r\n                        }\r\n                    });\r\n                }\r\n                while (visibles.length < count) {\r\n                    var $scope = scope.$parent.$new();\r\n                    var $element = angular.element(template);\r\n                    targetElement.append($element);\r\n                    var $index = from + visibles.length;\r\n                    $scope.$index = $index;\r\n                    $scope.row = rows[$index];\r\n                    $compile($element)($scope);\r\n                    visibles.push({\r\n                        element: $element,\r\n                        scope: $scope,\r\n                    });\r\n                }\r\n            }\r\n\r\n            function drawCols() {\r\n                console.log('drawCols');\r\n                var dirty = layout.cols.dirty,\r\n                    from = layout.cols.from,\r\n                    count = layout.cols.count,\r\n                    visibles = layout.visibles,\r\n                    template = templateCol,\r\n                    targetElement = tableElement;\r\n                if (dirty) {\r\n                    angular.forEach(visibles, function(item, index) {\r\n                        if (index < count) {\r\n                            var $index = from + index;\r\n                            item.scope.$index = $index;\r\n                            item.scope.col = cols[index + from];\r\n                            item.scope.$digest();\r\n                        }\r\n                    });\r\n                }\r\n                while (visibles.length < count) {\r\n                    var $scope = scope.$parent.$new();\r\n                    var $element = angular.element(template);\r\n                    targetElement.append($element);\r\n                    var $index = from + visibles.length;\r\n                    $scope.$index = $index;\r\n                    $scope.col = cols[$index];\r\n                    $compile($element)($scope);\r\n                    visibles.push({\r\n                        element: $element,\r\n                        scope: $scope,\r\n                    });\r\n                }\r\n            }\r\n\r\n            function drawCells() {\r\n                console.log('drawCells');\r\n                var count = layout.rows.count * layout.cols.count,\r\n                    visibles = layout.visibles,\r\n                    template = templateCell,\r\n                    targetElement = tableElement;\r\n                if (layout.rows.dirty || layout.cols.dirty) {\r\n                    angular.forEach(visibles, function(cell, index) {\r\n                        if (index < count) {\r\n                            var r = Math.floor(index / layout.cols.count);\r\n                            var c = (index % layout.cols.count);\r\n                            var $row = layout.rows.from + r;\r\n                            var $col = layout.cols.from + c;\r\n                            var $index = $row * layout.cols.total + $col;\r\n                            cell.scope.$index = $index;\r\n                            cell.scope.$row = $row;\r\n                            cell.scope.$col = $col;\r\n                            cell.scope.row = rows[$row];\r\n                            cell.scope.col = cols[$col];\r\n                            cell.scope.$digest();\r\n                        }\r\n                    });\r\n                }\r\n                while (visibles.length < count) {\r\n                    var index = visibles.length;\r\n                    var r = Math.floor(index / layout.cols.count);\r\n                    var c = (index % layout.cols.count);\r\n                    var $row = layout.rows.from + r;\r\n                    var $col = layout.cols.from + c;\r\n                    var $index = $row * layout.cols.total + $col;\r\n                    var $scope = scope.$parent.$new();\r\n                    $scope.$index = $index;\r\n                    $scope.$row = $row;\r\n                    $scope.$col = $col;\r\n                    $scope.row = rows[$row];\r\n                    $scope.col = cols[$col];\r\n                    /*\r\n                    var $element = angular.element(template);\r\n                    $compile($element)($scope);\r\n                    */\r\n                    /*\r\n                    var compiled = $interpolate(template, false, null, true)($scope);\r\n                    */\r\n                    var compiled = $compile(template)($scope);\r\n                    var $element = angular.element(compiled);\r\n                    var native = $element[0];\r\n                    native.style.width = layout.cell.width + 'px';\r\n                    native.style.height = layout.cell.height + 'px';\r\n                    targetElement.append($element);\r\n                    visibles.push({\r\n                        element: $element,\r\n                        scope: $scope,\r\n                    });\r\n                }\r\n\r\n                var USE_TRANSFORM = true;\r\n                angular.forEach(visibles, function(cell, index) {\r\n                    var native = cell.element[0];\r\n                    if (index < count) {\r\n                        r = Math.floor(index / layout.cols.count);\r\n                        c = (index % layout.cols.count);\r\n                        if (USE_TRANSFORM) {\r\n                            transform(native, 'translateX(' + (c * layout.cell.width) + 'px) translateY(' + (r * layout.cell.height) + 'px)');\r\n                        } else {\r\n                            native.style.left = (c * layout.cell.width) + 'px';\r\n                            native.style.top = (r * layout.cell.height) + 'px';\r\n                            native.style.visibility = 'visible';\r\n                        }\r\n                    } else {\r\n                        if (USE_TRANSFORM) {\r\n                            transform(native, 'translateX(-1000px) translateY(-1000px)');\r\n                        } else {\r\n                            native.style.left = '0px';\r\n                            native.style.top = '0px';\r\n                            native.style.visibility = 'hidden';\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            function redraw() {\r\n                // var fragment = document.createDocumentFragment();          \r\n                // var row = document.createElement('div');\r\n                // fragment.appendChild(row);\r\n                // nativeTable.appendChild(fragment);\r\n                layout.table.x = Math.floor(layout.scroll.x / layout.cell.width) * layout.cell.width;\r\n                layout.table.y = Math.floor(layout.scroll.y / layout.cell.height) * layout.cell.height;\r\n                transform(nativeTable, 'translateX(' + layout.table.x + 'px) translateY(' + layout.table.y + 'px)');\r\n                log({\r\n                    scroll: layout.scroll,\r\n                    grid: layout.grid,\r\n                    rows: layout.rows.has ? layout.rows : null,\r\n                    cols: layout.cols.has ? layout.cols : null,\r\n                });\r\n            }\r\n\r\n            var updating;\r\n            function update() {\r\n                if (!updating) {\r\n                    updating = true;\r\n                    if (layout.rows.has) {\r\n                        updateRows();\r\n                    }\r\n                    if (layout.cols.has) {\r\n                        updateCols();\r\n                    }\r\n                    if (layout.rows.has && layout.cols.has) {\r\n                        if (rows && cols) {\r\n                            drawCells();\r\n                        }\r\n                    } else if (layout.rows.has) {\r\n                        if (rows) {\r\n                            drawRows();\r\n                        }\r\n                    } else if (layout.cols.has) {\r\n                        if (cols) {\r\n                            drawCols();\r\n                        }\r\n                    }\r\n                    redraw();\r\n                    updating = false;\r\n                    /*\r\n                    setTimeout(function() {            \r\n                        updating = false;\r\n                    });\r\n                    */\r\n                }\r\n            }\r\n\r\n            function transform(native, value) {\r\n                native.style.WebkitTransform =\r\n                    native.style.MozTransform =\r\n                    native.style.OTransform =\r\n                    native.style.MsTransform =\r\n                    native.style.transform =\r\n                    value;\r\n            }\r\n\r\n            function onRows() {\r\n                layout.rows.total = 0;\r\n                layout.table.height = 0;\r\n                if (rows) {\r\n                    layout.rows.total = rows.length;\r\n                    layout.table.height = layout.rows.total * layout.cell.height;\r\n                }\r\n                nativeSpacer.style.height = layout.table.height + 'px';\r\n            }\r\n\r\n            function onCols() {\r\n                layout.cols.total = 0;\r\n                layout.table.height = 0;\r\n                if (cols) {\r\n                    layout.cols.total = cols.length;\r\n                    layout.table.width = layout.cols.total * layout.cell.width;\r\n                }\r\n                nativeSpacer.style.width = layout.table.width + 'px';\r\n            }\r\n\r\n            function onScroll() {\r\n                layout.scroll.x = nativeInner.scrollLeft;\r\n                layout.scroll.y = nativeInner.scrollTop;\r\n                update();\r\n            }\r\n\r\n            // resize fires on window resize and on scope update      \r\n            function onResize() {\r\n                layout.grid.width = layout.table.width = nativeInner.offsetWidth;\r\n                layout.grid.height = layout.table.height = nativeInner.offsetHeight;\r\n                update();\r\n            }\r\n            scope.$watch(function() {\r\n                return nativeInner.offsetWidth;\r\n            }, function(nval, oval) {\r\n                if (nval !== oval) {\r\n                    onResize();\r\n                }\r\n            });\r\n            scope.$watch(function() {\r\n                return nativeInner.offsetHeight;\r\n            }, function(nval, oval) {\r\n                if (nval !== oval) {\r\n                    onResize();\r\n                }\r\n            });\r\n            scope.$watch('rows', function(newValue) {\r\n                if (newValue) {\r\n                    rows = newValue;\r\n                    onRows();\r\n                    onResize();\r\n                }\r\n            });\r\n            scope.$watch('cols', function(newValue) {\r\n                if (newValue) {\r\n                    cols = newValue;\r\n                    onCols();\r\n                    onResize();\r\n                }\r\n            });\r\n\r\n            /*\r\n            scope.$watch(function(scope) {\r\n                // watch the 'compile' expression for changes\r\n                return scope.$eval(attrs.compile);\r\n            }, function(value) {\r\n                // when the 'compile' expression changes\r\n                // assign it into the current DOM\r\n                element.html(value);\r\n                // compile the new DOM and link it to the current\r\n                // scope.\r\n                // NOTE: we only compile .childNodes so that\r\n                // we don't get into infinite loop compiling ourselves\r\n                $compile(element.contents())(scope);\r\n            });\r\n            */\r\n\r\n            function log(obj) {\r\n                layout.info = JSON.stringify(obj);\r\n                nativeInfo.innerHTML = layout.info;\r\n            }\r\n\r\n            var down, move, diff, dragging, sx, sy;\r\n\r\n            function onStart(e) {\r\n                down = Utils.getTouch(e);\r\n                sx = nativeInner.scrollLeft;\r\n                sy = nativeInner.scrollTop;\r\n                addDragListeners();\r\n                return false;\r\n            }\r\n\r\n            function onMove(e) {\r\n                move = Utils.getTouch(e);\r\n                diff = down.difference(move);\r\n                if (!dragging && diff.power() > 25) {\r\n                    dragging = true;\r\n                    element.addClass('dragging');\r\n                }\r\n                if (dragging) {\r\n                    /*\r\n                    style.transform = 'translateX(' + diff.x + 'px) translateY(' + diff.y + 'px)';\r\n                    style.set(target);\r\n                    elementRect.set(nativeElement).offset(diff);\r\n                    */\r\n                    nativeInner.scrollLeft = sx - diff.x;\r\n                    nativeInner.scrollTop = sy - diff.y;\r\n                    onScroll();\r\n                }\r\n                return false;\r\n            }\r\n\r\n            function onEnd(e) {\r\n                if (dragging) {\r\n                    dragging = false;\r\n                    element.removeClass('dragging');\r\n                    /*\r\n                    style.transform = 'none';\r\n                    style.set(target);\r\n                    */\r\n                }\r\n                removeDragListeners();\r\n                return false;\r\n            }\r\n\r\n            function addDragListeners() {\r\n                angular.element($window).on('touchmove mousemove', onMove);\r\n                angular.element($window).on('touchend mouseup', onEnd);\r\n            };\r\n\r\n            function removeDragListeners() {\r\n                angular.element($window).off('touchmove mousemove', onMove);\r\n                angular.element($window).off('touchend mouseup', onEnd);\r\n            };\r\n\r\n            function addListeners() {\r\n                angular.element(nativeInner).on('touchstart mousedown', onStart);\r\n                angular.element(nativeInner).on('scroll', onScroll);\r\n                angular.element($window).on('resize', onResize);\r\n            };\r\n\r\n            function removeListeners() {\r\n                angular.element(nativeInner).off('touchstart mousedown', onStart);\r\n                angular.element(nativeInner).off('scroll', onScroll);\r\n                angular.element($window).off('resize', onResize);\r\n            };\r\n            scope.$on('$destroy', function() {\r\n                removeListeners();\r\n                removeDragListeners();\r\n            });\r\n            addListeners();\r\n        }\r\n    }\r\n}]);\n/* global angular, module */\r\n\r\nmodule.filter('shortName', ['$filter', function ($filter) {\r\n    function toTitleCase(str) {\r\n        return str.replace(/\\w\\S*/g, function (txt) { return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase(); });\r\n    }\r\n    return function (value) {\r\n        if (!value) {\r\n            return '';\r\n        }\r\n        if (value.indexOf(' .') === value.length - 2) {\r\n            value = value.split(' .').join('');\r\n        }\r\n        /*\r\n        var splitted;\r\n        if (value.indexOf('.') !== -1) {\r\n            splitted = value.split('.');\r\n        } else {\r\n            splitted = value.split(' ');\r\n        }\r\n        */\r\n        var splitted = value.split(' ');\r\n        var firstName = splitted.shift();\r\n        if (splitted.length) {\r\n            var lastName = splitted.join(' ');\r\n            return firstName.substr(0, 1).toUpperCase() + '.' + toTitleCase(lastName);\r\n        } else {\r\n            return firstName;\r\n        }\r\n    }\r\n}]);\r\n\r\nmodule.filter('customCurrency', ['$filter', function ($filter) {\r\n    var legacyFilter = $filter('currency');\r\n    return function (cost, currency) {\r\n        return legacyFilter(cost * currency.ratio, currency.formatting);\r\n    }\r\n}]);\r\n\r\nmodule.filter('customNumber', ['$filter', function ($filter) {\r\n    var filter = $filter('number');\r\n    return function (value, precision, unit) {\r\n        unit = unit || '';\r\n        return (value ? filter(value, precision) + unit : '-');\r\n    }\r\n}]);\r\n\r\nmodule.filter('customHours', [function () {\r\n    return function (value) {\r\n        if (value) {\r\n            var hours = Math.floor(value);\r\n            var minutes = Math.floor((value - hours) * 60);\r\n            var label = hours ? hours + ' H' : '';\r\n            label += minutes ? ' ' + minutes + ' m' : '';\r\n            return label;\r\n        } else {\r\n            return '-';\r\n        }\r\n    }\r\n}]);\r\n\r\nmodule.filter('customDate', ['$filter', function ($filter) {\r\n    var filter = $filter('date');\r\n    return function (value, format, timezone) {\r\n        return value ? filter(value, format, timezone) : '-';\r\n    }\r\n}]);\r\n\r\nmodule.filter('customTime', ['$filter', function ($filter) {\r\n    return function (value, placeholder) {\r\n        if (value) {\r\n            return Utils.parseTime(value);\r\n        } else {\r\n            return (placeholder ? placeholder : '-');\r\n        }\r\n    }\r\n}]);\r\n\r\nmodule.filter('customDigital', ['$filter', function ($filter) {\r\n    return function (value, placeholder) {\r\n        if (value) {\r\n            return Utils.parseHour(value);\r\n        } else {\r\n            return (placeholder ? placeholder : '-');\r\n        }\r\n    }\r\n}]);\r\n\r\nmodule.filter('customString', ['$filter', function ($filter) {\r\n    return function (value, placeholder) {\r\n        return value ? value : (placeholder ? placeholder : '-');\r\n    }\r\n}]);\r\n\r\nmodule.filter('customEnum', function () {\r\n    return function (val) {\r\n        val = val + 1;\r\n        return val < 10 ? '0' + val : val;\r\n    };\r\n});\r\n\n/* global angular, module */\r\n\r\nmodule.factory('Md5', [function () {\r\n\r\n    var hex_chr = '0123456789abcdef'.split('');\r\n\r\n    function cycle(x, k) {\r\n        var a = x[0], b = x[1], c = x[2], d = x[3];\r\n\r\n        a = ff(a, b, c, d, k[0], 7, -680876936);\r\n        d = ff(d, a, b, c, k[1], 12, -389564586);\r\n        c = ff(c, d, a, b, k[2], 17, 606105819);\r\n        b = ff(b, c, d, a, k[3], 22, -1044525330);\r\n        a = ff(a, b, c, d, k[4], 7, -176418897);\r\n        d = ff(d, a, b, c, k[5], 12, 1200080426);\r\n        c = ff(c, d, a, b, k[6], 17, -1473231341);\r\n        b = ff(b, c, d, a, k[7], 22, -45705983);\r\n        a = ff(a, b, c, d, k[8], 7, 1770035416);\r\n        d = ff(d, a, b, c, k[9], 12, -1958414417);\r\n        c = ff(c, d, a, b, k[10], 17, -42063);\r\n        b = ff(b, c, d, a, k[11], 22, -1990404162);\r\n        a = ff(a, b, c, d, k[12], 7, 1804603682);\r\n        d = ff(d, a, b, c, k[13], 12, -40341101);\r\n        c = ff(c, d, a, b, k[14], 17, -1502002290);\r\n        b = ff(b, c, d, a, k[15], 22, 1236535329);\r\n\r\n        a = gg(a, b, c, d, k[1], 5, -165796510);\r\n        d = gg(d, a, b, c, k[6], 9, -1069501632);\r\n        c = gg(c, d, a, b, k[11], 14, 643717713);\r\n        b = gg(b, c, d, a, k[0], 20, -373897302);\r\n        a = gg(a, b, c, d, k[5], 5, -701558691);\r\n        d = gg(d, a, b, c, k[10], 9, 38016083);\r\n        c = gg(c, d, a, b, k[15], 14, -660478335);\r\n        b = gg(b, c, d, a, k[4], 20, -405537848);\r\n        a = gg(a, b, c, d, k[9], 5, 568446438);\r\n        d = gg(d, a, b, c, k[14], 9, -1019803690);\r\n        c = gg(c, d, a, b, k[3], 14, -187363961);\r\n        b = gg(b, c, d, a, k[8], 20, 1163531501);\r\n        a = gg(a, b, c, d, k[13], 5, -1444681467);\r\n        d = gg(d, a, b, c, k[2], 9, -51403784);\r\n        c = gg(c, d, a, b, k[7], 14, 1735328473);\r\n        b = gg(b, c, d, a, k[12], 20, -1926607734);\r\n\r\n        a = hh(a, b, c, d, k[5], 4, -378558);\r\n        d = hh(d, a, b, c, k[8], 11, -2022574463);\r\n        c = hh(c, d, a, b, k[11], 16, 1839030562);\r\n        b = hh(b, c, d, a, k[14], 23, -35309556);\r\n        a = hh(a, b, c, d, k[1], 4, -1530992060);\r\n        d = hh(d, a, b, c, k[4], 11, 1272893353);\r\n        c = hh(c, d, a, b, k[7], 16, -155497632);\r\n        b = hh(b, c, d, a, k[10], 23, -1094730640);\r\n        a = hh(a, b, c, d, k[13], 4, 681279174);\r\n        d = hh(d, a, b, c, k[0], 11, -358537222);\r\n        c = hh(c, d, a, b, k[3], 16, -722521979);\r\n        b = hh(b, c, d, a, k[6], 23, 76029189);\r\n        a = hh(a, b, c, d, k[9], 4, -640364487);\r\n        d = hh(d, a, b, c, k[12], 11, -421815835);\r\n        c = hh(c, d, a, b, k[15], 16, 530742520);\r\n        b = hh(b, c, d, a, k[2], 23, -995338651);\r\n\r\n        a = ii(a, b, c, d, k[0], 6, -198630844);\r\n        d = ii(d, a, b, c, k[7], 10, 1126891415);\r\n        c = ii(c, d, a, b, k[14], 15, -1416354905);\r\n        b = ii(b, c, d, a, k[5], 21, -57434055);\r\n        a = ii(a, b, c, d, k[12], 6, 1700485571);\r\n        d = ii(d, a, b, c, k[3], 10, -1894986606);\r\n        c = ii(c, d, a, b, k[10], 15, -1051523);\r\n        b = ii(b, c, d, a, k[1], 21, -2054922799);\r\n        a = ii(a, b, c, d, k[8], 6, 1873313359);\r\n        d = ii(d, a, b, c, k[15], 10, -30611744);\r\n        c = ii(c, d, a, b, k[6], 15, -1560198380);\r\n        b = ii(b, c, d, a, k[13], 21, 1309151649);\r\n        a = ii(a, b, c, d, k[4], 6, -145523070);\r\n        d = ii(d, a, b, c, k[11], 10, -1120210379);\r\n        c = ii(c, d, a, b, k[2], 15, 718787259);\r\n        b = ii(b, c, d, a, k[9], 21, -343485551);\r\n\r\n        x[0] = add32(a, x[0]);\r\n        x[1] = add32(b, x[1]);\r\n        x[2] = add32(c, x[2]);\r\n        x[3] = add32(d, x[3]);\r\n\r\n    }\r\n\r\n    function cmn(q, a, b, x, s, t) {\r\n        a = add32(add32(a, q), add32(x, t));\r\n        return add32((a << s) | (a >>> (32 - s)), b);\r\n    }\r\n\r\n    function ff(a, b, c, d, x, s, t) {\r\n        return cmn((b & c) | ((~b) & d), a, b, x, s, t);\r\n    }\r\n\r\n    function gg(a, b, c, d, x, s, t) {\r\n        return cmn((b & d) | (c & (~d)), a, b, x, s, t);\r\n    }\r\n\r\n    function hh(a, b, c, d, x, s, t) {\r\n        return cmn(b ^ c ^ d, a, b, x, s, t);\r\n    }\r\n\r\n    function ii(a, b, c, d, x, s, t) {\r\n        return cmn(c ^ (b | (~d)), a, b, x, s, t);\r\n    }\r\n\r\n    function md51(s) {\r\n        var txt = '';\r\n        var n = s.length,\r\n        state = [1732584193, -271733879, -1732584194, 271733878], i;\r\n        for (i = 64; i <= s.length; i += 64) {\r\n            cycle(state, md5blk(s.substring(i - 64, i)));\r\n        }\r\n        s = s.substring(i - 64);\r\n        var tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n        for (i = 0; i < s.length; i++)\r\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\r\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\r\n        if (i > 55) {\r\n            cycle(state, tail);\r\n            for (i = 0; i < 16; i++) tail[i] = 0;\r\n        }\r\n        tail[14] = n * 8;\r\n        cycle(state, tail);\r\n        return state;\r\n    }\r\n\r\n    /* there needs to be support for Unicode here,\r\n        * unless we pretend that we can redefine the MD-5\r\n        * algorithm for multi-byte characters (perhaps\r\n        * by adding every four 16-bit characters and\r\n        * shortening the sum to 32 bits). Otherwise\r\n        * I suggest performing MD-5 as if every character\r\n        * was two bytes--e.g., 0040 0025 = @%--but then\r\n        * how will an ordinary MD-5 sum be matched?\r\n        * There is no way to standardize text to something\r\n        * like UTF-8 before transformation; speed cost is\r\n        * utterly prohibitive. The JavaScript standard\r\n        * itself needs to look at this: it should start\r\n        * providing access to strings as preformed UTF-8\r\n        * 8-bit unsigned value arrays.\r\n        */\r\n    function md5blk(s) { /* I figured global was faster.   */\r\n        var md5blks = [], i; /* Andy King said do it this way. */\r\n        for (i = 0; i < 64; i += 4) {\r\n            md5blks[i >> 2] = s.charCodeAt(i)\r\n            + (s.charCodeAt(i + 1) << 8)\r\n            + (s.charCodeAt(i + 2) << 16)\r\n            + (s.charCodeAt(i + 3) << 24);\r\n        }\r\n        return md5blks;\r\n    }\r\n\r\n    function rhex(n) {\r\n        var s = '', j = 0;\r\n        for (; j < 4; j++)\r\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F]\r\n            + hex_chr[(n >> (j * 8)) & 0x0F];\r\n        return s;\r\n    }\r\n\r\n    function hex(x) {\r\n        for (var i = 0; i < x.length; i++)\r\n            x[i] = rhex(x[i]);\r\n        return x.join('');\r\n    }\r\n\r\n    /* this function is much faster,\r\n    so if possible we use it. Some IEs\r\n    are the only ones I know of that\r\n    need the idiotic second function,\r\n    generated by an if clause.  */\r\n    function add32(a, b) {\r\n        return (a + b) & 0xFFFFFFFF;\r\n    }\r\n\r\n    function Md5() { }\r\n    Md5.encode = function (string) {\r\n        return hex(md51(string));\r\n    }\r\n    if (Md5.encode('hello') !== '5d41402abc4b2a76b9719d911017c592') {\r\n        add32 = function (x, y) {\r\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\r\n            msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n            return (msw << 16) | (lsw & 0xFFFF);\r\n        }\r\n    }\r\n    return Md5;\r\n}]);\r\n\r\nmodule.factory('Utils', ['$compile', '$controller', 'Vector', 'Md5', function ($compile, $controller, Vector, Md5) {\r\n    (function () {\r\n        // POLYFILL window.requestAnimationFrame\r\n        var lastTime = 0;\r\n        var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n        for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n            window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n            window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame']\r\n                                       || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n        }\r\n        if (!window.requestAnimationFrame) {\r\n            window.requestAnimationFrame = function (callback, element) {\r\n                var currTime = new Date().getTime();\r\n                var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n                var id = window.setTimeout(function () { callback(currTime + timeToCall); }, timeToCall);\r\n                lastTime = currTime + timeToCall;\r\n                return id;\r\n            };\r\n        }\r\n        if (!window.cancelAnimationFrame) {\r\n            window.cancelAnimationFrame = function (id) {\r\n                clearTimeout(id);\r\n            };\r\n        }\r\n    }());\r\n    (function () {\r\n        // POLYFILL Array.prototype.reduce\r\n        // Production steps of ECMA-262, Edition 5, 15.4.4.21\r\n        // Reference: http://es5.github.io/#x15.4.4.21\r\n        // https://tc39.github.io/ecma262/#sec-array.prototype.reduce\r\n        if (!Array.prototype.reduce) {\r\n            Object.defineProperty(Array.prototype, 'reduce', {\r\n                value: function (callback) {// , initialvalue\r\n                    if (this === null) {\r\n                        throw new TypeError('Array.prototype.reduce called on null or undefined');\r\n                    }\r\n                    if (typeof callback !== 'function') {\r\n                        throw new TypeError(callback + ' is not a function');\r\n                    }\r\n                    var o = Object(this);\r\n                    var len = o.length >>> 0;\r\n                    var k = 0;\r\n                    var value;\r\n                    if (arguments.length == 2) {\r\n                        value = arguments[1];\r\n                    } else {\r\n                        while (k < len && !(k in o)) {\r\n                            k++;\r\n                        }\r\n                        if (k >= len) {\r\n                            throw new TypeError('Reduce of empty array with no initial value');\r\n                        }\r\n                        value = o[k++];\r\n                    }\r\n                    while (k < len) {\r\n                        if (k in o) {\r\n                            value = callback(value, o[k], k, o);\r\n                        }\r\n                        k++;\r\n                    }\r\n                    return value;\r\n                }\r\n            });\r\n        }\r\n    }());\r\n    var _isTouch;\r\n    function isTouch() {\r\n        if (!_isTouch) {\r\n            _isTouch = {\r\n                value: ('ontouchstart' in window || 'onmsgesturechange' in window)\r\n            }\r\n        }\r\n        // console.log(_isTouch);\r\n        return _isTouch.value;\r\n    }\r\n    function getTouch(e, previous) {\r\n        var t = new Vector();\r\n        if (e.type == 'touchstart' || e.type == 'touchmove' || e.type == 'touchend' || e.type == 'touchcancel') {\r\n            var touch = null;\r\n            var event = e.originalEvent ? e.originalEvent : e;\r\n            var touches = event.touches.length ? event.touches : event.changedTouches;\r\n            if (touches && touches.length) {\r\n                touch = touches[0];\r\n            }\r\n            if (touch) {\r\n                t.x = touch.pageX;\r\n                t.y = touch.pageY;\r\n            }\r\n        } else if (e.type == 'click' || e.type == 'mousedown' || e.type == 'mouseup' || e.type == 'mousemove' || e.type == 'mouseover' || e.type == 'mouseout' || e.type == 'mouseenter' || e.type == 'mouseleave') {\r\n            t.x = e.pageX;\r\n            t.y = e.pageY;\r\n        }\r\n        if (previous) {\r\n            t.s = Vector.difference(previous, t);\r\n        }\r\n        t.type = e.type;\r\n        return t;\r\n    }\r\n    function getRelativeTouch(element, point) {\r\n        var rect = element[0].getBoundingClientRect();\r\n        var e = new Vector(rect.left, rect.top);\r\n        return Vector.difference(e, point);\r\n    }\r\n    function getClosest(el, selector) {\r\n        var matchesFn, parent;\r\n        ['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'].some(function (fn) {\r\n            if (typeof document.body[fn] == 'function') {\r\n                matchesFn = fn;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        if (el[matchesFn](selector)) {\r\n            return el;\r\n        }\r\n        while (el !== null) {\r\n            parent = el.parentElement;\r\n            if (parent !== null && parent[matchesFn](selector)) {\r\n                return parent;\r\n            }\r\n            el = parent;\r\n        }\r\n        return null;\r\n    }\r\n    function getClosestElement(el, target) {\r\n        var matchesFn, parent;\r\n        if (el === target) {\r\n            return el;\r\n        }\r\n        while (el !== null) {\r\n            parent = el.parentElement;\r\n            if (parent !== null && parent === target) {\r\n                return parent;\r\n            }\r\n            el = parent;\r\n        }\r\n        return null;\r\n    }\r\n    var getNow = Date.now || function () {\r\n        return new Date().getTime();\r\n    };\r\n    function throttle(func, wait, options) {\r\n        // Returns a function, that, when invoked, will only be triggered at most once\r\n        // during a given window of time. Normally, the throttled function will run\r\n        // as much as it can, without ever going more than once per `wait` duration;\r\n        // but if you'd like to disable the execution on the leading edge, pass\r\n        // `{leading: false}`. To disable execution on the trailing edge, ditto.\r\n        var context, args, result;\r\n        var timeout = null;\r\n        var previous = 0;\r\n        if (!options) options = {};\r\n        var later = function () {\r\n            previous = options.leading === false ? 0 : getNow();\r\n            timeout = null;\r\n            result = func.apply(context, args);\r\n            if (!timeout) context = args = null;\r\n        };\r\n        return function () {\r\n            var now = getNow();\r\n            if (!previous && options.leading === false) previous = now;\r\n            var remaining = wait - (now - previous);\r\n            context = this;\r\n            args = arguments;\r\n            if (remaining <= 0 || remaining > wait) {\r\n                if (timeout) {\r\n                    clearTimeout(timeout);\r\n                    timeout = null;\r\n                }\r\n                previous = now;\r\n                result = func.apply(context, args);\r\n                if (!timeout) context = args = null;\r\n            } else if (!timeout && options.trailing !== false) {\r\n                timeout = setTimeout(later, remaining);\r\n            }\r\n            return result;\r\n        };\r\n    }\r\n    function where(array, query) {\r\n        var found = null;\r\n        if (array) {\r\n            angular.forEach(array, function (item) {\r\n                var has = true;\r\n                angular.forEach(query, function (value, key) {\r\n                    has = has && item[key] === value;\r\n                });\r\n                if (has) {\r\n                    found = item;\r\n                }\r\n            });\r\n        }\r\n        return found;\r\n    }\r\n    function compileController(scope, element, html, data) {\r\n        // console.log('Utils.compileController', element);\r\n        element.html(html);\r\n        var link = $compile(element.contents());\r\n        if (data.controller) {\r\n            var $scope = scope.$new();\r\n            angular.extend($scope, data);\r\n            var controller = $controller(data.controller, { $scope: $scope });\r\n            if (data.controllerAs) {\r\n                scope[data.controllerAs] = controller;\r\n            }\r\n            element.data('$ngControllerController', controller);\r\n            element.children().data('$ngControllerController', controller);\r\n            scope = $scope;\r\n        }\r\n        link(scope);\r\n    }\r\n    var ua = window.navigator.userAgent.toLowerCase();\r\n    var safari = ua.indexOf('safari') !== -1 && ua.indexOf('chrome') === -1;\r\n    var msie = ua.indexOf('trident') !== -1 || ua.indexOf('edge') !== -1 || ua.indexOf('msie') !== -1;\r\n    var chrome = !safari && !msie && ua.indexOf('chrome') !== -1;\r\n    var mobile = ua.indexOf('mobile') !== -1;\r\n    function Utils() {\r\n    }\r\n    function reverseSortOn(key) {\r\n        return function (a, b) {\r\n            if (a[key] < b[key]) {\r\n                return 1;\r\n            }\r\n            if (a[key] > b[key]) {\r\n                return -1;\r\n            }\r\n            // a must be equal to b\r\n            return 0;\r\n        }\r\n    }\r\n    function format(string, prepend, expression) {\r\n        string = string || '';\r\n        prepend = prepend || '';\r\n        var splitted = string.split(',');\r\n        if (splitted.length > 1) {\r\n            var formatted = splitted.shift();\r\n            angular.forEach(splitted, function (value, index) {\r\n                if (expression) {\r\n                    formatted = formatted.split('{' + index + '}').join('\\' + ' + prepend + value + ' + \\'');\r\n                } else {\r\n                    formatted = formatted.split('{' + index + '}').join(prepend + value);\r\n                }\r\n            });\r\n            if (expression) {\r\n                return '\\'' + formatted + '\\'';\r\n            } else {\r\n                return formatted;\r\n            }\r\n        } else {\r\n            return prepend + string;\r\n        }\r\n    }\r\n    function reducer(o, key) {\r\n        return o[key];\r\n    }\r\n    function reducerSetter(o, key, value) {\r\n        if (typeof key == 'string') {\r\n            return reducerSetter(o, key.split('.'), value);\r\n        } else if (key.length == 1 && value !== undefined) {\r\n            return o[key[0]] = value;\r\n        } else if (key.length == 0) {\r\n            return o;\r\n        } else {\r\n            return reducerSetter(o[key[0]], key.slice(1), value);\r\n        }\r\n    }\r\n    function reducerAdder(o, key, value) {\r\n        if (typeof key == 'string') {\r\n            return reducerAdder(o, key.split('.'), value);\r\n        } else if (key.length == 1 && value !== undefined) {\r\n            return (o[key[0]] += value);\r\n        } else if (key.length == 0) {\r\n            return o;\r\n        } else {\r\n            return reducerAdder(o[key[0]], key.slice(1), value);\r\n        }\r\n    }\r\n    Utils.reverseSortOn = reverseSortOn;\r\n    Utils.getTouch = getTouch;\r\n    Utils.getRelativeTouch = getRelativeTouch;\r\n    Utils.getClosest = getClosest;\r\n    Utils.getClosestElement = getClosestElement;\r\n    Utils.throttle = throttle;\r\n    Utils.where = where;\r\n    Utils.format = format;\r\n    Utils.compileController = compileController;\r\n    Utils.reducer = reducer;\r\n    Utils.reducerSetter = reducerSetter;\r\n    Utils.reducerAdder = reducerAdder;\r\n    Utils.toMd5 = function (string) {\r\n        return Md5.encode(string);\r\n    };\r\n    Utils.ua = {\r\n        safari: safari,\r\n        msie: msie,\r\n        chrome: chrome,\r\n        mobile: mobile,\r\n    };\r\n    angular.forEach(Utils.ua, function (value, key) {\r\n        if (value) {\r\n            angular.element(document.getElementsByTagName('body')).addClass(key);\r\n        }\r\n    });\r\n    return Utils;\r\n}]);\r\n\r\nmodule.factory('Vector', function () {\r\n    function Vector(x, y) {\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n    }\r\n    Vector.make = function (a, b) {\r\n        return new Vector(b.x - a.x, b.y - a.y);\r\n    };\r\n    Vector.size = function (a) {\r\n        return Math.sqrt(a.x * a.x + a.y * a.y);\r\n    };\r\n    Vector.normalize = function (a) {\r\n        var l = Vector.size(a);\r\n        a.x /= l;\r\n        a.y /= l;\r\n        return a;\r\n    };\r\n    Vector.incidence = function (a, b) {\r\n        var angle = Math.atan2(b.y, b.x) - Math.atan2(a.y, a.x);\r\n        // if (angle < 0) angle += 2 * Math.PI;\r\n        // angle = Math.min(angle, (Math.PI * 2 - angle));\r\n        return angle;\r\n    };\r\n    Vector.distance = function (a, b) {\r\n        return Math.sqrt((a.x - b.x) * (a.x - b.x) + (a.y - b.y) * (a.y - b.y));\r\n    };\r\n    Vector.cross = function (a, b) {\r\n        return (a.x * b.y) - (a.y * b.x);\r\n    };\r\n    Vector.difference = function (a, b) {\r\n        return new Vector(b.x - a.x, b.y - a.y);\r\n    };\r\n    Vector.power = function (a, b) {\r\n        var x = Math.abs(b.x - a.x);\r\n        var y = Math.abs(b.y - a.y);\r\n        return (x + y) / 2;\r\n    };\r\n    Vector.prototype = {\r\n        size: function () {\r\n            return Vector.size(this);\r\n        },\r\n        normalize: function () {\r\n            return Vector.normalize(this);\r\n        },\r\n        incidence: function (b) {\r\n            return Vector.incidence(this, b);\r\n        },\r\n        cross: function (b) {\r\n            return Vector.cross(this, b);\r\n        },\r\n        distance: function (b) {\r\n            return Vector.distance(this, b);\r\n        },\r\n        difference: function (b) {\r\n            return Vector.difference(this, b);\r\n        },\r\n        power: function () {\r\n            return (Math.abs(this.x) + Math.abs(this.y)) / 2;\r\n        },\r\n        towards: function (b, friction) {\r\n            friction = friction || 0.125;\r\n            this.x += (b.x - this.x) * friction;\r\n            this.y += (b.y - this.y) * friction;\r\n            return this;\r\n        },\r\n        add: function (b) {\r\n            this.x += b.x;\r\n            this.y += b.y;\r\n            return this;\r\n        },\r\n        friction: function (b) {\r\n            this.x *= b;\r\n            this.y *= b;\r\n            return this;\r\n        },\r\n        copy: function (b) {\r\n            return new Vector(this.x, this.y);\r\n        },\r\n        toString: function () {\r\n            return '{' + this.x + ',' + this.y + '}';\r\n        },\r\n    };\r\n    return Vector;\r\n});\r\n\n/* global angular, module */\r\n\n//HEAD \n(function(app) {\ntry { app = angular.module(\"ngrid\"); }\ncatch(err) { app = angular.module(\"ngrid\", []); }\napp.run([\"$templateCache\", function($templateCache) {\n\"use strict\";\n\n$templateCache.put(\"ngrid/partials/ngrid\",\"<div class=\\\"ngrid\\\">\\n\" +\n    \"    <div class=\\\"ngrid-inner\\\">\\n\" +\n    \"        <div class=\\\"ngrid-spacer\\\"></div>\\n\" +\n    \"        <div class=\\\"ngrid-table\\\" ng-transclude></div>\\n\" +\n    \"    </div>\\n\" +\n    \"    <div class=\\\"ngrid-info\\\"></div>\\n\" +\n    \"</div>\")\n}]);\n})();\n\n})(window, window.angular);\n"]}