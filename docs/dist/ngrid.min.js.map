{"version":3,"sources":["docs/dist/ngrid.js"],"names":["window","angular","module","console","log","constant","SUM","MIN","MAX","AVG","directive","$window","$templateCache","$templateRequest","$interpolate","$compile","$timeout","Utils","trimWhiteSpace","string","replace","priority","restrict","templateUrl","transclude","controller","$transclude","$attrs","clone","scope","htmls","Array","prototype","slice","call","filter","native","nodeType","test","nodeValue","map","outerHTML","join","element","nativeRow","querySelector","parentNode","removeChild","templateRow","nativeCol","templateCol","nativeCell","templateCell","link","attributes","model","updateRows","from","to","count","total","layout","rows","dirty","Math","ceil","grid","height","cell","floor","scroll","y","max","min","length","updateCols","cols","width","x","drawRows","visibles","template","targetElement","tableElement","forEach","item","index","$index","row","$$phase","$digest","$scope","$new","$element","append","push","drawCols","col","drawCells","i","getCell","compiled","cloned","style","r","c","transform","$row","$col","$i","$r","$c","redraw","table","nativeTable","has","update","updating","value","WebkitTransform","MozTransform","OTransform","MsTransform","onRows","nativeSpacer","onCols","onScroll","nativeInner","scrollLeft","scrollTop","onResize","offsetWidth","offsetHeight","obj","info","JSON","stringify","nativeInfo","innerHTML","onStart","e","down","getTouch","sx","sy","addDragListeners","onMove","move","diff","difference","dragging","power","addClass","onEnd","removeClass","removeDragListeners","on","off","removeListeners","undefined","parseInt","ngridRows","ngridCols","isObject","options","extend","$observe","$watchCollection","$watch","$on","$filter","toTitleCase","str","txt","charAt","toUpperCase","substr","toLowerCase","indexOf","split","splitted","firstName","shift","lastName","legacyFilter","cost","currency","ratio","formatting","precision","unit","hours","minutes","label","format","timezone","placeholder","parseTime","parseHour","val","factory","cycle","k","a","b","d","ff","gg","hh","ii","add32","cmn","q","s","t","md51","n","state","md5blk","substring","tail","charCodeAt","md5blks","rhex","j","hex_chr","hex","Md5","encode","lsw","$controller","Vector","previous","type","touch","event","originalEvent","touches","changedTouches","pageX","pageY","getRelativeTouch","point","rect","getBoundingClientRect","left","top","getClosest","el","selector","matchesFn","parent","some","fn","document","body","parentElement","getClosestElement","target","throttle","func","wait","context","args","result","timeout","later","leading","getNow","apply","now","remaining","this","arguments","clearTimeout","trailing","setTimeout","where","array","query","found","key","compileController","html","data","contents","controllerAs","children","reverseSortOn","prepend","expression","formatted","reducer","o","reducerSetter","reducerAdder","lastTime","vendors","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","id","reduce","Object","defineProperty","TypeError","len","ua","navigator","userAgent","safari","msie","chrome","mobile","toMd5","getElementsByTagName","make","size","sqrt","normalize","l","incidence","atan2","distance","cross","abs","towards","friction","add","copy","toString","app","err","run","put"],"mappings":"CACA,SAAUA,EAAQC,GAAU,YAI5B,IAAIC,GAASD,EAAQC,OAAO,SAAU,KAAM,cAI5CF,GAAOG,UAAiBH,EAAOG,SAAYC,IAAK,eAEhDF,EAAOG,SAAS,cACZC,IAAK,EACLC,IAAK,EACLC,IAAK,EACLC,IAAK,IAOTP,EAAOQ,UAAU,SAAU,UAAW,iBAAkB,mBAAoB,eAAgB,WAAY,WAAY,QAAS,SAASC,EAASC,EAAgBC,EAAkBC,EAAcC,EAAUC,EAAUC,GAE/M,QAASC,GAAeC,GACpB,MAAOA,GAAOC,QAAQ,cAAe,IAEzC,OACIC,SAAU,EACVC,SAAU,IACVF,SAAS,EAMTG,YAAa,uBACbC,YAAY,EACZC,YAAa,cAAe,SAAU,SAASC,EAAaC,GACxDD,EAAY,SAASE,EAAOC,GACxB,GAAIC,GAAQC,MAAMC,UAAUC,MAAMC,KAAKN,GAAOO,OAAO,SAASC,GAE1D,MAA4B,KAApBA,EAAOC,UAAkB,KAAKC,KAAKF,EAAOG,aACnDC,IAAI,SAASJ,GAOZ,MANWA,GAAOK,WAQtBX,GAAQA,EAAMY,KAAK,GACnB,IAAIC,GAAU1C,EAAQ0C,QAAQ,QAAUb,EAAQ,UAC5CM,EAASO,EAAQ,GACjBC,EAAYR,EAAOS,cAAc,aACjCD,IAAaA,EAAUE,aACvBF,EAAUE,WAAWC,YAAYH,GACjCjB,EAAOqB,YAAc9B,EAAe0B,EAAUH,WAGlD,IAAIQ,GAAYb,EAAOS,cAAc,aACjCI,IAAaA,EAAUH,aACvBG,EAAUH,WAAWC,YAAYE,GACjCtB,EAAOuB,YAAchC,EAAe+B,EAAUR,WAGlD,IAAIU,GAAaf,EAAOS,cAAc,cAClCM,IAAcA,EAAWL,aACzBK,EAAWL,WAAWC,YAAYI,GAClCxB,EAAOyB,aAAelC,EAAeiC,EAAWV,gBAK5DY,KAAM,SAASxB,EAAOc,EAASW,EAAYC,EAAO/B,GAsE9C,QAASgC,KACL,GACmBC,GAAMC,EAAIC,EADzBC,EAAQC,EAAOC,KAAKF,MACpBG,GAAQ,CACRH,KACAD,EAAQK,KAAKC,KAAKJ,EAAOK,KAAKC,OAASN,EAAOO,KAAKD,QAAU,EAC7DV,EAAOO,KAAKK,MAAMR,EAAOS,OAAOC,EAAIV,EAAOO,KAAKD,QAChDV,EAAOO,KAAKQ,IAAI,EAAGR,KAAKS,IAAIb,EAAQD,EAAQ,EAAGF,IAC/CC,EAAKM,KAAKS,IAAIX,EAAKY,OAAQjB,EAAOE,GAClCI,EAASN,IAASI,EAAOC,KAAKL,MAAUC,IAAOG,EAAOC,KAAKJ,GAC3DG,EAAOC,KAAKC,MAAQA,EACpBF,EAAOC,KAAKL,KAAOA,EACnBI,EAAOC,KAAKJ,GAAKA,EACjBG,EAAOC,KAAKH,MAAQA,GAI5B,QAASgB,KACL,GACmBlB,GAAMC,EAAIC,EADzBC,EAAQC,EAAOe,KAAKhB,MACpBG,GAAQ,CACRH,KACAD,EAAQK,KAAKC,KAAKJ,EAAOK,KAAKW,MAAQhB,EAAOO,KAAKS,OAAS,EAC3DpB,EAAOO,KAAKK,MAAMR,EAAOS,OAAOQ,EAAIjB,EAAOO,KAAKS,OAChDpB,EAAOO,KAAKQ,IAAI,EAAGR,KAAKS,IAAIb,EAAQD,EAAQ,EAAGF,IAC/CC,EAAKM,KAAKS,IAAIG,EAAKF,OAAQjB,EAAOE,GAClCI,EAASN,IAASI,EAAOC,KAAKL,MAAUC,IAAOG,EAAOC,KAAKJ,GAC3DG,EAAOe,KAAKb,MAAQA,EACpBF,EAAOe,KAAKnB,KAAOA,EACnBI,EAAOe,KAAKlB,GAAKA,EACjBG,EAAOe,KAAKjB,MAAQA,GAI5B,QAASoB,KAEL,GAAIhB,GAAQF,EAAOC,KAAKC,MACpBN,EAAOI,EAAOC,KAAKL,KACnBE,EAAQE,EAAOC,KAAKH,MACpBqB,EAAWnB,EAAOmB,SAClBC,EAAWjC,EACXkC,EAAgBC,CAapB,KAZIpB,GACA9D,EAAQmF,QAAQJ,EAAU,SAASK,EAAMC,GACrC,GAAIA,EAAQ3B,EAAO,CACf,GAAI4B,GAAS9B,EAAO6B,CACpBD,GAAKxD,MAAM0D,OAASA,EACpBF,EAAKxD,MAAM2D,IAAM1B,EAAKwB,EAAQ7B,GACzB4B,EAAKxD,MAAM4D,SACZJ,EAAKxD,MAAM6D,aAKpBV,EAASN,OAASf,GAAO,CAC5B,GAAIgC,GAAS9D,EAAM+D,OACfC,EAAW5F,EAAQ0C,QAAQsC,EAC/BC,GAAcY,OAAOD,EACrB,IAAIN,GAAS9B,EAAOuB,EAASN,MAC7BiB,GAAOJ,OAASA,EAChBI,EAAOH,IAAM1B,EAAKyB,GAClBxE,EAAS8E,GAAUF,GACnBX,EAASe,MACLpD,QAASkD,EACThE,MAAO8D,KAKnB,QAASK,KAEL,GAAIjC,GAAQF,EAAOe,KAAKb,MACpBN,EAAOI,EAAOe,KAAKnB,KACnBE,EAAQE,EAAOe,KAAKjB,MACpBqB,EAAWnB,EAAOmB,SAClBC,EAAW/B,EACXgC,EAAgBC,CAapB,KAZIpB,GACA9D,EAAQmF,QAAQJ,EAAU,SAASK,EAAMC,GACrC,GAAIA,EAAQ3B,EAAO,CACf,GAAI4B,GAAS9B,EAAO6B,CACpBD,GAAKxD,MAAM0D,OAASA,EACpBF,EAAKxD,MAAMoE,IAAMrB,EAAKU,EAAQ7B,GACzB4B,EAAKxD,MAAM4D,SACZJ,EAAKxD,MAAM6D,aAKpBV,EAASN,OAASf,GAAO,CAC5B,GAAIgC,GAAS9D,EAAM+D,OACfC,EAAW5F,EAAQ0C,QAAQsC,EAC/BC,GAAcY,OAAOD,EACrB,IAAIN,GAAS9B,EAAOuB,EAASN,MAC7BiB,GAAOJ,OAASA,EAChBI,EAAOM,IAAMrB,EAAKW,GAClBxE,EAAS8E,GAAUF,GACnBX,EAASe,MACLpD,QAASkD,EACThE,MAAO8D,KAKnB,QAASO,KAEL,GAAIvC,GAAQE,EAAOC,KAAKH,MAAQE,EAAOe,KAAKjB,MACxCqB,EAAWnB,EAAOmB,SAClBC,EAAW7B,EACX8B,EAAgBC,CAgCpB,MA/BItB,EAAOC,KAAKC,OAASF,EAAOe,KAAKb,QACjC9D,EAAQmF,QAAQJ,EAAU,SAASZ,EAAM+B,GACrC,GAAIA,EAAIxC,EAAO,CACX,GAAIgC,GAASS,EAAQD,EAChBR,GAAOF,SACRE,EAAOD,aA0BhBV,EAASN,OAASf,GAAO,CAC5B,GAAIgC,GAASS,EAAQpB,EAASN,QAuB1B2B,EAAWtF,EAASkE,GAAUU,EAAQ,SAASW,GAC/CD,EAAWC,IAIXT,EAAW5F,EAAQ0C,QAAQ0D,GAC3BjE,EAASyD,EAAS,EACtBzD,GAAOmE,MAAM1B,MAAQhB,EAAOO,KAAKS,MAAQ,KACzCzC,EAAOmE,MAAMpC,OAASN,EAAOO,KAAKD,OAAS,KAC3Ce,EAAcY,OAAOD,GACrBb,EAASe,MACLpD,QAASkD,EACThE,MAAO8D,IAKf1F,EAAQmF,QAAQJ,EAAU,SAASZ,EAAM+B,GACrC,GAAI/D,GAASgC,EAAKzB,QAAQ,EAC1B,IAAIwD,EAAIxC,EAAO,CACX,GAAI6C,GAAIxC,KAAKK,MAAM8B,EAAItC,EAAOe,KAAKjB,OAC/B8C,EAAKN,EAAItC,EAAOe,KAAKjB,KAErB+C,GAAUtE,EAAQ,cAAiBqE,EAAI5C,EAAOO,KAAKS,MAAS,kBAAqB2B,EAAI3C,EAAOO,KAAKD,OAAU,WAQ3GuC,GAAUtE,EAAQ,6CAUlC,QAASgE,GAAQD,GACb,GAAIK,GAAIxC,KAAKK,MAAM8B,EAAItC,EAAOe,KAAKjB,OAC/B8C,EAAKN,EAAItC,EAAOe,KAAKjB,MACrBgD,EAAO9C,EAAOC,KAAKL,KAAO+C,EAC1BI,EAAO/C,EAAOe,KAAKnB,KAAOgD,EAC1BlB,EAASoB,EAAO9C,EAAOe,KAAKhB,MAAQgD,EACpCjB,EAAS9B,EAAOmB,SAASN,OAASyB,EAAItC,EAAOmB,SAASmB,GAAGtE,MAAQA,EAAM+D,MAS3E,OARAD,GAAOkB,GAAKV,EACZR,EAAOmB,GAAKN,EACZb,EAAOoB,GAAKN,EACZd,EAAOJ,OAASA,EAChBI,EAAOgB,KAAOA,EACdhB,EAAOiB,KAAOA,EACdjB,EAAOH,IAAM1B,EAAK6C,GAClBhB,EAAOM,IAAMrB,EAAKgC,GACXjB,EAGX,QAASqB,KAKLnD,EAAOoD,MAAMnC,EAAId,KAAKK,MAAMR,EAAOS,OAAOQ,EAAIjB,EAAOO,KAAKS,OAAShB,EAAOO,KAAKS,MAC/EhB,EAAOoD,MAAM1C,EAAIP,KAAKK,MAAMR,EAAOS,OAAOC,EAAIV,EAAOO,KAAKD,QAAUN,EAAOO,KAAKD,OAChFuC,EAAUQ,EAAa,cAAgBrD,EAAOoD,MAAMnC,EAAI,kBAAoBjB,EAAOoD,MAAM1C,EAAI,OAC7FnE,GACIkE,OAAQT,EAAOS,OACfJ,KAAML,EAAOK,KACbJ,KAAMD,EAAOC,KAAKqD,IAAMtD,EAAOC,KAAO,KACtCc,KAAMf,EAAOe,KAAKuC,IAAMtD,EAAOe,KAAO,OAK9C,QAASwC,KACAC,IACDA,GAAW,EACPxD,EAAOC,KAAKqD,KACZ3D,IAEAK,EAAOe,KAAKuC,KACZxC,IAEAd,EAAOC,KAAKqD,KAAOtD,EAAOe,KAAKuC,IAC3BrD,GAAQc,GACRsB,IAEGrC,EAAOC,KAAKqD,IACfrD,GACAiB,IAEGlB,EAAOe,KAAKuC,KACfvC,GACAoB,IAGRgB,IACAK,GAAW,GASnB,QAASX,GAAUtE,EAAQkF,GACvBlF,EAAOmE,MAAMgB,gBACTnF,EAAOmE,MAAMiB,aACbpF,EAAOmE,MAAMkB,WACbrF,EAAOmE,MAAMmB,YACbtF,EAAOmE,MAAMG,UACbY,EAGR,QAASK,KACL9D,EAAOC,KAAKF,MAAQ,EACpBC,EAAOoD,MAAM9C,OAAS,EAClBL,IACAD,EAAOC,KAAKF,MAAQE,EAAKY,OACzBb,EAAOoD,MAAM9C,OAASN,EAAOC,KAAKF,MAAQC,EAAOO,KAAKD,QAE1DyD,EAAarB,MAAMpC,OAASN,EAAOoD,MAAM9C,OAAS,KAGtD,QAAS0D,KACLhE,EAAOe,KAAKhB,MAAQ,EACpBC,EAAOoD,MAAMpC,MAAQ,EACjBD,IACAf,EAAOe,KAAKhB,MAAQgB,EAAKF,OACzBb,EAAOoD,MAAMpC,MAAQhB,EAAOe,KAAKhB,MAAQC,EAAOO,KAAKS,OAEzD+C,EAAarB,MAAM1B,MAAQhB,EAAOoD,MAAMpC,MAAQ,KAGpD,QAASiD,KACDhE,IACAD,EAAOC,KAAKF,MAAQE,EAAKY,OACzBb,EAAOoD,MAAM9C,OAASN,EAAOC,KAAKF,MAAQC,EAAOO,KAAKD,QAEtDS,IACAf,EAAOe,KAAKhB,MAAQgB,EAAKF,OACzBb,EAAOoD,MAAMpC,MAAQhB,EAAOe,KAAKhB,MAAQC,EAAOO,KAAKS,OAEzDhB,EAAOS,OAAOQ,EAAId,KAAKQ,IAAI,EAAGR,KAAKS,IAAKZ,EAAOoD,MAAMpC,MAAQhB,EAAOK,KAAKW,MAAQkD,EAAYC,aAC7FnE,EAAOS,OAAOC,EAAIP,KAAKQ,IAAI,EAAGR,KAAKS,IAAKZ,EAAOoD,MAAM9C,OAASN,EAAOK,KAAKC,OAAS4D,EAAYE,YAE/Fb,IAIJ,QAASc,KACLrE,EAAOK,KAAKW,MAAQhB,EAAOoD,MAAMpC,MAAQkD,EAAYI,YACrDtE,EAAOK,KAAKC,OAASN,EAAOoD,MAAM9C,OAAS4D,EAAYK,aACvDhB,IA2DJ,QAAShH,GAAIiI,GACTxE,EAAOyE,KAAOC,KAAKC,UAAUH,GAC7BI,EAAWC,UAAY7E,EAAOyE,KAKlC,QAASK,GAAQC,GAKb,MAJAC,GAAO5H,EAAM6H,SAASF,GACtBG,EAAKhB,EAAYC,WACjBgB,EAAKjB,EAAYE,UACjBgB,KACO,EAGX,QAASC,GAAON,GAiBZ,MAhBAO,GAAOlI,EAAM6H,SAASF,GACtBQ,EAAOP,EAAKQ,WAAWF,IAClBG,GAAYF,EAAKG,QAAU,KAC5BD,GAAW,EACX3G,EAAQ6G,SAAS,aAEjBF,IAMAvB,EAAYC,WAAae,EAAKK,EAAKtE,EACnCiD,EAAYE,UAAYe,EAAKI,EAAK7E,EAClCuD,MAEG,EAGX,QAAS2B,GAAMb,GAUX,MATIU,KACAA,GAAW,EACX3G,EAAQ+G,YAAY,aAMxBC,KACO,EAGX,QAASV,KACLhJ,EAAQ0C,QAAQhC,GAASiJ,GAAG,sBAAuBV,GACnDjJ,EAAQ0C,QAAQhC,GAASiJ,GAAG,mBAAoBH,GAGpD,QAASE,KACL1J,EAAQ0C,QAAQhC,GAASkJ,IAAI,sBAAuBX,GACpDjJ,EAAQ0C,QAAQhC,GAASkJ,IAAI,mBAAoBJ,GASrD,QAASK,KACL7J,EAAQ0C,QAAQoF,GAAa8B,IAAI,uBAAwBlB,GACzD1I,EAAQ0C,QAAQoF,GAAa8B,IAAI,SAAU/B,GAC3C7H,EAAQ0C,QAAQhC,GAASkJ,IAAI,SAAU3B,GAjgB3C,GAAIlF,GAAaE,EAAaE,CACC2G,UAA3BzG,EAAWN,cACXA,EAAcM,EAAWN,YACzBM,EAAWN,YAAc,MAEE+G,SAA3BzG,EAAWJ,cACXA,EAAcI,EAAWJ,YACzBI,EAAWJ,YAAc,MAEG6G,SAA5BzG,EAAWF,eACXA,EAAeE,EAAWF,aAC1BE,EAAWF,aAAe,KAE9B,IA2CIU,GAAMc,EA3CNxC,EAASO,EAAQ,GACjBoF,EAAc3F,EAAOS,cAAc,gBACnC+E,EAAexF,EAAOS,cAAc,iBACpCqE,EAAc9E,EAAOS,cAAc,gBACnC4F,EAAarG,EAAOS,cAAc,eAClCsC,EAAelF,EAAQ0C,QAAQuE,GAC/BrD,EAAShC,EAAMgC,QACXK,MACIW,MAAO,EACPV,OAAQ,GAEZ8C,OACIpC,MAAO,EACPV,OAAQ,EACRW,EAAG,EACHP,EAAG,GAEPH,MACIS,MAA4BkF,SAArBzG,EAAWuB,MAAsBmF,SAAS1G,EAAWuB,OAAS,IACrEV,OAA8B4F,SAAtBzG,EAAWa,OAAuB6F,SAAS1G,EAAWa,QAAU,IAE5EG,QACIQ,EAAG,EACHP,EAAG,GAEPT,MACIC,OAAO,EACPN,MAAO,EACPC,GAAI,EACJC,MAAO,EACPC,MAAO,EACPuD,IAA8B4C,SAAzBzG,EAAW2G,WAEpBrF,MACIb,OAAO,EACPN,MAAO,EACPC,GAAI,EACJC,MAAO,EACPC,MAAO,EACPuD,IAA8B4C,SAAzBzG,EAAW4G,WAEpBlF,YAIJ/E,GAAQkK,SAAStI,EAAMuI,WACvBvG,EAAS5D,EAAQoK,OAAOxI,EAAMuI,QAASvG,IAEvCA,EAAOC,KAAKqD,KACZxE,EAAQ6G,SAAS,YAEjB3F,EAAOe,KAAKuC,KACZxE,EAAQ6G,SAAS,aAiPrB,IAAInC,EAqGJlH,SAAQC,IAAI,aAAckD,GAC1BA,EAAWgH,SAAS,YAAa,SAAShD,GACtCnH,QAAQC,IAAI,YAAakH,KAG7BzF,EAAM0I,iBAAiBjH,EAAW2G,UAAW,SAAS3C,GAClDnH,QAAQC,IAAI,oCACRkH,IACAxD,EAAOwD,EACPK,IACAO,OAIRrG,EAAM2I,OAAOlH,EAAW4G,UAAW,SAAS5C,GACxCnH,QAAQC,IAAI,oCACRkH,IACA1C,EAAO0C,EACPO,IACAK,MAyBR,IAAIW,GAAMM,EAAMC,EAAME,EAAUP,EAAIC,CAgEpCnH,GAAM4I,IAAI,WAAY,WAClBX,IACAH,MAbJ,WACI1J,EAAQ0C,QAAQoF,GAAa6B,GAAG,uBAAwBjB,GACxD1I,EAAQ0C,QAAQoF,GAAa6B,GAAG,SAAU9B,GAC1C7H,EAAQ0C,QAAQhC,GAASiJ,GAAG,SAAU1B,WAkBtDhI,EAAOiC,OAAO,aAAc,UAAW,SAAUuI,GAC7C,QAASC,GAAYC,GACjB,MAAOA,GAAIxJ,QAAQ,SAAU,SAAUyJ,GAAO,MAAOA,GAAIC,OAAO,GAAGC,cAAgBF,EAAIG,OAAO,GAAGC,gBAErG,MAAO,UAAU3D,GACb,IAAKA,EACD,MAAO,EAEPA,GAAM4D,QAAQ,QAAU5D,EAAM5C,OAAS,IACvC4C,EAAQA,EAAM6D,MAAM,MAAMzI,KAAK,IAUnC,IAAI0I,GAAW9D,EAAM6D,MAAM,KACvBE,EAAYD,EAASE,OACzB,IAAIF,EAAS1G,OAAQ,CACjB,GAAI6G,GAAWH,EAAS1I,KAAK,IAC7B,OAAO2I,GAAUL,OAAO,EAAG,GAAGD,cAAgB,IAAMJ,EAAYY,GAEhE,MAAOF,OAKnBnL,EAAOiC,OAAO,kBAAmB,UAAW,SAAUuI,GAClD,GAAIc,GAAed,EAAQ,WAC3B,OAAO,UAAUe,EAAMC,GACnB,MAAOF,GAAaC,EAAOC,EAASC,MAAOD,EAASE,gBAI5D1L,EAAOiC,OAAO,gBAAiB,UAAW,SAAUuI,GAChD,GAAIvI,GAASuI,EAAQ,SACrB,OAAO,UAAUpD,EAAOuE,EAAWC,GAE/B,MADAA,GAAOA,GAAQ,GACPxE,EAAQnF,EAAOmF,EAAOuE,GAAaC,EAAO,QAI1D5L,EAAOiC,OAAO,eAAgB,WAC1B,MAAO,UAAUmF,GACb,GAAIA,EAAO,CACP,GAAIyE,GAAQ/H,KAAKK,MAAMiD,GACnB0E,EAAUhI,KAAKK,MAAwB,IAAjBiD,EAAQyE,IAC9BE,EAAQF,EAAQA,EAAQ,KAAO,EAEnC,OADAE,IAASD,EAAU,IAAMA,EAAU,KAAO,GAG1C,MAAO,QAKnB9L,EAAOiC,OAAO,cAAe,UAAW,SAAUuI,GAC9C,GAAIvI,GAASuI,EAAQ,OACrB,OAAO,UAAUpD,EAAO4E,EAAQC,GAC5B,MAAO7E,GAAQnF,EAAOmF,EAAO4E,EAAQC,GAAY,QAIzDjM,EAAOiC,OAAO,cAAe,UAAW,SAAUuI,GAC9C,MAAO,UAAUpD,EAAO8E,GACpB,MAAI9E,GACOrG,MAAMoL,UAAU/E,GAEf8E,EAAcA,EAAc,QAKhDlM,EAAOiC,OAAO,iBAAkB,UAAW,SAAUuI,GACjD,MAAO,UAAUpD,EAAO8E,GACpB,MAAI9E,GACOrG,MAAMqL,UAAUhF,GAEf8E,EAAcA,EAAc,QAKhDlM,EAAOiC,OAAO,gBAAiB,UAAW,SAAUuI,GAChD,MAAO,UAAUpD,EAAO8E,GACpB,MAAO9E,GAAQA,EAAS8E,EAAcA,EAAc,QAI5DlM,EAAOiC,OAAO,aAAc,WACxB,MAAO,UAAUoK,GAEb,MADAA,IAAY,EACLA,EAAM,GAAK,IAAMA,EAAMA,KAMtCrM,EAAOsM,QAAQ,OAAQ,WAInB,QAASC,GAAM3H,EAAG4H,GACd,GAAIC,GAAI7H,EAAE,GAAI8H,EAAI9H,EAAE,GAAI2B,EAAI3B,EAAE,GAAI+H,EAAI/H,EAAE,EAExC6H,GAAIG,EAAGH,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,GAAI,GAAI,WAC7BG,EAAIC,EAAGD,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,GAAI,IAAK,WAC9BjG,EAAIqG,EAAGrG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,GAAI,GAAI,WAC7BE,EAAIE,EAAGF,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,GAAI,IAAK,YAC9BC,EAAIG,EAAGH,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,GAAI,GAAI,WAC7BG,EAAIC,EAAGD,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,GAAI,GAAI,YAC7BjG,EAAIqG,EAAGrG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,GAAI,IAAK,YAC9BE,EAAIE,EAAGF,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,GAAI,IAAK,UAC9BC,EAAIG,EAAGH,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,GAAI,EAAG,YAC5BG,EAAIC,EAAGD,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,GAAI,IAAK,YAC9BjG,EAAIqG,EAAGrG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,IAAK,IAAK,OAC/BE,EAAIE,EAAGF,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,IAAK,IAAK,YAC/BC,EAAIG,EAAGH,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,IAAK,EAAG,YAC7BG,EAAIC,EAAGD,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,IAAK,IAAK,UAC/BjG,EAAIqG,EAAGrG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,IAAK,IAAK,YAC/BE,EAAIE,EAAGF,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,IAAK,GAAI,YAE9BC,EAAII,EAAGJ,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,GAAI,GAAI,WAC7BG,EAAIE,EAAGF,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,GAAI,GAAI,YAC7BjG,EAAIsG,EAAGtG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,IAAK,GAAI,WAC9BE,EAAIG,EAAGH,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,GAAI,IAAK,WAC9BC,EAAII,EAAGJ,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,GAAI,GAAI,WAC7BG,EAAIE,EAAGF,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,IAAK,EAAG,UAC7BjG,EAAIsG,EAAGtG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,IAAK,IAAK,WAC/BE,EAAIG,EAAGH,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,GAAI,IAAK,WAC9BC,EAAII,EAAGJ,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,GAAI,EAAG,WAC5BG,EAAIE,EAAGF,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,IAAK,GAAI,YAC9BjG,EAAIsG,EAAGtG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,GAAI,IAAK,WAC9BE,EAAIG,EAAGH,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,GAAI,GAAI,YAC7BC,EAAII,EAAGJ,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,IAAK,GAAI,YAC9BG,EAAIE,EAAGF,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,GAAI,GAAI,UAC7BjG,EAAIsG,EAAGtG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,GAAI,GAAI,YAC7BE,EAAIG,EAAGH,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,IAAK,IAAK,YAE/BC,EAAIK,EAAGL,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,GAAI,GAAI,QAC7BG,EAAIG,EAAGH,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,GAAI,IAAK,YAC9BjG,EAAIuG,EAAGvG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,IAAK,GAAI,YAC9BE,EAAII,EAAGJ,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,IAAK,IAAK,UAC/BC,EAAIK,EAAGL,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,GAAI,GAAI,YAC7BG,EAAIG,EAAGH,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,GAAI,GAAI,YAC7BjG,EAAIuG,EAAGvG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,GAAI,IAAK,WAC9BE,EAAII,EAAGJ,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,IAAK,IAAK,YAC/BC,EAAIK,EAAGL,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,IAAK,EAAG,WAC7BG,EAAIG,EAAGH,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,GAAI,IAAK,WAC9BjG,EAAIuG,EAAGvG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,GAAI,IAAK,WAC9BE,EAAII,EAAGJ,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,GAAI,GAAI,UAC7BC,EAAIK,EAAGL,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,GAAI,GAAI,WAC7BG,EAAIG,EAAGH,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,IAAK,IAAK,WAC/BjG,EAAIuG,EAAGvG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,IAAK,GAAI,WAC9BE,EAAII,EAAGJ,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,GAAI,IAAK,WAE9BC,EAAIM,EAAGN,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,GAAI,GAAI,WAC7BG,EAAII,EAAGJ,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,GAAI,GAAI,YAC7BjG,EAAIwG,EAAGxG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,IAAK,IAAK,YAC/BE,EAAIK,EAAGL,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,GAAI,IAAK,UAC9BC,EAAIM,EAAGN,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,IAAK,EAAG,YAC7BG,EAAII,EAAGJ,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,GAAI,IAAK,YAC9BjG,EAAIwG,EAAGxG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,IAAK,IAAK,SAC/BE,EAAIK,EAAGL,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,GAAI,IAAK,YAC9BC,EAAIM,EAAGN,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,GAAI,EAAG,YAC5BG,EAAII,EAAGJ,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,IAAK,IAAK,UAC/BjG,EAAIwG,EAAGxG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,GAAI,IAAK,YAC9BE,EAAIK,EAAGL,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,IAAK,GAAI,YAC9BC,EAAIM,EAAGN,EAAGC,EAAGnG,EAAGoG,EAAGH,EAAE,GAAI,GAAI,WAC7BG,EAAII,EAAGJ,EAAGF,EAAGC,EAAGnG,EAAGiG,EAAE,IAAK,IAAK,YAC/BjG,EAAIwG,EAAGxG,EAAGoG,EAAGF,EAAGC,EAAGF,EAAE,GAAI,GAAI,WAC7BE,EAAIK,EAAGL,EAAGnG,EAAGoG,EAAGF,EAAGD,EAAE,GAAI,IAAK,WAE9B5H,EAAE,GAAKoI,EAAMP,EAAG7H,EAAE,IAClBA,EAAE,GAAKoI,EAAMN,EAAG9H,EAAE,IAClBA,EAAE,GAAKoI,EAAMzG,EAAG3B,EAAE,IAClBA,EAAE,GAAKoI,EAAML,EAAG/H,EAAE,IAItB,QAASqI,GAAIC,EAAGT,EAAGC,EAAG9H,EAAGuI,EAAGC,GAExB,MADAX,GAAIO,EAAMA,EAAMP,EAAGS,GAAIF,EAAMpI,EAAGwI,IACzBJ,EAAOP,GAAKU,EAAMV,IAAO,GAAKU,EAAKT,GAG9C,QAASE,GAAGH,EAAGC,EAAGnG,EAAGoG,EAAG/H,EAAGuI,EAAGC,GAC1B,MAAOH,GAAKP,EAAInG,GAAQmG,EAAKC,EAAIF,EAAGC,EAAG9H,EAAGuI,EAAGC,GAGjD,QAASP,GAAGJ,EAAGC,EAAGnG,EAAGoG,EAAG/H,EAAGuI,EAAGC,GAC1B,MAAOH,GAAKP,EAAIC,EAAMpG,GAAMoG,EAAKF,EAAGC,EAAG9H,EAAGuI,EAAGC,GAGjD,QAASN,GAAGL,EAAGC,EAAGnG,EAAGoG,EAAG/H,EAAGuI,EAAGC,GAC1B,MAAOH,GAAIP,EAAInG,EAAIoG,EAAGF,EAAGC,EAAG9H,EAAGuI,EAAGC,GAGtC,QAASL,GAAGN,EAAGC,EAAGnG,EAAGoG,EAAG/H,EAAGuI,EAAGC,GAC1B,MAAOH,GAAI1G,GAAKmG,GAAMC,GAAKF,EAAGC,EAAG9H,EAAGuI,EAAGC,GAG3C,QAASC,GAAKF,GACV,GAE0DlH,GADtDqH,EAAIH,EAAE3I,OACV+I,GAAS,YAAa,WAAY,WAAY,UAC9C,KAAKtH,EAAI,GAAIA,GAAKkH,EAAE3I,OAAQyB,GAAK,GAC7BsG,EAAMgB,EAAOC,EAAOL,EAAEM,UAAUxH,EAAI,GAAIA,IAE5CkH,GAAIA,EAAEM,UAAUxH,EAAI,GACpB,IAAIyH,IAAQ,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACzD,KAAKzH,EAAI,EAAGA,EAAIkH,EAAE3I,OAAQyB,IACtByH,EAAKzH,GAAK,IAAMkH,EAAEQ,WAAW1H,KAAQA,EAAI,GAAM,EAEnD,IADAyH,EAAKzH,GAAK,IAAM,MAAUA,EAAI,GAAM,GAChCA,EAAI,GAEJ,IADAsG,EAAMgB,EAAOG,GACRzH,EAAI,EAAGA,EAAI,GAAIA,IAAKyH,EAAKzH,GAAK,CAIvC,OAFAyH,GAAK,IAAU,EAAJJ,EACXf,EAAMgB,EAAOG,GACNH,EAkBX,QAASC,GAAOL,GACZ,GAAkBlH,GAAd2H,IACJ,KAAK3H,EAAI,EAAGA,EAAI,GAAIA,GAAK,EACrB2H,EAAQ3H,GAAK,GAAKkH,EAAEQ,WAAW1H,IAC5BkH,EAAEQ,WAAW1H,EAAI,IAAM,IACvBkH,EAAEQ,WAAW1H,EAAI,IAAM,KACvBkH,EAAEQ,WAAW1H,EAAI,IAAM,GAE9B,OAAO2H,GAGX,QAASC,GAAKP,GAEV,IADA,GAAIH,GAAI,GAAIW,EAAI,EACTA,EAAI,EAAGA,IACVX,GAAKY,EAAST,GAAU,EAAJQ,EAAQ,EAAM,IAChCC,EAAST,GAAU,EAAJQ,EAAU,GAC/B,OAAOX,GAGX,QAASa,GAAIpJ,GACT,IAAK,GAAIqB,GAAI,EAAGA,EAAIrB,EAAEJ,OAAQyB,IAC1BrB,EAAEqB,GAAK4H,EAAKjJ,EAAEqB,GAClB,OAAOrB,GAAEpC,KAAK,IAQlB,QAASwK,GAAMP,EAAGC,GACd,MAAQD,GAAIC,EAAK,WAGrB,QAASuB,MA3KT,GAAIF,GAAU,mBAAmB9C,MAAM,GAsLvC,OAVAgD,GAAIC,OAAS,SAAUjN,GACnB,MAAO+M,GAAIX,EAAKpM,KAEQ,qCAAxBgN,EAAIC,OAAO,WACXlB,EAAQ,SAAUpI,EAAGP,GACjB,GAAI8J,IAAW,MAAJvJ,IAAmB,MAAJP,EAE1B,QADOO,GAAK,KAAOP,GAAK,KAAO8J,GAAO,KACvB,GAAa,MAANA,IAGvBF,KAGXjO,EAAOsM,QAAQ,SAAU,WAAY,cAAe,SAAU,MAAO,SAAUzL,EAAUuN,EAAaC,EAAQJ,GA2E1G,QAASrF,GAASF,EAAG4F,GACjB,GAAIlB,GAAI,GAAIiB,EACZ,IAAc,cAAV3F,EAAE6F,MAAkC,aAAV7F,EAAE6F,MAAiC,YAAV7F,EAAE6F,MAAgC,eAAV7F,EAAE6F,KAAuB,CACpG,GAAIC,GAAQ,KACRC,EAAQ/F,EAAEgG,cAAgBhG,EAAEgG,cAAgBhG,EAC5CiG,EAAUF,EAAME,QAAQnK,OAASiK,EAAME,QAAUF,EAAMG,cACvDD,IAAWA,EAAQnK,SACnBgK,EAAQG,EAAQ,IAEhBH,IACApB,EAAExI,EAAI4J,EAAMK,MACZzB,EAAE/I,EAAImK,EAAMM,WAEC,SAAVpG,EAAE6F,MAA6B,aAAV7F,EAAE6F,MAAiC,WAAV7F,EAAE6F,MAA+B,aAAV7F,EAAE6F,MAAiC,aAAV7F,EAAE6F,MAAiC,YAAV7F,EAAE6F,MAAgC,cAAV7F,EAAE6F,MAAkC,cAAV7F,EAAE6F,OAClLnB,EAAExI,EAAI8D,EAAEmG,MACRzB,EAAE/I,EAAIqE,EAAEoG,MAMZ,OAJIR,KACAlB,EAAED,EAAIkB,EAAOlF,WAAWmF,EAAUlB,IAEtCA,EAAEmB,KAAO7F,EAAE6F,KACJnB,EAEX,QAAS2B,GAAiBtM,EAASuM,GAC/B,GAAIC,GAAOxM,EAAQ,GAAGyM,wBAClBxG,EAAI,GAAI2F,GAAOY,EAAKE,KAAMF,EAAKG,IACnC,OAAOf,GAAOlF,WAAWT,EAAGsG,GAEhC,QAASK,GAAWC,EAAIC,GACpB,GAAIC,GAAWC,CAQf,KAPC,UAAW,wBAAyB,qBAAsB,oBAAqB,oBAAoBC,KAAK,SAAUC,GAC/G,MAAgC,kBAArBC,UAASC,KAAKF,KACrBH,EAAYG,GACL,KAIXL,EAAGE,GAAWD,GACd,MAAOD,EAEX,MAAc,OAAPA,GAAa,CAEhB,GAAe,QADfG,EAASH,EAAGQ,gBACWL,EAAOD,GAAWD,GACrC,MAAOE,EAEXH,GAAKG,EAET,MAAO,MAEX,QAASM,GAAkBT,EAAIU,GAC3B,GAAeP,EACf,IAAIH,IAAOU,EACP,MAAOV,EAEX,MAAc,OAAPA,GAAa,CAEhB,GAAe,QADfG,EAASH,EAAGQ,gBACWL,IAAWO,EAC9B,MAAOP,EAEXH,GAAKG,EAET,MAAO,MAKX,QAASQ,GAASC,EAAMC,EAAMjG,GAM1B,GAAIkG,GAASC,EAAMC,EACfC,EAAU,KACVjC,EAAW,CACVpE,KAASA,KACd,IAAIsG,GAAQ,WACRlC,EAAWpE,EAAQuG,WAAY,EAAQ,EAAIC,IAC3CH,EAAU,KACVD,EAASJ,EAAKS,MAAMP,EAASC,GACxBE,IAASH,EAAUC,EAAO,MAEnC,OAAO,YACH,GAAIO,GAAMF,GACLpC,IAAYpE,EAAQuG,WAAY,IAAOnC,EAAWsC,EACvD,IAAIC,GAAYV,GAAQS,EAAMtC,EAc9B,OAbA8B,GAAUU,KACVT,EAAOU,UACHF,GAAa,GAAKA,EAAYV,GAC1BI,IACAS,aAAaT,GACbA,EAAU,MAEdjC,EAAWsC,EACXN,EAASJ,EAAKS,MAAMP,EAASC,GACxBE,IAASH,EAAUC,EAAO,OACvBE,GAAWrG,EAAQ+G,YAAa,IACxCV,EAAUW,WAAWV,EAAOK,IAEzBP,GAGf,QAASa,GAAMC,EAAOC,GAClB,GAAIC,GAAQ,IAYZ,OAXIF,IACArR,EAAQmF,QAAQkM,EAAO,SAAUjM,GAC7B,GAAI8B,IAAM,CACVlH,GAAQmF,QAAQmM,EAAO,SAAUjK,EAAOmK,GACpCtK,EAAMA,GAAO9B,EAAKoM,KAASnK,IAE3BH,IACAqK,EAAQnM,KAIbmM,EAEX,QAASE,GAAkB7P,EAAOc,EAASgP,EAAMC,GAE7CjP,EAAQgP,KAAKA,EACb,IAAItO,GAAOtC,EAAS4B,EAAQkP,WAC5B,IAAID,EAAKnQ,WAAY,CACjB,GAAIkE,GAAS9D,EAAM+D,MACnB3F,GAAQoK,OAAO1E,EAAQiM,EACvB,IAAInQ,GAAa6M,EAAYsD,EAAKnQ,YAAckE,OAAQA,GACpDiM,GAAKE,eACLjQ,EAAM+P,EAAKE,cAAgBrQ,GAE/BkB,EAAQiP,KAAK,0BAA2BnQ,GACxCkB,EAAQoP,WAAWH,KAAK,0BAA2BnQ,GACnDI,EAAQ8D,EAEZtC,EAAKxB,GAOT,QAASZ,MAET,QAAS+Q,GAAcP,GACnB,MAAO,UAAU9E,EAAGC,GAChB,MAAID,GAAE8E,GAAO7E,EAAE6E,GACJ,EAEP9E,EAAE8E,GAAO7E,EAAE6E,IACH,EAGL,GAGf,QAASvF,GAAO/K,EAAQ8Q,EAASC,GAC7B/Q,EAASA,GAAU,GACnB8Q,EAAUA,GAAW,EACrB,IAAI7G,GAAWjK,EAAOgK,MAAM,IAC5B,IAAIC,EAAS1G,OAAS,EAAG,CACrB,GAAIyN,GAAY/G,EAASE,OAQzB,OAPArL,GAAQmF,QAAQgG,EAAU,SAAU9D,EAAOhC,GAEnC6M,EADAD,EACYC,EAAUhH,MAAM,IAAM7F,EAAQ,KAAK5C,KAAK,OAAUuP,EAAU3K,EAAQ,QAEpE6K,EAAUhH,MAAM,IAAM7F,EAAQ,KAAK5C,KAAKuP,EAAU3K,KAGlE4K,EACO,IAAOC,EAAY,IAEnBA,EAGX,MAAOF,GAAU9Q,EAGzB,QAASiR,GAAQC,EAAGZ,GAChB,MAAOY,GAAEZ,GAEb,QAASa,GAAcD,EAAGZ,EAAKnK,GAC3B,MAAkB,gBAAPmK,GACAa,EAAcD,EAAGZ,EAAItG,MAAM,KAAM7D,GACnB,GAAdmK,EAAI/M,QAAyBqF,SAAVzC,EACnB+K,EAAEZ,EAAI,IAAMnK,EACE,GAAdmK,EAAI/M,OACJ2N,EAEAC,EAAcD,EAAEZ,EAAI,IAAKA,EAAIxP,MAAM,GAAIqF,GAGtD,QAASiL,GAAaF,EAAGZ,EAAKnK,GAC1B,MAAkB,gBAAPmK,GACAc,EAAaF,EAAGZ,EAAItG,MAAM,KAAM7D,GAClB,GAAdmK,EAAI/M,QAAyBqF,SAAVzC,EAClB+K,EAAEZ,EAAI,KAAOnK,EACA,GAAdmK,EAAI/M,OACJ2N,EAEAE,EAAaF,EAAEZ,EAAI,IAAKA,EAAIxP,MAAM,GAAIqF,IA/QpD,WAIG,IAAK,GAFDkL,GAAW,EACXC,GAAW,KAAM,MAAO,SAAU,KAC7B3N,EAAI,EAAGA,EAAI2N,EAAQ/N,SAAW1E,EAAO0S,wBAAyB5N,EACnE9E,EAAO0S,sBAAwB1S,EAAOyS,EAAQ3N,GAAK,yBACnD9E,EAAO2S,qBAAuB3S,EAAOyS,EAAQ3N,GAAK,yBACpB9E,EAAOyS,EAAQ3N,GAAK,8BAEjD9E,GAAO0S,wBACR1S,EAAO0S,sBAAwB,SAAUE,EAAUjQ,GAC/C,GAAIkQ,IAAW,GAAIC,OAAOC,UACtBC,EAAahP,KAAKQ,IAAI,EAAG,IAAMqO,EAAWL,IAC1CS,EAAKjT,EAAOoR,WAAW,WAAcwB,EAASC,EAAWG,IAAgBA,EAE7E,OADAR,GAAWK,EAAWG,EACfC,IAGVjT,EAAO2S,uBACR3S,EAAO2S,qBAAuB,SAAUM,GACpC/B,aAAa+B,QAIxB,WAKQlR,MAAMC,UAAUkR,QACjBC,OAAOC,eAAerR,MAAMC,UAAW,UACnCsF,MAAO,SAAUsL,GACb,GAAa,OAAT5B,KACA,KAAM,IAAIqC,WAAU,qDAExB,IAAwB,kBAAbT,GACP,KAAM,IAAIS,WAAUT,EAAW,qBAEnC,IAGItL,GAHA+K,EAAIc,OAAOnC,MACXsC,EAAMjB,EAAE3N,SAAW,EACnBgI,EAAI,CAER,IAAwB,GAApBuE,UAAUvM,OACV4C,EAAQ2J,UAAU,OACf,CACH,KAAOvE,EAAI4G,KAAS5G,IAAK2F,KACrB3F,GAEJ,IAAIA,GAAK4G,EACL,KAAM,IAAID,WAAU,8CAExB/L,GAAQ+K,EAAE3F,KAEd,KAAOA,EAAI4G,GACH5G,IAAK2F,KACL/K,EAAQsL,EAAStL,EAAO+K,EAAE3F,GAAIA,EAAG2F,IAErC3F,GAEJ,OAAOpF,QAKvB,IAyEIsJ,GAASkC,KAAKhC,KAAO,WACrB,OAAO,GAAIgC,OAAOC,WAsElBQ,EAAKvT,EAAOwT,UAAUC,UAAUxI,cAChCyI,EAASH,EAAGrI,QAAQ,aAAe,GAAKqI,EAAGrI,QAAQ,aAAe,EAClEyI,EAAOJ,EAAGrI,QAAQ,cAAgB,GAAKqI,EAAGrI,QAAQ,WAAa,GAAKqI,EAAGrI,QAAQ,WAAa,EAC5F0I,GAAUF,IAAWC,GAAQJ,EAAGrI,QAAQ,aAAe,EACvD2I,EAASN,EAAGrI,QAAQ,aAAe,CAwFvC,OA1BAjK,GAAM+Q,cAAgBA,EACtB/Q,EAAM6H,SAAWA,EACjB7H,EAAMgO,iBAAmBA,EACzBhO,EAAMsO,WAAaA,EACnBtO,EAAMgP,kBAAoBA,EAC1BhP,EAAMkP,SAAWA,EACjBlP,EAAMoQ,MAAQA,EACdpQ,EAAMiL,OAASA,EACfjL,EAAMyQ,kBAAoBA,EAC1BzQ,EAAMmR,QAAUA,EAChBnR,EAAMqR,cAAgBA,EACtBrR,EAAMsR,aAAeA,EACrBtR,EAAM6S,MAAQ,SAAU3S,GACpB,MAAOgN,GAAIC,OAAOjN,IAEtBF,EAAMsS,IACFG,OAAQA,EACRC,KAAMA,EACNC,OAAQA,EACRC,OAAQA,GAEZ5T,EAAQmF,QAAQnE,EAAMsS,GAAI,SAAUjM,EAAOmK,GACnCnK,GACArH,EAAQ0C,QAAQmN,SAASiE,qBAAqB,SAASvK,SAASiI,KAGjExQ,KAGXf,EAAOsM,QAAQ,SAAU,WACrB,QAAS+B,GAAOzJ,EAAGP,GACfyM,KAAKlM,EAAIA,GAAK,EACdkM,KAAKzM,EAAIA,GAAK,EA+ElB,MA7EAgK,GAAOyF,KAAO,SAAUrH,EAAGC,GACvB,MAAO,IAAI2B,GAAO3B,EAAE9H,EAAI6H,EAAE7H,EAAG8H,EAAErI,EAAIoI,EAAEpI,IAEzCgK,EAAO0F,KAAO,SAAUtH,GACpB,MAAO3I,MAAKkQ,KAAKvH,EAAE7H,EAAI6H,EAAE7H,EAAI6H,EAAEpI,EAAIoI,EAAEpI,IAEzCgK,EAAO4F,UAAY,SAAUxH,GACzB,GAAIyH,GAAI7F,EAAO0F,KAAKtH,EAGpB,OAFAA,GAAE7H,GAAKsP,EACPzH,EAAEpI,GAAK6P,EACAzH,GAEX4B,EAAO8F,UAAY,SAAU1H,EAAGC,GAI5B,MAHY5I,MAAKsQ,MAAM1H,EAAErI,EAAGqI,EAAE9H,GAAKd,KAAKsQ,MAAM3H,EAAEpI,EAAGoI,EAAE7H,IAKzDyJ,EAAOgG,SAAW,SAAU5H,EAAGC,GAC3B,MAAO5I,MAAKkQ,MAAMvH,EAAE7H,EAAI8H,EAAE9H,IAAM6H,EAAE7H,EAAI8H,EAAE9H,IAAM6H,EAAEpI,EAAIqI,EAAErI,IAAMoI,EAAEpI,EAAIqI,EAAErI,KAExEgK,EAAOiG,MAAQ,SAAU7H,EAAGC,GACxB,MAAQD,GAAE7H,EAAI8H,EAAErI,EAAMoI,EAAEpI,EAAIqI,EAAE9H,GAElCyJ,EAAOlF,WAAa,SAAUsD,EAAGC,GAC7B,MAAO,IAAI2B,GAAO3B,EAAE9H,EAAI6H,EAAE7H,EAAG8H,EAAErI,EAAIoI,EAAEpI,IAEzCgK,EAAOhF,MAAQ,SAAUoD,EAAGC,GAGxB,OAFQ5I,KAAKyQ,IAAI7H,EAAE9H,EAAI6H,EAAE7H,GACjBd,KAAKyQ,IAAI7H,EAAErI,EAAIoI,EAAEpI,IACR,GAErBgK,EAAOvM,WACHiS,KAAM,WACF,MAAO1F,GAAO0F,KAAKjD,OAEvBmD,UAAW,WACP,MAAO5F,GAAO4F,UAAUnD,OAE5BqD,UAAW,SAAUzH,GACjB,MAAO2B,GAAO8F,UAAUrD,KAAMpE,IAElC4H,MAAO,SAAU5H,GACb,MAAO2B,GAAOiG,MAAMxD,KAAMpE,IAE9B2H,SAAU,SAAU3H,GAChB,MAAO2B,GAAOgG,SAASvD,KAAMpE,IAEjCvD,WAAY,SAAUuD,GAClB,MAAO2B,GAAOlF,WAAW2H,KAAMpE,IAEnCrD,MAAO,WACH,OAAQvF,KAAKyQ,IAAIzD,KAAKlM,GAAKd,KAAKyQ,IAAIzD,KAAKzM,IAAM,GAEnDmQ,QAAS,SAAU9H,EAAG+H,GAIlB,MAHAA,GAAWA,GAAY,KACvB3D,KAAKlM,IAAM8H,EAAE9H,EAAIkM,KAAKlM,GAAK6P,EAC3B3D,KAAKzM,IAAMqI,EAAErI,EAAIyM,KAAKzM,GAAKoQ,EACpB3D,MAEX4D,IAAK,SAAUhI,GAGX,MAFAoE,MAAKlM,GAAK8H,EAAE9H,EACZkM,KAAKzM,GAAKqI,EAAErI,EACLyM,MAEX2D,SAAU,SAAU/H,GAGhB,MAFAoE,MAAKlM,GAAK8H,EACVoE,KAAKzM,GAAKqI,EACHoE,MAEX6D,KAAM,SAAUjI,GACZ,MAAO,IAAI2B,GAAOyC,KAAKlM,EAAGkM,KAAKzM,IAEnCuQ,SAAU,WACN,MAAO,IAAM9D,KAAKlM,EAAI,IAAMkM,KAAKzM,EAAI,MAGtCgK,IAMX,SAAUwG,GACV,IAAMA,EAAM9U,EAAQC,OAAO,SAC3B,MAAM8U,GAAOD,EAAM9U,EAAQC,OAAO,YAClC6U,EAAIE,KAAK,iBAAkB,SAASrU,GAGpCA,EAAesU,IAAI,uBAAuB,sNAUvClV,OAAQA,OAAOC","file":"ngrid.min.js","sourcesContent":["\n(function(window, angular) {'use strict';\n\n/* global angular */\r\n\r\nvar module = angular.module('ngrid', ['ng', 'ngSanitize']);\r\n\n/* global angular, module */\r\n\r\nwindow.console ? null : window.console = { log: function () { } };\r\n\r\nmodule.constant('ngridModes', {\r\n    SUM: 1,\r\n    MIN: 2,\r\n    MAX: 3,\r\n    AVG: 4,\r\n});\r\n\n/* global angular, module */\r\n\n/* global angular, module */\r\n\r\nmodule.directive('ngrid', ['$window', '$templateCache', '$templateRequest', '$interpolate', '$compile', '$timeout', 'Utils', function($window, $templateCache, $templateRequest, $interpolate, $compile, $timeout, Utils) {\r\n    // polyfill for trim >= IE9\r\n    function trimWhiteSpace(string) {\r\n        return string.replace(/^\\s+|\\s+$/gm, '');\r\n    }\r\n    return {\r\n        priority: 1, \r\n        restrict: 'A',\r\n        replace: true,\r\n        /*\r\n        scope: {\r\n            options: '=?ngrid',\r\n        },\r\n        */\r\n        templateUrl: 'ngrid/partials/ngrid',\r\n        transclude: true,\r\n        controller: ['$transclude', '$attrs', function($transclude, $attrs) {\r\n            $transclude(function(clone, scope) {\r\n                var htmls = Array.prototype.slice.call(clone).filter(function(native) {\r\n                    // trim whitespaces\r\n                    return (native.nodeType !== 3 || /\\S/.test(native.nodeValue));\r\n                }).map(function(native) {\r\n                    var html = native.outerHTML;\r\n                    /*\r\n                    if (native && native.parentNode) {\r\n                        native.parentNode.removeChild(native);\r\n                    }\r\n                    */\r\n                    return html;\r\n                });\r\n                htmls = htmls.join('');\r\n                var element = angular.element('<div>' + htmls + '</div>');\r\n                var native = element[0];\r\n                var nativeRow = native.querySelector('.ngrid-row');\r\n                if (nativeRow && nativeRow.parentNode) {\r\n                    nativeRow.parentNode.removeChild(nativeRow);\r\n                    $attrs.templateRow = trimWhiteSpace(nativeRow.outerHTML);\r\n                    // console.log($attrs.templateRow);\r\n                }\r\n                var nativeCol = native.querySelector('.ngrid-col');\r\n                if (nativeCol && nativeCol.parentNode) {\r\n                    nativeCol.parentNode.removeChild(nativeCol);\r\n                    $attrs.templateCol = trimWhiteSpace(nativeCol.outerHTML);\r\n                    // console.log($attrs.templateCol);\r\n                }\r\n                var nativeCell = native.querySelector('.ngrid-cell');\r\n                if (nativeCell && nativeCell.parentNode) {\r\n                    nativeCell.parentNode.removeChild(nativeCell);\r\n                    $attrs.templateCell = trimWhiteSpace(nativeCell.outerHTML);\r\n                    // console.log($attrs.templateCell);\r\n                }\r\n            });\r\n        }],\r\n        link: function(scope, element, attributes, model, transclude) {\r\n            // console.log(attributes);\r\n            var templateRow, templateCol, templateCell;\r\n            if (attributes.templateRow !== undefined) {\r\n                templateRow = attributes.templateRow;\r\n                attributes.templateRow = null;\r\n            }\r\n            if (attributes.templateCol !== undefined) {\r\n                templateCol = attributes.templateCol;\r\n                attributes.templateCol = null;\r\n            }\r\n            if (attributes.templateCell !== undefined) {\r\n                templateCell = attributes.templateCell;\r\n                attributes.templateCell = null;\r\n            }\r\n            var native = element[0],\r\n                nativeInner = native.querySelector('.ngrid-inner'),\r\n                nativeSpacer = native.querySelector('.ngrid-spacer'),\r\n                nativeTable = native.querySelector('.ngrid-table'),\r\n                nativeInfo = native.querySelector('.ngrid-info'),\r\n                tableElement = angular.element(nativeTable),\r\n                layout = scope.layout = {\r\n                    grid: {\r\n                        width: 0,\r\n                        height: 0,\r\n                    },\r\n                    table: {\r\n                        width: 0,\r\n                        height: 0,\r\n                        x: 0,\r\n                        y: 0,\r\n                    },\r\n                    cell: {\r\n                        width: attributes.width !== undefined ? parseInt(attributes.width) : 100,\r\n                        height: attributes.height !== undefined ? parseInt(attributes.height) : 30,\r\n                    },\r\n                    scroll: {\r\n                        x: 0,\r\n                        y: 0,\r\n                    },\r\n                    rows: {\r\n                        dirty: false,\r\n                        from: -1,\r\n                        to: 0,\r\n                        count: 0,\r\n                        total: 0,\r\n                        has: attributes.ngridRows !== undefined,\r\n                    },\r\n                    cols: {\r\n                        dirty: false,\r\n                        from: -1,\r\n                        to: 0,\r\n                        count: 0,\r\n                        total: 0,\r\n                        has: attributes.ngridCols !== undefined,\r\n                    },\r\n                    visibles: [],\r\n                },\r\n                rows, cols;\r\n\r\n            if (angular.isObject(scope.options)) {\r\n                layout = angular.extend(scope.options, layout);\r\n            }\r\n            if (layout.rows.has) {\r\n                element.addClass('vertical');\r\n            }\r\n            if (layout.cols.has) {\r\n                element.addClass('horizontal');\r\n            }\r\n\r\n            function updateRows() {\r\n                var total = layout.rows.total,\r\n                    dirty = false, from, to, count;\r\n                if (total) {\r\n                    count = Math.ceil(layout.grid.height / layout.cell.height) + 1;\r\n                    from = Math.floor(layout.scroll.y / layout.cell.height);\r\n                    from = Math.max(0, Math.min(total - count + 1, from));\r\n                    to = Math.min(rows.length, from + count);\r\n                    dirty = (from !== layout.rows.from) || (to !== layout.rows.to);\r\n                    layout.rows.dirty = dirty;\r\n                    layout.rows.from = from;\r\n                    layout.rows.to = to;\r\n                    layout.rows.count = count;\r\n                }\r\n            }\r\n\r\n            function updateCols() {\r\n                var total = layout.cols.total,\r\n                    dirty = false, from, to, count;\r\n                if (total) {\r\n                    count = Math.ceil(layout.grid.width / layout.cell.width) + 1;\r\n                    from = Math.floor(layout.scroll.x / layout.cell.width);\r\n                    from = Math.max(0, Math.min(total - count + 1, from));\r\n                    to = Math.min(cols.length, from + count);\r\n                    dirty = (from !== layout.rows.from) || (to !== layout.rows.to);\r\n                    layout.cols.dirty = dirty;\r\n                    layout.cols.from = from;\r\n                    layout.cols.to = to;\r\n                    layout.cols.count = count;\r\n                }\r\n            }\r\n\r\n            function drawRows() {\r\n                // console.log('drawRows');\r\n                var dirty = layout.rows.dirty,\r\n                    from = layout.rows.from,\r\n                    count = layout.rows.count,\r\n                    visibles = layout.visibles,\r\n                    template = templateRow,\r\n                    targetElement = tableElement;\r\n                if (dirty) {\r\n                    angular.forEach(visibles, function(item, index) {\r\n                        if (index < count) {\r\n                            var $index = from + index;\r\n                            item.scope.$index = $index;\r\n                            item.scope.row = rows[index + from];\r\n                            if (!item.scope.$$phase) {\r\n                                item.scope.$digest();\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                while (visibles.length < count) {\r\n                    var $scope = scope.$new();\r\n                    var $element = angular.element(template);\r\n                    targetElement.append($element);\r\n                    var $index = from + visibles.length;\r\n                    $scope.$index = $index;\r\n                    $scope.row = rows[$index];\r\n                    $compile($element)($scope);\r\n                    visibles.push({\r\n                        element: $element,\r\n                        scope: $scope,\r\n                    });\r\n                }\r\n            }\r\n\r\n            function drawCols() {\r\n                // console.log('drawCols');\r\n                var dirty = layout.cols.dirty,\r\n                    from = layout.cols.from,\r\n                    count = layout.cols.count,\r\n                    visibles = layout.visibles,\r\n                    template = templateCol,\r\n                    targetElement = tableElement;\r\n                if (dirty) {\r\n                    angular.forEach(visibles, function(item, index) {\r\n                        if (index < count) {\r\n                            var $index = from + index;\r\n                            item.scope.$index = $index;\r\n                            item.scope.col = cols[index + from];\r\n                            if (!item.scope.$$phase) {\r\n                                item.scope.$digest();\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                while (visibles.length < count) {\r\n                    var $scope = scope.$new();\r\n                    var $element = angular.element(template);\r\n                    targetElement.append($element);\r\n                    var $index = from + visibles.length;\r\n                    $scope.$index = $index;\r\n                    $scope.col = cols[$index];\r\n                    $compile($element)($scope);\r\n                    visibles.push({\r\n                        element: $element,\r\n                        scope: $scope,\r\n                    });\r\n                }\r\n            }\r\n\r\n            function drawCells() {\r\n                // console.log('drawCells');\r\n                var count = layout.rows.count * layout.cols.count,\r\n                    visibles = layout.visibles,\r\n                    template = templateCell,\r\n                    targetElement = tableElement;\r\n                if (layout.rows.dirty || layout.cols.dirty) {\r\n                    angular.forEach(visibles, function(cell, i) {\r\n                        if (i < count) {\r\n                            var $scope = getCell(i);\r\n                            if (!$scope.$$phase) {\r\n                                $scope.$digest();\r\n                            }\r\n                            /*\r\n                            var r = Math.floor(i / layout.cols.count);\r\n                            var c = (i % layout.cols.count);\r\n                            var $row = layout.rows.from + r;\r\n                            var $col = layout.cols.from + c;\r\n                            var $index = $row * layout.cols.total + $col;\r\n                            cell.scope.$index = $index;\r\n                            cell.scope.$row = $row;\r\n                            cell.scope.$col = $col;\r\n                            cell.scope.row = rows[$row];\r\n                            cell.scope.col = cols[$col];\r\n                            if (!cell.scope.$$phase) {\r\n                                cell.scope.$digest();\r\n                            }\r\n                            */\r\n                        }\r\n                    });\r\n                    // console.log('dirty', Math.min(visibles.length, count));\r\n                }\r\n                /*\r\n                if (visibles.length < count) {\r\n                    console.log('compile');\r\n                }\r\n                */\r\n                while (visibles.length < count) {\r\n                    var $scope = getCell(visibles.length);\r\n                    /*\r\n                    var i = visibles.length;\r\n                    var r = Math.floor(i / layout.cols.count);\r\n                    var c = (i % layout.cols.count);\r\n                    var $row = layout.rows.from + r;\r\n                    var $col = layout.cols.from + c;\r\n                    var $index = $row * layout.cols.total + $col;\r\n                    var $scope = scope.$new();\r\n                    $scope.$index = $index;\r\n                    $scope.$row = $row;\r\n                    $scope.$col = $col;\r\n                    $scope.row = rows[$row];\r\n                    $scope.col = cols[$col];\r\n                    */\r\n                    /*\r\n                    var $element = angular.element(template);\r\n                    $compile($element)($scope);\r\n                    */\r\n                    /*\r\n                    var compiled = $interpolate(template, false, null, true)($scope);\r\n                    */\r\n                    /**** COMPILE ****/\r\n                    var compiled = $compile(template)($scope, function(cloned) {\r\n                        compiled = cloned;\r\n                        // console.log(cloned[0].outerHTML);\r\n                    });\r\n                    /**** COMPILE ****/\r\n                    var $element = angular.element(compiled);\r\n                    var native = $element[0];\r\n                    native.style.width = layout.cell.width + 'px';\r\n                    native.style.height = layout.cell.height + 'px';\r\n                    targetElement.append($element);\r\n                    visibles.push({\r\n                        element: $element,\r\n                        scope: $scope,\r\n                    });\r\n                }\r\n\r\n                var USE_TRANSFORM = true;\r\n                angular.forEach(visibles, function(cell, i) {\r\n                    var native = cell.element[0];\r\n                    if (i < count) {\r\n                        var r = Math.floor(i / layout.cols.count);\r\n                        var c = (i % layout.cols.count);\r\n                        if (USE_TRANSFORM) {\r\n                            transform(native, 'translateX(' + (c * layout.cell.width) + 'px) translateY(' + (r * layout.cell.height) + 'px)');\r\n                        } else {\r\n                            native.style.left = (c * layout.cell.width) + 'px';\r\n                            native.style.top = (r * layout.cell.height) + 'px';\r\n                            native.style.visibility = 'visible';\r\n                        }\r\n                    } else {\r\n                        if (USE_TRANSFORM) {\r\n                            transform(native, 'translateX(-1000px) translateY(-1000px)');\r\n                        } else {\r\n                            native.style.left = '0px';\r\n                            native.style.top = '0px';\r\n                            native.style.visibility = 'hidden';\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            function getCell(i) {\r\n                var r = Math.floor(i / layout.cols.count);\r\n                var c = (i % layout.cols.count);\r\n                var $row = layout.rows.from + r;\r\n                var $col = layout.cols.from + c;\r\n                var $index = $row * layout.cols.total + $col;\r\n                var $scope = layout.visibles.length > i ? layout.visibles[i].scope : scope.$new();\r\n                $scope.$i = i;\r\n                $scope.$r = r;\r\n                $scope.$c = c;\r\n                $scope.$index = $index;\r\n                $scope.$row = $row;\r\n                $scope.$col = $col;\r\n                $scope.row = rows[$row];\r\n                $scope.col = cols[$col];\r\n                return $scope;\r\n            }\r\n\r\n            function redraw() {\r\n                // var fragment = document.createDocumentFragment();          \r\n                // var row = document.createElement('div');\r\n                // fragment.appendChild(row);\r\n                // nativeTable.appendChild(fragment);\r\n                layout.table.x = Math.floor(layout.scroll.x / layout.cell.width) * layout.cell.width;\r\n                layout.table.y = Math.floor(layout.scroll.y / layout.cell.height) * layout.cell.height;\r\n                transform(nativeTable, 'translateX(' + layout.table.x + 'px) translateY(' + layout.table.y + 'px)');\r\n                log({\r\n                    scroll: layout.scroll,\r\n                    grid: layout.grid,\r\n                    rows: layout.rows.has ? layout.rows : null,\r\n                    cols: layout.cols.has ? layout.cols : null,\r\n                });\r\n            }\r\n\r\n            var updating;\r\n            function update() {\r\n                if (!updating) {\r\n                    updating = true;\r\n                    if (layout.rows.has) {\r\n                        updateRows();\r\n                    }\r\n                    if (layout.cols.has) {\r\n                        updateCols();\r\n                    }\r\n                    if (layout.rows.has && layout.cols.has) {\r\n                        if (rows && cols) {\r\n                            drawCells();\r\n                        }\r\n                    } else if (layout.rows.has) {\r\n                        if (rows) {\r\n                            drawRows();\r\n                        }\r\n                    } else if (layout.cols.has) {\r\n                        if (cols) {\r\n                            drawCols();\r\n                        }\r\n                    }\r\n                    redraw();\r\n                    updating = false;\r\n                    /*\r\n                    setTimeout(function() {            \r\n                        updating = false;\r\n                    });\r\n                    */\r\n                }\r\n            }\r\n\r\n            function transform(native, value) {\r\n                native.style.WebkitTransform =\r\n                    native.style.MozTransform =\r\n                    native.style.OTransform =\r\n                    native.style.MsTransform =\r\n                    native.style.transform =\r\n                    value;\r\n            }\r\n\r\n            function onRows() {\r\n                layout.rows.total = 0;\r\n                layout.table.height = 0;\r\n                if (rows) {\r\n                    layout.rows.total = rows.length;\r\n                    layout.table.height = layout.rows.total * layout.cell.height;\r\n                }\r\n                nativeSpacer.style.height = layout.table.height + 'px';\r\n            }\r\n\r\n            function onCols() {\r\n                layout.cols.total = 0;\r\n                layout.table.width = 0;\r\n                if (cols) {\r\n                    layout.cols.total = cols.length;\r\n                    layout.table.width = layout.cols.total * layout.cell.width;\r\n                }\r\n                nativeSpacer.style.width = layout.table.width + 'px';\r\n            }\r\n\r\n            function onScroll() {\r\n                if (rows) {\r\n                    layout.rows.total = rows.length;\r\n                    layout.table.height = layout.rows.total * layout.cell.height;\r\n                }\r\n                if (cols) {\r\n                    layout.cols.total = cols.length;\r\n                    layout.table.width = layout.cols.total * layout.cell.width;\r\n                }\r\n                layout.scroll.x = Math.max(0, Math.min((layout.table.width - layout.grid.width), nativeInner.scrollLeft));\r\n                layout.scroll.y = Math.max(0, Math.min((layout.table.height - layout.grid.height), nativeInner.scrollTop));\r\n                // console.log(layout.scroll.x, layout.scroll.y, layout.table.width, layout.grid.width);\r\n                update();\r\n            }\r\n\r\n            // resize fires on window resize and on scope update      \r\n            function onResize() {\r\n                layout.grid.width = layout.table.width = nativeInner.offsetWidth;\r\n                layout.grid.height = layout.table.height = nativeInner.offsetHeight;\r\n                update();\r\n            }\r\n\r\n            /*\r\n            scope.$watch(function() {\r\n                return nativeInner.offsetWidth;\r\n            }, function(nval, oval) {\r\n                if (nval !== oval) {\r\n                    onResize();\r\n                }\r\n            });\r\n            scope.$watch(function() {\r\n                return nativeInner.offsetHeight;\r\n            }, function(nval, oval) {\r\n                if (nval !== oval) {\r\n                    onResize();\r\n                }\r\n            });\r\n            */\r\n\r\n            console.log('attributes', attributes);\r\n            attributes.$observe('ngridRows', function(value) {\r\n                console.log('ngridRows', value);\r\n            });\r\n\r\n            scope.$watchCollection(attributes.ngridRows, function(value) {\r\n                console.log('ngrid.$watchCollection.ngridRows');\r\n                if (value) {\r\n                    rows = value;\r\n                    onRows();\r\n                    onResize();\r\n                }\r\n            });\r\n\r\n            scope.$watch(attributes.ngridCols, function(value) {\r\n                console.log('ngrid.$watchCollection.ngridCols');\r\n                if (value) {\r\n                    cols = value;\r\n                    onCols();\r\n                    onResize();\r\n                }\r\n            });\r\n\r\n            /*\r\n            scope.$watch(function(scope) {\r\n                // watch the 'compile' expression for changes\r\n                return scope.$eval(attrs.compile);\r\n            }, function(value) {\r\n                // when the 'compile' expression changes\r\n                // assign it into the current DOM\r\n                element.html(value);\r\n                // compile the new DOM and link it to the current\r\n                // scope.\r\n                // NOTE: we only compile .childNodes so that\r\n                // we don't get into infinite loop compiling ourselves\r\n                $compile(element.contents())(scope);\r\n            });\r\n            */\r\n\r\n            function log(obj) {\r\n                layout.info = JSON.stringify(obj);\r\n                nativeInfo.innerHTML = layout.info;\r\n            }\r\n\r\n            var down, move, diff, dragging, sx, sy;\r\n\r\n            function onStart(e) {\r\n                down = Utils.getTouch(e);\r\n                sx = nativeInner.scrollLeft;\r\n                sy = nativeInner.scrollTop;\r\n                addDragListeners();\r\n                return false;\r\n            }\r\n\r\n            function onMove(e) {\r\n                move = Utils.getTouch(e);\r\n                diff = down.difference(move);\r\n                if (!dragging && diff.power() > 25) {\r\n                    dragging = true;\r\n                    element.addClass('dragging');\r\n                }\r\n                if (dragging) {\r\n                    /*\r\n                    style.transform = 'translateX(' + diff.x + 'px) translateY(' + diff.y + 'px)';\r\n                    style.set(target);\r\n                    elementRect.set(nativeElement).offset(diff);\r\n                    */\r\n                    nativeInner.scrollLeft = sx - diff.x;\r\n                    nativeInner.scrollTop = sy - diff.y;\r\n                    onScroll();\r\n                }\r\n                return false;\r\n            }\r\n\r\n            function onEnd(e) {\r\n                if (dragging) {\r\n                    dragging = false;\r\n                    element.removeClass('dragging');\r\n                    /*\r\n                    style.transform = 'none';\r\n                    style.set(target);\r\n                    */\r\n                }\r\n                removeDragListeners();\r\n                return false;\r\n            }\r\n\r\n            function addDragListeners() {\r\n                angular.element($window).on('touchmove mousemove', onMove);\r\n                angular.element($window).on('touchend mouseup', onEnd);\r\n            };\r\n\r\n            function removeDragListeners() {\r\n                angular.element($window).off('touchmove mousemove', onMove);\r\n                angular.element($window).off('touchend mouseup', onEnd);\r\n            };\r\n\r\n            function addListeners() {\r\n                angular.element(nativeInner).on('touchstart mousedown', onStart);\r\n                angular.element(nativeInner).on('scroll', onScroll);\r\n                angular.element($window).on('resize', onResize);\r\n            };\r\n\r\n            function removeListeners() {\r\n                angular.element(nativeInner).off('touchstart mousedown', onStart);\r\n                angular.element(nativeInner).off('scroll', onScroll);\r\n                angular.element($window).off('resize', onResize);\r\n            };\r\n            scope.$on('$destroy', function() {\r\n                removeListeners();\r\n                removeDragListeners();\r\n            });\r\n            addListeners();\r\n        }\r\n    }\r\n}]);\n/* global angular, module */\r\n\r\nmodule.filter('shortName', ['$filter', function ($filter) {\r\n    function toTitleCase(str) {\r\n        return str.replace(/\\w\\S*/g, function (txt) { return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase(); });\r\n    }\r\n    return function (value) {\r\n        if (!value) {\r\n            return '';\r\n        }\r\n        if (value.indexOf(' .') === value.length - 2) {\r\n            value = value.split(' .').join('');\r\n        }\r\n        /*\r\n        var splitted;\r\n        if (value.indexOf('.') !== -1) {\r\n            splitted = value.split('.');\r\n        } else {\r\n            splitted = value.split(' ');\r\n        }\r\n        */\r\n        var splitted = value.split(' ');\r\n        var firstName = splitted.shift();\r\n        if (splitted.length) {\r\n            var lastName = splitted.join(' ');\r\n            return firstName.substr(0, 1).toUpperCase() + '.' + toTitleCase(lastName);\r\n        } else {\r\n            return firstName;\r\n        }\r\n    }\r\n}]);\r\n\r\nmodule.filter('customCurrency', ['$filter', function ($filter) {\r\n    var legacyFilter = $filter('currency');\r\n    return function (cost, currency) {\r\n        return legacyFilter(cost * currency.ratio, currency.formatting);\r\n    }\r\n}]);\r\n\r\nmodule.filter('customNumber', ['$filter', function ($filter) {\r\n    var filter = $filter('number');\r\n    return function (value, precision, unit) {\r\n        unit = unit || '';\r\n        return (value ? filter(value, precision) + unit : '-');\r\n    }\r\n}]);\r\n\r\nmodule.filter('customHours', [function () {\r\n    return function (value) {\r\n        if (value) {\r\n            var hours = Math.floor(value);\r\n            var minutes = Math.floor((value - hours) * 60);\r\n            var label = hours ? hours + ' H' : '';\r\n            label += minutes ? ' ' + minutes + ' m' : '';\r\n            return label;\r\n        } else {\r\n            return '-';\r\n        }\r\n    }\r\n}]);\r\n\r\nmodule.filter('customDate', ['$filter', function ($filter) {\r\n    var filter = $filter('date');\r\n    return function (value, format, timezone) {\r\n        return value ? filter(value, format, timezone) : '-';\r\n    }\r\n}]);\r\n\r\nmodule.filter('customTime', ['$filter', function ($filter) {\r\n    return function (value, placeholder) {\r\n        if (value) {\r\n            return Utils.parseTime(value);\r\n        } else {\r\n            return (placeholder ? placeholder : '-');\r\n        }\r\n    }\r\n}]);\r\n\r\nmodule.filter('customDigital', ['$filter', function ($filter) {\r\n    return function (value, placeholder) {\r\n        if (value) {\r\n            return Utils.parseHour(value);\r\n        } else {\r\n            return (placeholder ? placeholder : '-');\r\n        }\r\n    }\r\n}]);\r\n\r\nmodule.filter('customString', ['$filter', function ($filter) {\r\n    return function (value, placeholder) {\r\n        return value ? value : (placeholder ? placeholder : '-');\r\n    }\r\n}]);\r\n\r\nmodule.filter('customEnum', function () {\r\n    return function (val) {\r\n        val = val + 1;\r\n        return val < 10 ? '0' + val : val;\r\n    };\r\n});\r\n\n/* global angular, module */\r\n\r\nmodule.factory('Md5', [function () {\r\n\r\n    var hex_chr = '0123456789abcdef'.split('');\r\n\r\n    function cycle(x, k) {\r\n        var a = x[0], b = x[1], c = x[2], d = x[3];\r\n\r\n        a = ff(a, b, c, d, k[0], 7, -680876936);\r\n        d = ff(d, a, b, c, k[1], 12, -389564586);\r\n        c = ff(c, d, a, b, k[2], 17, 606105819);\r\n        b = ff(b, c, d, a, k[3], 22, -1044525330);\r\n        a = ff(a, b, c, d, k[4], 7, -176418897);\r\n        d = ff(d, a, b, c, k[5], 12, 1200080426);\r\n        c = ff(c, d, a, b, k[6], 17, -1473231341);\r\n        b = ff(b, c, d, a, k[7], 22, -45705983);\r\n        a = ff(a, b, c, d, k[8], 7, 1770035416);\r\n        d = ff(d, a, b, c, k[9], 12, -1958414417);\r\n        c = ff(c, d, a, b, k[10], 17, -42063);\r\n        b = ff(b, c, d, a, k[11], 22, -1990404162);\r\n        a = ff(a, b, c, d, k[12], 7, 1804603682);\r\n        d = ff(d, a, b, c, k[13], 12, -40341101);\r\n        c = ff(c, d, a, b, k[14], 17, -1502002290);\r\n        b = ff(b, c, d, a, k[15], 22, 1236535329);\r\n\r\n        a = gg(a, b, c, d, k[1], 5, -165796510);\r\n        d = gg(d, a, b, c, k[6], 9, -1069501632);\r\n        c = gg(c, d, a, b, k[11], 14, 643717713);\r\n        b = gg(b, c, d, a, k[0], 20, -373897302);\r\n        a = gg(a, b, c, d, k[5], 5, -701558691);\r\n        d = gg(d, a, b, c, k[10], 9, 38016083);\r\n        c = gg(c, d, a, b, k[15], 14, -660478335);\r\n        b = gg(b, c, d, a, k[4], 20, -405537848);\r\n        a = gg(a, b, c, d, k[9], 5, 568446438);\r\n        d = gg(d, a, b, c, k[14], 9, -1019803690);\r\n        c = gg(c, d, a, b, k[3], 14, -187363961);\r\n        b = gg(b, c, d, a, k[8], 20, 1163531501);\r\n        a = gg(a, b, c, d, k[13], 5, -1444681467);\r\n        d = gg(d, a, b, c, k[2], 9, -51403784);\r\n        c = gg(c, d, a, b, k[7], 14, 1735328473);\r\n        b = gg(b, c, d, a, k[12], 20, -1926607734);\r\n\r\n        a = hh(a, b, c, d, k[5], 4, -378558);\r\n        d = hh(d, a, b, c, k[8], 11, -2022574463);\r\n        c = hh(c, d, a, b, k[11], 16, 1839030562);\r\n        b = hh(b, c, d, a, k[14], 23, -35309556);\r\n        a = hh(a, b, c, d, k[1], 4, -1530992060);\r\n        d = hh(d, a, b, c, k[4], 11, 1272893353);\r\n        c = hh(c, d, a, b, k[7], 16, -155497632);\r\n        b = hh(b, c, d, a, k[10], 23, -1094730640);\r\n        a = hh(a, b, c, d, k[13], 4, 681279174);\r\n        d = hh(d, a, b, c, k[0], 11, -358537222);\r\n        c = hh(c, d, a, b, k[3], 16, -722521979);\r\n        b = hh(b, c, d, a, k[6], 23, 76029189);\r\n        a = hh(a, b, c, d, k[9], 4, -640364487);\r\n        d = hh(d, a, b, c, k[12], 11, -421815835);\r\n        c = hh(c, d, a, b, k[15], 16, 530742520);\r\n        b = hh(b, c, d, a, k[2], 23, -995338651);\r\n\r\n        a = ii(a, b, c, d, k[0], 6, -198630844);\r\n        d = ii(d, a, b, c, k[7], 10, 1126891415);\r\n        c = ii(c, d, a, b, k[14], 15, -1416354905);\r\n        b = ii(b, c, d, a, k[5], 21, -57434055);\r\n        a = ii(a, b, c, d, k[12], 6, 1700485571);\r\n        d = ii(d, a, b, c, k[3], 10, -1894986606);\r\n        c = ii(c, d, a, b, k[10], 15, -1051523);\r\n        b = ii(b, c, d, a, k[1], 21, -2054922799);\r\n        a = ii(a, b, c, d, k[8], 6, 1873313359);\r\n        d = ii(d, a, b, c, k[15], 10, -30611744);\r\n        c = ii(c, d, a, b, k[6], 15, -1560198380);\r\n        b = ii(b, c, d, a, k[13], 21, 1309151649);\r\n        a = ii(a, b, c, d, k[4], 6, -145523070);\r\n        d = ii(d, a, b, c, k[11], 10, -1120210379);\r\n        c = ii(c, d, a, b, k[2], 15, 718787259);\r\n        b = ii(b, c, d, a, k[9], 21, -343485551);\r\n\r\n        x[0] = add32(a, x[0]);\r\n        x[1] = add32(b, x[1]);\r\n        x[2] = add32(c, x[2]);\r\n        x[3] = add32(d, x[3]);\r\n\r\n    }\r\n\r\n    function cmn(q, a, b, x, s, t) {\r\n        a = add32(add32(a, q), add32(x, t));\r\n        return add32((a << s) | (a >>> (32 - s)), b);\r\n    }\r\n\r\n    function ff(a, b, c, d, x, s, t) {\r\n        return cmn((b & c) | ((~b) & d), a, b, x, s, t);\r\n    }\r\n\r\n    function gg(a, b, c, d, x, s, t) {\r\n        return cmn((b & d) | (c & (~d)), a, b, x, s, t);\r\n    }\r\n\r\n    function hh(a, b, c, d, x, s, t) {\r\n        return cmn(b ^ c ^ d, a, b, x, s, t);\r\n    }\r\n\r\n    function ii(a, b, c, d, x, s, t) {\r\n        return cmn(c ^ (b | (~d)), a, b, x, s, t);\r\n    }\r\n\r\n    function md51(s) {\r\n        var txt = '';\r\n        var n = s.length,\r\n        state = [1732584193, -271733879, -1732584194, 271733878], i;\r\n        for (i = 64; i <= s.length; i += 64) {\r\n            cycle(state, md5blk(s.substring(i - 64, i)));\r\n        }\r\n        s = s.substring(i - 64);\r\n        var tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n        for (i = 0; i < s.length; i++)\r\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\r\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\r\n        if (i > 55) {\r\n            cycle(state, tail);\r\n            for (i = 0; i < 16; i++) tail[i] = 0;\r\n        }\r\n        tail[14] = n * 8;\r\n        cycle(state, tail);\r\n        return state;\r\n    }\r\n\r\n    /* there needs to be support for Unicode here,\r\n        * unless we pretend that we can redefine the MD-5\r\n        * algorithm for multi-byte characters (perhaps\r\n        * by adding every four 16-bit characters and\r\n        * shortening the sum to 32 bits). Otherwise\r\n        * I suggest performing MD-5 as if every character\r\n        * was two bytes--e.g., 0040 0025 = @%--but then\r\n        * how will an ordinary MD-5 sum be matched?\r\n        * There is no way to standardize text to something\r\n        * like UTF-8 before transformation; speed cost is\r\n        * utterly prohibitive. The JavaScript standard\r\n        * itself needs to look at this: it should start\r\n        * providing access to strings as preformed UTF-8\r\n        * 8-bit unsigned value arrays.\r\n        */\r\n    function md5blk(s) { /* I figured global was faster.   */\r\n        var md5blks = [], i; /* Andy King said do it this way. */\r\n        for (i = 0; i < 64; i += 4) {\r\n            md5blks[i >> 2] = s.charCodeAt(i)\r\n            + (s.charCodeAt(i + 1) << 8)\r\n            + (s.charCodeAt(i + 2) << 16)\r\n            + (s.charCodeAt(i + 3) << 24);\r\n        }\r\n        return md5blks;\r\n    }\r\n\r\n    function rhex(n) {\r\n        var s = '', j = 0;\r\n        for (; j < 4; j++)\r\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F]\r\n            + hex_chr[(n >> (j * 8)) & 0x0F];\r\n        return s;\r\n    }\r\n\r\n    function hex(x) {\r\n        for (var i = 0; i < x.length; i++)\r\n            x[i] = rhex(x[i]);\r\n        return x.join('');\r\n    }\r\n\r\n    /* this function is much faster,\r\n    so if possible we use it. Some IEs\r\n    are the only ones I know of that\r\n    need the idiotic second function,\r\n    generated by an if clause.  */\r\n    function add32(a, b) {\r\n        return (a + b) & 0xFFFFFFFF;\r\n    }\r\n\r\n    function Md5() { }\r\n    Md5.encode = function (string) {\r\n        return hex(md51(string));\r\n    }\r\n    if (Md5.encode('hello') !== '5d41402abc4b2a76b9719d911017c592') {\r\n        add32 = function (x, y) {\r\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\r\n            msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n            return (msw << 16) | (lsw & 0xFFFF);\r\n        }\r\n    }\r\n    return Md5;\r\n}]);\r\n\r\nmodule.factory('Utils', ['$compile', '$controller', 'Vector', 'Md5', function ($compile, $controller, Vector, Md5) {\r\n    (function () {\r\n        // POLYFILL window.requestAnimationFrame\r\n        var lastTime = 0;\r\n        var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n        for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n            window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n            window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame']\r\n                                       || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n        }\r\n        if (!window.requestAnimationFrame) {\r\n            window.requestAnimationFrame = function (callback, element) {\r\n                var currTime = new Date().getTime();\r\n                var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n                var id = window.setTimeout(function () { callback(currTime + timeToCall); }, timeToCall);\r\n                lastTime = currTime + timeToCall;\r\n                return id;\r\n            };\r\n        }\r\n        if (!window.cancelAnimationFrame) {\r\n            window.cancelAnimationFrame = function (id) {\r\n                clearTimeout(id);\r\n            };\r\n        }\r\n    }());\r\n    (function () {\r\n        // POLYFILL Array.prototype.reduce\r\n        // Production steps of ECMA-262, Edition 5, 15.4.4.21\r\n        // Reference: http://es5.github.io/#x15.4.4.21\r\n        // https://tc39.github.io/ecma262/#sec-array.prototype.reduce\r\n        if (!Array.prototype.reduce) {\r\n            Object.defineProperty(Array.prototype, 'reduce', {\r\n                value: function (callback) {// , initialvalue\r\n                    if (this === null) {\r\n                        throw new TypeError('Array.prototype.reduce called on null or undefined');\r\n                    }\r\n                    if (typeof callback !== 'function') {\r\n                        throw new TypeError(callback + ' is not a function');\r\n                    }\r\n                    var o = Object(this);\r\n                    var len = o.length >>> 0;\r\n                    var k = 0;\r\n                    var value;\r\n                    if (arguments.length == 2) {\r\n                        value = arguments[1];\r\n                    } else {\r\n                        while (k < len && !(k in o)) {\r\n                            k++;\r\n                        }\r\n                        if (k >= len) {\r\n                            throw new TypeError('Reduce of empty array with no initial value');\r\n                        }\r\n                        value = o[k++];\r\n                    }\r\n                    while (k < len) {\r\n                        if (k in o) {\r\n                            value = callback(value, o[k], k, o);\r\n                        }\r\n                        k++;\r\n                    }\r\n                    return value;\r\n                }\r\n            });\r\n        }\r\n    }());\r\n    var _isTouch;\r\n    function isTouch() {\r\n        if (!_isTouch) {\r\n            _isTouch = {\r\n                value: ('ontouchstart' in window || 'onmsgesturechange' in window)\r\n            }\r\n        }\r\n        // console.log(_isTouch);\r\n        return _isTouch.value;\r\n    }\r\n    function getTouch(e, previous) {\r\n        var t = new Vector();\r\n        if (e.type == 'touchstart' || e.type == 'touchmove' || e.type == 'touchend' || e.type == 'touchcancel') {\r\n            var touch = null;\r\n            var event = e.originalEvent ? e.originalEvent : e;\r\n            var touches = event.touches.length ? event.touches : event.changedTouches;\r\n            if (touches && touches.length) {\r\n                touch = touches[0];\r\n            }\r\n            if (touch) {\r\n                t.x = touch.pageX;\r\n                t.y = touch.pageY;\r\n            }\r\n        } else if (e.type == 'click' || e.type == 'mousedown' || e.type == 'mouseup' || e.type == 'mousemove' || e.type == 'mouseover' || e.type == 'mouseout' || e.type == 'mouseenter' || e.type == 'mouseleave') {\r\n            t.x = e.pageX;\r\n            t.y = e.pageY;\r\n        }\r\n        if (previous) {\r\n            t.s = Vector.difference(previous, t);\r\n        }\r\n        t.type = e.type;\r\n        return t;\r\n    }\r\n    function getRelativeTouch(element, point) {\r\n        var rect = element[0].getBoundingClientRect();\r\n        var e = new Vector(rect.left, rect.top);\r\n        return Vector.difference(e, point);\r\n    }\r\n    function getClosest(el, selector) {\r\n        var matchesFn, parent;\r\n        ['matches', 'webkitMatchesSelector', 'mozMatchesSelector', 'msMatchesSelector', 'oMatchesSelector'].some(function (fn) {\r\n            if (typeof document.body[fn] == 'function') {\r\n                matchesFn = fn;\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n        if (el[matchesFn](selector)) {\r\n            return el;\r\n        }\r\n        while (el !== null) {\r\n            parent = el.parentElement;\r\n            if (parent !== null && parent[matchesFn](selector)) {\r\n                return parent;\r\n            }\r\n            el = parent;\r\n        }\r\n        return null;\r\n    }\r\n    function getClosestElement(el, target) {\r\n        var matchesFn, parent;\r\n        if (el === target) {\r\n            return el;\r\n        }\r\n        while (el !== null) {\r\n            parent = el.parentElement;\r\n            if (parent !== null && parent === target) {\r\n                return parent;\r\n            }\r\n            el = parent;\r\n        }\r\n        return null;\r\n    }\r\n    var getNow = Date.now || function () {\r\n        return new Date().getTime();\r\n    };\r\n    function throttle(func, wait, options) {\r\n        // Returns a function, that, when invoked, will only be triggered at most once\r\n        // during a given window of time. Normally, the throttled function will run\r\n        // as much as it can, without ever going more than once per `wait` duration;\r\n        // but if you'd like to disable the execution on the leading edge, pass\r\n        // `{leading: false}`. To disable execution on the trailing edge, ditto.\r\n        var context, args, result;\r\n        var timeout = null;\r\n        var previous = 0;\r\n        if (!options) options = {};\r\n        var later = function () {\r\n            previous = options.leading === false ? 0 : getNow();\r\n            timeout = null;\r\n            result = func.apply(context, args);\r\n            if (!timeout) context = args = null;\r\n        };\r\n        return function () {\r\n            var now = getNow();\r\n            if (!previous && options.leading === false) previous = now;\r\n            var remaining = wait - (now - previous);\r\n            context = this;\r\n            args = arguments;\r\n            if (remaining <= 0 || remaining > wait) {\r\n                if (timeout) {\r\n                    clearTimeout(timeout);\r\n                    timeout = null;\r\n                }\r\n                previous = now;\r\n                result = func.apply(context, args);\r\n                if (!timeout) context = args = null;\r\n            } else if (!timeout && options.trailing !== false) {\r\n                timeout = setTimeout(later, remaining);\r\n            }\r\n            return result;\r\n        };\r\n    }\r\n    function where(array, query) {\r\n        var found = null;\r\n        if (array) {\r\n            angular.forEach(array, function (item) {\r\n                var has = true;\r\n                angular.forEach(query, function (value, key) {\r\n                    has = has && item[key] === value;\r\n                });\r\n                if (has) {\r\n                    found = item;\r\n                }\r\n            });\r\n        }\r\n        return found;\r\n    }\r\n    function compileController(scope, element, html, data) {\r\n        // console.log('Utils.compileController', element);\r\n        element.html(html);\r\n        var link = $compile(element.contents());\r\n        if (data.controller) {\r\n            var $scope = scope.$new();\r\n            angular.extend($scope, data);\r\n            var controller = $controller(data.controller, { $scope: $scope });\r\n            if (data.controllerAs) {\r\n                scope[data.controllerAs] = controller;\r\n            }\r\n            element.data('$ngControllerController', controller);\r\n            element.children().data('$ngControllerController', controller);\r\n            scope = $scope;\r\n        }\r\n        link(scope);\r\n    }\r\n    var ua = window.navigator.userAgent.toLowerCase();\r\n    var safari = ua.indexOf('safari') !== -1 && ua.indexOf('chrome') === -1;\r\n    var msie = ua.indexOf('trident') !== -1 || ua.indexOf('edge') !== -1 || ua.indexOf('msie') !== -1;\r\n    var chrome = !safari && !msie && ua.indexOf('chrome') !== -1;\r\n    var mobile = ua.indexOf('mobile') !== -1;\r\n    function Utils() {\r\n    }\r\n    function reverseSortOn(key) {\r\n        return function (a, b) {\r\n            if (a[key] < b[key]) {\r\n                return 1;\r\n            }\r\n            if (a[key] > b[key]) {\r\n                return -1;\r\n            }\r\n            // a must be equal to b\r\n            return 0;\r\n        }\r\n    }\r\n    function format(string, prepend, expression) {\r\n        string = string || '';\r\n        prepend = prepend || '';\r\n        var splitted = string.split(',');\r\n        if (splitted.length > 1) {\r\n            var formatted = splitted.shift();\r\n            angular.forEach(splitted, function (value, index) {\r\n                if (expression) {\r\n                    formatted = formatted.split('{' + index + '}').join('\\' + ' + prepend + value + ' + \\'');\r\n                } else {\r\n                    formatted = formatted.split('{' + index + '}').join(prepend + value);\r\n                }\r\n            });\r\n            if (expression) {\r\n                return '\\'' + formatted + '\\'';\r\n            } else {\r\n                return formatted;\r\n            }\r\n        } else {\r\n            return prepend + string;\r\n        }\r\n    }\r\n    function reducer(o, key) {\r\n        return o[key];\r\n    }\r\n    function reducerSetter(o, key, value) {\r\n        if (typeof key == 'string') {\r\n            return reducerSetter(o, key.split('.'), value);\r\n        } else if (key.length == 1 && value !== undefined) {\r\n            return o[key[0]] = value;\r\n        } else if (key.length == 0) {\r\n            return o;\r\n        } else {\r\n            return reducerSetter(o[key[0]], key.slice(1), value);\r\n        }\r\n    }\r\n    function reducerAdder(o, key, value) {\r\n        if (typeof key == 'string') {\r\n            return reducerAdder(o, key.split('.'), value);\r\n        } else if (key.length == 1 && value !== undefined) {\r\n            return (o[key[0]] += value);\r\n        } else if (key.length == 0) {\r\n            return o;\r\n        } else {\r\n            return reducerAdder(o[key[0]], key.slice(1), value);\r\n        }\r\n    }\r\n    Utils.reverseSortOn = reverseSortOn;\r\n    Utils.getTouch = getTouch;\r\n    Utils.getRelativeTouch = getRelativeTouch;\r\n    Utils.getClosest = getClosest;\r\n    Utils.getClosestElement = getClosestElement;\r\n    Utils.throttle = throttle;\r\n    Utils.where = where;\r\n    Utils.format = format;\r\n    Utils.compileController = compileController;\r\n    Utils.reducer = reducer;\r\n    Utils.reducerSetter = reducerSetter;\r\n    Utils.reducerAdder = reducerAdder;\r\n    Utils.toMd5 = function (string) {\r\n        return Md5.encode(string);\r\n    };\r\n    Utils.ua = {\r\n        safari: safari,\r\n        msie: msie,\r\n        chrome: chrome,\r\n        mobile: mobile,\r\n    };\r\n    angular.forEach(Utils.ua, function (value, key) {\r\n        if (value) {\r\n            angular.element(document.getElementsByTagName('body')).addClass(key);\r\n        }\r\n    });\r\n    return Utils;\r\n}]);\r\n\r\nmodule.factory('Vector', function () {\r\n    function Vector(x, y) {\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n    }\r\n    Vector.make = function (a, b) {\r\n        return new Vector(b.x - a.x, b.y - a.y);\r\n    };\r\n    Vector.size = function (a) {\r\n        return Math.sqrt(a.x * a.x + a.y * a.y);\r\n    };\r\n    Vector.normalize = function (a) {\r\n        var l = Vector.size(a);\r\n        a.x /= l;\r\n        a.y /= l;\r\n        return a;\r\n    };\r\n    Vector.incidence = function (a, b) {\r\n        var angle = Math.atan2(b.y, b.x) - Math.atan2(a.y, a.x);\r\n        // if (angle < 0) angle += 2 * Math.PI;\r\n        // angle = Math.min(angle, (Math.PI * 2 - angle));\r\n        return angle;\r\n    };\r\n    Vector.distance = function (a, b) {\r\n        return Math.sqrt((a.x - b.x) * (a.x - b.x) + (a.y - b.y) * (a.y - b.y));\r\n    };\r\n    Vector.cross = function (a, b) {\r\n        return (a.x * b.y) - (a.y * b.x);\r\n    };\r\n    Vector.difference = function (a, b) {\r\n        return new Vector(b.x - a.x, b.y - a.y);\r\n    };\r\n    Vector.power = function (a, b) {\r\n        var x = Math.abs(b.x - a.x);\r\n        var y = Math.abs(b.y - a.y);\r\n        return (x + y) / 2;\r\n    };\r\n    Vector.prototype = {\r\n        size: function () {\r\n            return Vector.size(this);\r\n        },\r\n        normalize: function () {\r\n            return Vector.normalize(this);\r\n        },\r\n        incidence: function (b) {\r\n            return Vector.incidence(this, b);\r\n        },\r\n        cross: function (b) {\r\n            return Vector.cross(this, b);\r\n        },\r\n        distance: function (b) {\r\n            return Vector.distance(this, b);\r\n        },\r\n        difference: function (b) {\r\n            return Vector.difference(this, b);\r\n        },\r\n        power: function () {\r\n            return (Math.abs(this.x) + Math.abs(this.y)) / 2;\r\n        },\r\n        towards: function (b, friction) {\r\n            friction = friction || 0.125;\r\n            this.x += (b.x - this.x) * friction;\r\n            this.y += (b.y - this.y) * friction;\r\n            return this;\r\n        },\r\n        add: function (b) {\r\n            this.x += b.x;\r\n            this.y += b.y;\r\n            return this;\r\n        },\r\n        friction: function (b) {\r\n            this.x *= b;\r\n            this.y *= b;\r\n            return this;\r\n        },\r\n        copy: function (b) {\r\n            return new Vector(this.x, this.y);\r\n        },\r\n        toString: function () {\r\n            return '{' + this.x + ',' + this.y + '}';\r\n        },\r\n    };\r\n    return Vector;\r\n});\r\n\n/* global angular, module */\r\n\n//HEAD \n(function(app) {\ntry { app = angular.module(\"ngrid\"); }\ncatch(err) { app = angular.module(\"ngrid\", []); }\napp.run([\"$templateCache\", function($templateCache) {\n\"use strict\";\n\n$templateCache.put(\"ngrid/partials/ngrid\",\"<div class=\\\"ngrid\\\">\\n\" +\n    \"    <div class=\\\"ngrid-inner\\\">\\n\" +\n    \"        <div class=\\\"ngrid-spacer\\\"></div>\\n\" +\n    \"        <div class=\\\"ngrid-table\\\" ng-transclude></div>\\n\" +\n    \"    </div>\\n\" +\n    \"    <div class=\\\"ngrid-info\\\"></div>\\n\" +\n    \"</div>\")\n}]);\n})();\n\n})(window, window.angular);\n"]}